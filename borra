diff --git a/build/build.js b/build/build.js
index 690c7d4..e4d2e58 100644
--- a/build/build.js
+++ b/build/build.js
@@ -93,7 +93,7 @@
 /*! no static exports found */
 /***/ (function(module, exports, __webpack_require__) {
 
-eval("exports = module.exports = __webpack_require__(/*! ../node_modules/css-loader/lib/css-base.js */ \"./node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.i, \"\\n  \\n  .error-line {\\n    stroke:black;\\n    stroke-dasharray: 2,2;\\n  }\\n  \\n  .error-cap {\\n    stroke:black;\\n    stroke-width: 1px;\\n  }\\n  \\n    div.benchmark_tooltip {\\n      background-color: #fff;\\n      padding: 7px;\\n      text-shadow: #f5f5f5 0 1px 0;\\n      font: 15px Helvetica Neue;\\n      border: 4.5px solid;\\n      border-color: #0A58A2;\\n      border-radius: 3px;\\n      opacity: 0.95;\\n      position: absolute;\\n      box-shadow: rgba(0, 0, 0, 0.3) 0 10px 15px;\\n    }\\n  \\n  .benchmark_tooltip:after {\\n      content: \\\" \\\";\\n      position: absolute;\\n      top: 50%;\\n      right: 100%;\\n      margin-top: -10px;\\n      border-width: 10px;\\n      border-style: solid;\\n      border-color: transparent transparent transparent transparent;\\n      \\n  }\\n  \\n   .plot-bg {\\n     fill:#F8F8F8;\\n     stroke: black;\\n   }\\n      \\n   .axis path,\\n   .axis line {\\n       fill: none;\\n       stroke: grey;\\n       stroke-width: 1;\\n       shape-rendering: crispEdges;\\n   }\\n\\n   .bench_grid {\\n    stroke-opacity: 0.1;\\n    stroke-dasharray: 7,5;\\n  }\\n\\n    \\n    .classificators_list{\\n        background-color: #0A58A2; \\n        border-radius: 8px;\\n        color: #fff;\\n        font-size: 20px;\\n        padding-left: 55px;\\n        padding-right: 55px;\\n        text-align: center;\\n    \\n        }\\n    \\n    .classificators_list:hover {\\n        background-color: #b3cde0;\\n    \\n    }\\n\\n    .benchmarkingTable td {\\n        border: 2px solid black;\\n        border-collapse: collapse;\\n        text-align: center;\\n    }\\n\\n    .benchmarkingTable {\\n        width: 300px; \\n        border-collapse: collapse; \\n        background-color: #f0f0f0;\\n        border: 5px solid black; \\n        float: right;\\n    }\\n\\n    /* .benchmarkingChart{\\n\\n        -webkit-transform:scale(0.5);\\n        -moz-transform:scale(0.5);\\n        -ms-transform:scale(0.5);\\n        transform:scale(0.5,  1);\\n        position: fixed;\\n        left: 0px;\\n        right: 0px;\\n        top: 0px;\\n        bottom: 0px;\\n    } */\\n      .axis--x {\\n          font-size: 12px;\\n      }\\n\\n      .axis--y {\\n        font-size: 12px;\\n    }\\n\\n    .removal_alert {\\n        padding: 10px;\\n        background-color: #ffcccc;\\n        color: #D10000;\\n    }\\n    \\n    .closebtn {\\n        margin-left: 15px;\\n        color: #D10000;\\n        font-weight: bold;\\n        float: right;\\n        font-size: 22px;\\n        line-height: 20px;\\n        cursor: pointer;\\n        transition: 0.3s;\\n    }\\n    \\n    .closebtn:hover {\\n        color: white;\\n    }\", \"\"]);\n\n// exports\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcz8hLi9zcmMvYXBwLmNzcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9hcHAuY3NzPzg4ZDAiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2xpYi9jc3MtYmFzZS5qc1wiKShmYWxzZSk7XG4vLyBpbXBvcnRzXG5cblxuLy8gbW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCJcXG4gIFxcbiAgLmVycm9yLWxpbmUge1xcbiAgICBzdHJva2U6YmxhY2s7XFxuICAgIHN0cm9rZS1kYXNoYXJyYXk6IDIsMjtcXG4gIH1cXG4gIFxcbiAgLmVycm9yLWNhcCB7XFxuICAgIHN0cm9rZTpibGFjaztcXG4gICAgc3Ryb2tlLXdpZHRoOiAxcHg7XFxuICB9XFxuICBcXG4gICAgZGl2LmJlbmNobWFya190b29sdGlwIHtcXG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xcbiAgICAgIHBhZGRpbmc6IDdweDtcXG4gICAgICB0ZXh0LXNoYWRvdzogI2Y1ZjVmNSAwIDFweCAwO1xcbiAgICAgIGZvbnQ6IDE1cHggSGVsdmV0aWNhIE5ldWU7XFxuICAgICAgYm9yZGVyOiA0LjVweCBzb2xpZDtcXG4gICAgICBib3JkZXItY29sb3I6ICMwQTU4QTI7XFxuICAgICAgYm9yZGVyLXJhZGl1czogM3B4O1xcbiAgICAgIG9wYWNpdHk6IDAuOTU7XFxuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgICAgIGJveC1zaGFkb3c6IHJnYmEoMCwgMCwgMCwgMC4zKSAwIDEwcHggMTVweDtcXG4gICAgfVxcbiAgXFxuICAuYmVuY2htYXJrX3Rvb2x0aXA6YWZ0ZXIge1xcbiAgICAgIGNvbnRlbnQ6IFxcXCIgXFxcIjtcXG4gICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICAgICAgdG9wOiA1MCU7XFxuICAgICAgcmlnaHQ6IDEwMCU7XFxuICAgICAgbWFyZ2luLXRvcDogLTEwcHg7XFxuICAgICAgYm9yZGVyLXdpZHRoOiAxMHB4O1xcbiAgICAgIGJvcmRlci1zdHlsZTogc29saWQ7XFxuICAgICAgYm9yZGVyLWNvbG9yOiB0cmFuc3BhcmVudCB0cmFuc3BhcmVudCB0cmFuc3BhcmVudCB0cmFuc3BhcmVudDtcXG4gICAgICBcXG4gIH1cXG4gIFxcbiAgIC5wbG90LWJnIHtcXG4gICAgIGZpbGw6I0Y4RjhGODtcXG4gICAgIHN0cm9rZTogYmxhY2s7XFxuICAgfVxcbiAgICAgIFxcbiAgIC5heGlzIHBhdGgsXFxuICAgLmF4aXMgbGluZSB7XFxuICAgICAgIGZpbGw6IG5vbmU7XFxuICAgICAgIHN0cm9rZTogZ3JleTtcXG4gICAgICAgc3Ryb2tlLXdpZHRoOiAxO1xcbiAgICAgICBzaGFwZS1yZW5kZXJpbmc6IGNyaXNwRWRnZXM7XFxuICAgfVxcblxcbiAgIC5iZW5jaF9ncmlkIHtcXG4gICAgc3Ryb2tlLW9wYWNpdHk6IDAuMTtcXG4gICAgc3Ryb2tlLWRhc2hhcnJheTogNyw1O1xcbiAgfVxcblxcbiAgICBcXG4gICAgLmNsYXNzaWZpY2F0b3JzX2xpc3R7XFxuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMEE1OEEyOyBcXG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcXG4gICAgICAgIGNvbG9yOiAjZmZmO1xcbiAgICAgICAgZm9udC1zaXplOiAyMHB4O1xcbiAgICAgICAgcGFkZGluZy1sZWZ0OiA1NXB4O1xcbiAgICAgICAgcGFkZGluZy1yaWdodDogNTVweDtcXG4gICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcXG4gICAgXFxuICAgICAgICB9XFxuICAgIFxcbiAgICAuY2xhc3NpZmljYXRvcnNfbGlzdDpob3ZlciB7XFxuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjYjNjZGUwO1xcbiAgICBcXG4gICAgfVxcblxcbiAgICAuYmVuY2htYXJraW5nVGFibGUgdGQge1xcbiAgICAgICAgYm9yZGVyOiAycHggc29saWQgYmxhY2s7XFxuICAgICAgICBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlO1xcbiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xcbiAgICB9XFxuXFxuICAgIC5iZW5jaG1hcmtpbmdUYWJsZSB7XFxuICAgICAgICB3aWR0aDogMzAwcHg7IFxcbiAgICAgICAgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTsgXFxuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjBmMGYwO1xcbiAgICAgICAgYm9yZGVyOiA1cHggc29saWQgYmxhY2s7IFxcbiAgICAgICAgZmxvYXQ6IHJpZ2h0O1xcbiAgICB9XFxuXFxuICAgIC8qIC5iZW5jaG1hcmtpbmdDaGFydHtcXG5cXG4gICAgICAgIC13ZWJraXQtdHJhbnNmb3JtOnNjYWxlKDAuNSk7XFxuICAgICAgICAtbW96LXRyYW5zZm9ybTpzY2FsZSgwLjUpO1xcbiAgICAgICAgLW1zLXRyYW5zZm9ybTpzY2FsZSgwLjUpO1xcbiAgICAgICAgdHJhbnNmb3JtOnNjYWxlKDAuNSwgIDEpO1xcbiAgICAgICAgcG9zaXRpb246IGZpeGVkO1xcbiAgICAgICAgbGVmdDogMHB4O1xcbiAgICAgICAgcmlnaHQ6IDBweDtcXG4gICAgICAgIHRvcDogMHB4O1xcbiAgICAgICAgYm90dG9tOiAwcHg7XFxuICAgIH0gKi9cXG4gICAgICAuYXhpcy0teCB7XFxuICAgICAgICAgIGZvbnQtc2l6ZTogMTJweDtcXG4gICAgICB9XFxuXFxuICAgICAgLmF4aXMtLXkge1xcbiAgICAgICAgZm9udC1zaXplOiAxMnB4O1xcbiAgICB9XFxuXFxuICAgIC5yZW1vdmFsX2FsZXJ0IHtcXG4gICAgICAgIHBhZGRpbmc6IDEwcHg7XFxuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZjY2NjO1xcbiAgICAgICAgY29sb3I6ICNEMTAwMDA7XFxuICAgIH1cXG4gICAgXFxuICAgIC5jbG9zZWJ0biB7XFxuICAgICAgICBtYXJnaW4tbGVmdDogMTVweDtcXG4gICAgICAgIGNvbG9yOiAjRDEwMDAwO1xcbiAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7XFxuICAgICAgICBmbG9hdDogcmlnaHQ7XFxuICAgICAgICBmb250LXNpemU6IDIycHg7XFxuICAgICAgICBsaW5lLWhlaWdodDogMjBweDtcXG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcXG4gICAgICAgIHRyYW5zaXRpb246IDAuM3M7XFxuICAgIH1cXG4gICAgXFxuICAgIC5jbG9zZWJ0bjpob3ZlciB7XFxuICAgICAgICBjb2xvcjogd2hpdGU7XFxuICAgIH1cIiwgXCJcIl0pO1xuXG4vLyBleHBvcnRzXG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/css-loader/index.js?!./src/app.css\n");
+eval("exports = module.exports = __webpack_require__(/*! ../node_modules/css-loader/lib/css-base.js */ \"./node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.i, \"\\n  \\n  .error-line {\\n    stroke:black;\\n    stroke-dasharray: 2,2;\\n  }\\n  \\n  .error-cap {\\n    stroke:black;\\n    stroke-width: 1px;\\n  }\\n  \\n    div.benchmark_tooltip {\\n      background-color: #fff;\\n      padding: 7px;\\n      text-shadow: #f5f5f5 0 1px 0;\\n      font: 15px Helvetica Neue;\\n      border: 4.5px solid;\\n      border-color: #0A58A2;\\n      border-radius: 3px;\\n      opacity: 0.95;\\n      position: absolute;\\n      box-shadow: rgba(0, 0, 0, 0.3) 0 10px 15px;\\n    }\\n  \\n  .benchmark_tooltip:after {\\n      content: \\\" \\\";\\n      position: absolute;\\n      top: 50%;\\n      right: 100%;\\n      margin-top: -10px;\\n      border-width: 10px;\\n      border-style: solid;\\n      border-color: transparent transparent transparent transparent;\\n      \\n  }\\n  \\n   .plot-bg {\\n     fill:#F8F8F8;\\n     stroke: black;\\n   }\\n      \\n   .axis path,\\n   .axis line {\\n       fill: none;\\n       stroke: grey;\\n       stroke-width: 1;\\n       shape-rendering: crispEdges;\\n   }\\n\\n   .bench_grid {\\n    stroke-opacity: 0.1;\\n    stroke-dasharray: 7,5;\\n  }\\n\\n    \\n    .classificators_list{\\n        background-color: #0A58A2; \\n        border-radius: 8px;\\n        color: #fff;\\n        font-size: 20px;\\n        padding-left: 55px;\\n        padding-right: 55px;\\n        text-align: center;\\n    \\n        }\\n    \\n    .classificators_list:hover {\\n        background-color: #b3cde0;\\n    \\n    }\\n\\n    .benchmarkingTable td {\\n        border: 2px solid black;\\n        border-collapse: collapse;\\n        text-align: center;\\n    }\\n\\n    .benchmarkingTable {\\n        width: 300px; \\n        border-collapse: collapse; \\n        background-color: #f0f0f0;\\n        border: 5px solid black; \\n        float: right;\\n    }\\n\\n    @media only screen and (max-width: 1400px) {\\n\\n        .benchmarkingChart{\\n            /* float: left; */\\n            width: 90vw;\\n        }\\n    }   \\n\\n\\n    /* .benchmarkingChart{\\n\\n        -webkit-transform:scale(0.5);\\n        -moz-transform:scale(0.5);\\n        -ms-transform:scale(0.5);\\n        transform:scale(0.5,  1);\\n        position: fixed;\\n        left: 0px;\\n        right: 0px;\\n        top: 0px;\\n        bottom: 0px;\\n    } */\\n      .axis--x {\\n          font-size: 12px;\\n      }\\n\\n      .axis--y {\\n        font-size: 12px;\\n    }\\n\\n    .removal_alert {\\n        padding: 10px;\\n        background-color: #ffcccc;\\n        color: #D10000;\\n    }\\n    \\n    .closebtn {\\n        margin-left: 15px;\\n        color: #D10000;\\n        font-weight: bold;\\n        float: right;\\n        font-size: 22px;\\n        line-height: 20px;\\n        cursor: pointer;\\n        transition: 0.3s;\\n    }\\n    \\n    .closebtn:hover {\\n        color: white;\\n    }\", \"\"]);\n\n// exports\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcz8hLi9zcmMvYXBwLmNzcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9hcHAuY3NzPzg4ZDAiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2xpYi9jc3MtYmFzZS5qc1wiKShmYWxzZSk7XG4vLyBpbXBvcnRzXG5cblxuLy8gbW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCJcXG4gIFxcbiAgLmVycm9yLWxpbmUge1xcbiAgICBzdHJva2U6YmxhY2s7XFxuICAgIHN0cm9rZS1kYXNoYXJyYXk6IDIsMjtcXG4gIH1cXG4gIFxcbiAgLmVycm9yLWNhcCB7XFxuICAgIHN0cm9rZTpibGFjaztcXG4gICAgc3Ryb2tlLXdpZHRoOiAxcHg7XFxuICB9XFxuICBcXG4gICAgZGl2LmJlbmNobWFya190b29sdGlwIHtcXG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xcbiAgICAgIHBhZGRpbmc6IDdweDtcXG4gICAgICB0ZXh0LXNoYWRvdzogI2Y1ZjVmNSAwIDFweCAwO1xcbiAgICAgIGZvbnQ6IDE1cHggSGVsdmV0aWNhIE5ldWU7XFxuICAgICAgYm9yZGVyOiA0LjVweCBzb2xpZDtcXG4gICAgICBib3JkZXItY29sb3I6ICMwQTU4QTI7XFxuICAgICAgYm9yZGVyLXJhZGl1czogM3B4O1xcbiAgICAgIG9wYWNpdHk6IDAuOTU7XFxuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgICAgIGJveC1zaGFkb3c6IHJnYmEoMCwgMCwgMCwgMC4zKSAwIDEwcHggMTVweDtcXG4gICAgfVxcbiAgXFxuICAuYmVuY2htYXJrX3Rvb2x0aXA6YWZ0ZXIge1xcbiAgICAgIGNvbnRlbnQ6IFxcXCIgXFxcIjtcXG4gICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICAgICAgdG9wOiA1MCU7XFxuICAgICAgcmlnaHQ6IDEwMCU7XFxuICAgICAgbWFyZ2luLXRvcDogLTEwcHg7XFxuICAgICAgYm9yZGVyLXdpZHRoOiAxMHB4O1xcbiAgICAgIGJvcmRlci1zdHlsZTogc29saWQ7XFxuICAgICAgYm9yZGVyLWNvbG9yOiB0cmFuc3BhcmVudCB0cmFuc3BhcmVudCB0cmFuc3BhcmVudCB0cmFuc3BhcmVudDtcXG4gICAgICBcXG4gIH1cXG4gIFxcbiAgIC5wbG90LWJnIHtcXG4gICAgIGZpbGw6I0Y4RjhGODtcXG4gICAgIHN0cm9rZTogYmxhY2s7XFxuICAgfVxcbiAgICAgIFxcbiAgIC5heGlzIHBhdGgsXFxuICAgLmF4aXMgbGluZSB7XFxuICAgICAgIGZpbGw6IG5vbmU7XFxuICAgICAgIHN0cm9rZTogZ3JleTtcXG4gICAgICAgc3Ryb2tlLXdpZHRoOiAxO1xcbiAgICAgICBzaGFwZS1yZW5kZXJpbmc6IGNyaXNwRWRnZXM7XFxuICAgfVxcblxcbiAgIC5iZW5jaF9ncmlkIHtcXG4gICAgc3Ryb2tlLW9wYWNpdHk6IDAuMTtcXG4gICAgc3Ryb2tlLWRhc2hhcnJheTogNyw1O1xcbiAgfVxcblxcbiAgICBcXG4gICAgLmNsYXNzaWZpY2F0b3JzX2xpc3R7XFxuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMEE1OEEyOyBcXG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcXG4gICAgICAgIGNvbG9yOiAjZmZmO1xcbiAgICAgICAgZm9udC1zaXplOiAyMHB4O1xcbiAgICAgICAgcGFkZGluZy1sZWZ0OiA1NXB4O1xcbiAgICAgICAgcGFkZGluZy1yaWdodDogNTVweDtcXG4gICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcXG4gICAgXFxuICAgICAgICB9XFxuICAgIFxcbiAgICAuY2xhc3NpZmljYXRvcnNfbGlzdDpob3ZlciB7XFxuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjYjNjZGUwO1xcbiAgICBcXG4gICAgfVxcblxcbiAgICAuYmVuY2htYXJraW5nVGFibGUgdGQge1xcbiAgICAgICAgYm9yZGVyOiAycHggc29saWQgYmxhY2s7XFxuICAgICAgICBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlO1xcbiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xcbiAgICB9XFxuXFxuICAgIC5iZW5jaG1hcmtpbmdUYWJsZSB7XFxuICAgICAgICB3aWR0aDogMzAwcHg7IFxcbiAgICAgICAgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTsgXFxuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjBmMGYwO1xcbiAgICAgICAgYm9yZGVyOiA1cHggc29saWQgYmxhY2s7IFxcbiAgICAgICAgZmxvYXQ6IHJpZ2h0O1xcbiAgICB9XFxuXFxuICAgIEBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1heC13aWR0aDogMTQwMHB4KSB7XFxuXFxuICAgICAgICAuYmVuY2htYXJraW5nQ2hhcnR7XFxuICAgICAgICAgICAgLyogZmxvYXQ6IGxlZnQ7ICovXFxuICAgICAgICAgICAgd2lkdGg6IDkwdnc7XFxuICAgICAgICB9XFxuICAgIH0gICBcXG5cXG5cXG4gICAgLyogLmJlbmNobWFya2luZ0NoYXJ0e1xcblxcbiAgICAgICAgLXdlYmtpdC10cmFuc2Zvcm06c2NhbGUoMC41KTtcXG4gICAgICAgIC1tb3otdHJhbnNmb3JtOnNjYWxlKDAuNSk7XFxuICAgICAgICAtbXMtdHJhbnNmb3JtOnNjYWxlKDAuNSk7XFxuICAgICAgICB0cmFuc2Zvcm06c2NhbGUoMC41LCAgMSk7XFxuICAgICAgICBwb3NpdGlvbjogZml4ZWQ7XFxuICAgICAgICBsZWZ0OiAwcHg7XFxuICAgICAgICByaWdodDogMHB4O1xcbiAgICAgICAgdG9wOiAwcHg7XFxuICAgICAgICBib3R0b206IDBweDtcXG4gICAgfSAqL1xcbiAgICAgIC5heGlzLS14IHtcXG4gICAgICAgICAgZm9udC1zaXplOiAxMnB4O1xcbiAgICAgIH1cXG5cXG4gICAgICAuYXhpcy0teSB7XFxuICAgICAgICBmb250LXNpemU6IDEycHg7XFxuICAgIH1cXG5cXG4gICAgLnJlbW92YWxfYWxlcnQge1xcbiAgICAgICAgcGFkZGluZzogMTBweDtcXG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmNjY2M7XFxuICAgICAgICBjb2xvcjogI0QxMDAwMDtcXG4gICAgfVxcbiAgICBcXG4gICAgLmNsb3NlYnRuIHtcXG4gICAgICAgIG1hcmdpbi1sZWZ0OiAxNXB4O1xcbiAgICAgICAgY29sb3I6ICNEMTAwMDA7XFxuICAgICAgICBmb250LXdlaWdodDogYm9sZDtcXG4gICAgICAgIGZsb2F0OiByaWdodDtcXG4gICAgICAgIGZvbnQtc2l6ZTogMjJweDtcXG4gICAgICAgIGxpbmUtaGVpZ2h0OiAyMHB4O1xcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xcbiAgICAgICAgdHJhbnNpdGlvbjogMC4zcztcXG4gICAgfVxcbiAgICBcXG4gICAgLmNsb3NlYnRuOmhvdmVyIHtcXG4gICAgICAgIGNvbG9yOiB3aGl0ZTtcXG4gICAgfVwiLCBcIlwiXSk7XG5cbi8vIGV4cG9ydHNcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/css-loader/index.js?!./src/app.css\n");
 
 /***/ }),
 
@@ -6191,6 +6191,18 @@ eval("var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*!\n * jQ
 
 /***/ }),
 
+/***/ "./node_modules/pareto-frontier/index.js":
+/*!***********************************************!*\
+  !*** ./node_modules/pareto-frontier/index.js ***!
+  \***********************************************/
+/*! no static exports found */
+/***/ (function(module, exports, __webpack_require__) {
+
+"use strict";
+eval("\n\nconst pointComparators = Object.freeze({\n    topRight:    (a, b) => (b[0] < a[0] ? -1 : (b[0] > a[0] ? 1 : (b[1] < a[1] ? -1 : (b[1] > a[1] ? 1 : 0)))),\n    topLeft:     (a, b) => (a[0] < b[0] ? -1 : (a[0] > b[0] ? 1 : (a[1] < b[1] ? 1 : (a[1] > b[1] ? -1 : 0)))),\n    bottomRight: (a, b) => (b[0] < a[0] ? -1 : (b[0] > a[0] ? 1 : (b[1] < a[1] ? 1 : (b[1] > a[1] ? -1 : 0)))),\n    bottomLeft:  (a, b) => (a[0] < b[0] ? -1 : (a[0] > b[0] ? 1 : (a[1] < b[1] ? -1 : (a[1] > b[1] ? 1 : 0)))),\n});\n\nconst getParetoFrontier = (points, options) => {\n    if (!Array.isArray(points) || !points.every(p => Array.isArray(p) && p.length >= 2)) { throw new TypeError('Require array of points as input'); }\n\n    const pointComparator = options && pointComparators[options.optimize] || pointComparators.topRight;\n    const findMax = (pointComparator([0, 1], [0, 0]) < 0); // Optimize +y\n\n    let last;\n    return Array.from(points).sort(pointComparator).filter((p, i) => {\n        if (i === 0 || findMax && p[1] > last || !findMax && p[1] < last) { last = p[1]; return true; }\n\n        return false;\n    });\n}\n\nexports.getParetoFrontier = getParetoFrontier;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvcGFyZXRvLWZyb250aWVyL2luZGV4LmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3BhcmV0by1mcm9udGllci9pbmRleC5qcz9kYWY1Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuY29uc3QgcG9pbnRDb21wYXJhdG9ycyA9IE9iamVjdC5mcmVlemUoe1xuICAgIHRvcFJpZ2h0OiAgICAoYSwgYikgPT4gKGJbMF0gPCBhWzBdID8gLTEgOiAoYlswXSA+IGFbMF0gPyAxIDogKGJbMV0gPCBhWzFdID8gLTEgOiAoYlsxXSA+IGFbMV0gPyAxIDogMCkpKSksXG4gICAgdG9wTGVmdDogICAgIChhLCBiKSA9PiAoYVswXSA8IGJbMF0gPyAtMSA6IChhWzBdID4gYlswXSA/IDEgOiAoYVsxXSA8IGJbMV0gPyAxIDogKGFbMV0gPiBiWzFdID8gLTEgOiAwKSkpKSxcbiAgICBib3R0b21SaWdodDogKGEsIGIpID0+IChiWzBdIDwgYVswXSA/IC0xIDogKGJbMF0gPiBhWzBdID8gMSA6IChiWzFdIDwgYVsxXSA/IDEgOiAoYlsxXSA+IGFbMV0gPyAtMSA6IDApKSkpLFxuICAgIGJvdHRvbUxlZnQ6ICAoYSwgYikgPT4gKGFbMF0gPCBiWzBdID8gLTEgOiAoYVswXSA+IGJbMF0gPyAxIDogKGFbMV0gPCBiWzFdID8gLTEgOiAoYVsxXSA+IGJbMV0gPyAxIDogMCkpKSksXG59KTtcblxuY29uc3QgZ2V0UGFyZXRvRnJvbnRpZXIgPSAocG9pbnRzLCBvcHRpb25zKSA9PiB7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHBvaW50cykgfHwgIXBvaW50cy5ldmVyeShwID0+IEFycmF5LmlzQXJyYXkocCkgJiYgcC5sZW5ndGggPj0gMikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignUmVxdWlyZSBhcnJheSBvZiBwb2ludHMgYXMgaW5wdXQnKTsgfVxuXG4gICAgY29uc3QgcG9pbnRDb21wYXJhdG9yID0gb3B0aW9ucyAmJiBwb2ludENvbXBhcmF0b3JzW29wdGlvbnMub3B0aW1pemVdIHx8IHBvaW50Q29tcGFyYXRvcnMudG9wUmlnaHQ7XG4gICAgY29uc3QgZmluZE1heCA9IChwb2ludENvbXBhcmF0b3IoWzAsIDFdLCBbMCwgMF0pIDwgMCk7IC8vIE9wdGltaXplICt5XG5cbiAgICBsZXQgbGFzdDtcbiAgICByZXR1cm4gQXJyYXkuZnJvbShwb2ludHMpLnNvcnQocG9pbnRDb21wYXJhdG9yKS5maWx0ZXIoKHAsIGkpID0+IHtcbiAgICAgICAgaWYgKGkgPT09IDAgfHwgZmluZE1heCAmJiBwWzFdID4gbGFzdCB8fCAhZmluZE1heCAmJiBwWzFdIDwgbGFzdCkgeyBsYXN0ID0gcFsxXTsgcmV0dXJuIHRydWU7IH1cblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG59XG5cbmV4cG9ydHMuZ2V0UGFyZXRvRnJvbnRpZXIgPSBnZXRQYXJldG9Gcm9udGllcjtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/pareto-frontier/index.js\n");
+
+/***/ }),
+
 /***/ "./node_modules/style-loader/lib/addStyles.js":
 /*!****************************************************!*\
   !*** ./node_modules/style-loader/lib/addStyles.js ***!
@@ -6232,7 +6244,7 @@ eval("\nvar content = __webpack_require__(/*! !../node_modules/css-loader??ref--
 /***/ (function(module, __webpack_exports__, __webpack_require__) {
 
 "use strict";
-eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"loadurl\", function() { return loadurl; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"onQuartileChange\", function() { return onQuartileChange; });\n/* harmony import */ var d3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! d3 */ \"./node_modules/d3/index.js\");\n/* harmony import */ var _app_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./app.css */ \"./src/app.css\");\n/* harmony import */ var _app_css__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_app_css__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jquery */ \"./node_modules/jquery/dist/jquery.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\n\n\n// ./node_modules/.bin/webpack-cli src/app.js --output=build/build.js -d -w\n\n\nlet MAIN_DATA = {};\n\n\nfunction loadurl(){\n    let divid;\n    \n    let charts = document.getElementsByClassName(\"benchmarkingChart\");\n     \n    let i = 0;\n    let dataId;\n    let y;\n    \n    // append ids to chart/s and make d3 plot\n    i = 0\n    for(y of charts){\n      // get benchmarking event id\n      dataId = y.getAttribute('data-id');\n      //set chart id\n      divid = (dataId+i).replace(\":\",\"_\");\n      y.id=divid;\n\n      // append buttons\n      let button1_id = divid + \"__none\";\n      let button2_id = divid + \"__squares\";\n      let button3_id = divid + \"__diagonals\";\n      \n      // append selection list tooltip container\n      d3__WEBPACK_IMPORTED_MODULE_0__[\"select\"]('#'+divid).append(\"div\")\n        .attr(\"id\", \"tooltip_container\")\n\n      let select_list = d3__WEBPACK_IMPORTED_MODULE_0__[\"select\"]('#'+divid).append(\"form\").append(\"select\")\n      .attr(\"class\",\"classificators_list\")\n      .attr(\"id\",divid + \"_dropdown_list\")\n      .append(\"optgroup\")\n      .attr(\"label\",\"Select a classification method:\");\n\n      select_list.append(\"option\")\n      .attr(\"class\", \"selection_option\")\n      .attr(\"id\", button1_id)\n      .attr(\"title\", \"Show only raw data\")\n      .attr(\"selected\",\"disabled\")\n      .attr(\"data-toggle\", \"list_tooltip\")\n      .attr(\"data-container\", \"#tooltip_container\") \n      .text(\"NO CLASSIFICATION\")\n      .on('click', function(d) {\n        onQuartileChange(this.id);\n      });\n      select_list.append(\"option\")\n      .attr(\"class\", \"selection_option\")\n      .attr(\"id\", button2_id)\n      .attr(\"title\", \"Apply square quartiles classification method (based on the 0.5 quartile of the X and Y metrics)\")\n      .attr(\"data-toggle\", \"list_tooltip\")\n      .attr(\"data-container\", \"#tooltip_container\") \n      .text(\"SQUARE QUARTILES\")\n      .on('click', function(d) {\n        onQuartileChange(this.id);\n      });\n      select_list.append(\"option\")\n      .attr(\"class\", \"selection_option\")\n      .attr(\"id\", button3_id)\n      .attr(\"title\", \"Apply diagonal quartiles classifcation method (based on the assignment of a score to each participant proceeding from its distance to the 'optimal performance' corner)\")\n      .attr(\"data-toggle\", \"list_tooltip\")\n      .attr(\"data-container\", \"#tooltip_container\") \n      .text(\"DIAGONAL QUARTILES\")\n      .on('click', function(d) {\n        onQuartileChange(this.id);\n      });\n     \n      let url = \"https://dev-openebench.bsc.es/api/scientific/Dataset/?query=\" + dataId + \"&fmt=json\";\n      get_data(url,divid); \n\n      // $('[data-toggle=\"list_tooltip\"]').tooltip();\n\n      //check the transformation to table attribute and append table to html\n      if (y.getAttribute('toTable') == \"true\"){\n        let table_id = divid + \"_table\";\n        var input = jquery__WEBPACK_IMPORTED_MODULE_2___default()('<br><br><table id=\"'+table_id+'\" data-id=\"'+dataId+'\" class=\"benchmarkingTable\"></table>');\n        jquery__WEBPACK_IMPORTED_MODULE_2___default()(\"#\" + divid).append(input);\n      };\n            \n      i++;\n    }\n        \n    \n       \n};\n\n\n\nfunction get_data(url,divid){\n\n  fetchUrl(url).then(results => {\n    join_all_json(results.Dataset,divid);\n  })\n\n};\n\nasync function fetchUrl(url) {\n\n  try {\n    let request = await fetch(url);\n    let result = await request.text();\n      return JSON.parse(result);\n    }\n    catch (err) {\n      console.log(`Invalid Url Error: ${err.stack} `);\n    }\n\n};\n\nfunction join_all_json(array,divid){\n  try{\n    let full_json  = [];\n    for (let i = 0; i < array.length; i++) {\n        let jo = {};\n        jo['toolname'] = array[i].name.split('.')[0];\n        jo['x'] = array[i].metrics[0].result.value;\n        jo['y'] = array[i].metrics[1].result.value;\n        jo['e'] = array[i].metrics[2].result.value;\n        full_json.push(jo);    \n    }\n\n    MAIN_DATA[divid] = full_json;\n    // by default, no classification method is applied. it is the first item in the selection list\n    var e = document.getElementById(divid + \"_dropdown_list\");\n    let classification_type = e.options[e.selectedIndex].id;\n\n    createChart(full_json,divid, classification_type);\n  }catch(err){\n    console.log(`Invalid Url Error: ${err.stack} `);\n  }\n\n    \n};\n\nfunction onQuartileChange(ID){  \n  \n  var chart_id = ID.split(\"__\")[0];\n  // console.log(d3.select('#'+'svg_'+chart_id));\n  d3__WEBPACK_IMPORTED_MODULE_0__[\"select\"]('#'+'svg_'+chart_id).remove();\n  let classification_type = ID;\n  createChart(MAIN_DATA[chart_id],chart_id, classification_type);\n};\n\nfunction compute_classification(data, svg, xScale, yScale, div, width, height, removed_tools,divid, classification_type) {\n\n  let transform_to_table; //this variable is set to true if there are table elements with the corresponden divid in the html file\n  // every time a new classification is compute the previous results table is deleted (if it exists)\n  if (document.getElementById(divid + \"_table\") != null) {\n    document.getElementById(divid + \"_table\").innerHTML = '';\n    transform_to_table = true;\n  };\n\n  let better = \"bottom-right\";\n  if (classification_type == ( divid + \"__squares\")) {\n    get_square_quartiles(data, svg, xScale, yScale, div, removed_tools,better,divid, transform_to_table);\n    append_quartile_numbers_to_plot (svg, xScale, yScale, better,divid);\n  }  \n  else if (classification_type == (divid + \"__diagonals\")) {\n    get_diagonal_quartiles(data, svg, xScale, yScale, div, width, height, removed_tools, better,divid, transform_to_table);\n  } \n  \n};\n\nfunction compute_chart_height(data){\n\n  if (data.length%5 == 0){\n    return (40 + (20 * (Math.trunc(data.length/5))));\n  } else if (data.lenght%5 != 0) {\n    return (40 + (20 * (Math.trunc(data.length/5)+1)));\n  } \n  \n};\n\nfunction createChart (data,divid, classification_type){\n  // console.log(data)\n  let margin = {top: 20, right: 40, bottom: compute_chart_height(data), left: 40},\n    width = 1200 - margin.left - margin.right,\n    height = 500 - margin.top - margin.bottom;\n\n\n  let xScale = d3__WEBPACK_IMPORTED_MODULE_0__[\"scaleLinear\"]()\n    .range([0, width])\n    .domain([d3__WEBPACK_IMPORTED_MODULE_0__[\"min\"](data, function(d) { return d.x; }), d3__WEBPACK_IMPORTED_MODULE_0__[\"max\"](data, function(d) { return d.x; })]).nice();\n\n  let min_y = d3__WEBPACK_IMPORTED_MODULE_0__[\"min\"](data, function(d) { return d.y; });\n  let max_y = d3__WEBPACK_IMPORTED_MODULE_0__[\"max\"](data, function(d) { return d.y; });\n  let yScale = d3__WEBPACK_IMPORTED_MODULE_0__[\"scaleLinear\"]()\n    .range([height, 0])\n    .domain([min_y - 0.3*(max_y-min_y), max_y + 0.3*(max_y-min_y)]).nice();\n\n  let xAxis = d3__WEBPACK_IMPORTED_MODULE_0__[\"axisBottom\"](xScale).ticks(12),\n      yAxis = d3__WEBPACK_IMPORTED_MODULE_0__[\"axisLeft\"](yScale).ticks(12 * height / width);\n\n  let line = d3__WEBPACK_IMPORTED_MODULE_0__[\"line\"]()\n    .x(function(d) {\n      return xScale(d.x);\n    })\n    .y(function(d) {\n      return yScale(d.y);\n    });\n\n  // Define the div for the tooltip\n\n  let div = d3__WEBPACK_IMPORTED_MODULE_0__[\"select\"]('#'+divid).append(\"div\").attr(\"class\", \"benchmark_tooltip\").style(\"opacity\", 0);\n\n  // append the svg element\n  // d3.select(\"svg\").remove()\n    // console.log(d3.select(\"svg\").remove());\n\n  let svg = d3__WEBPACK_IMPORTED_MODULE_0__[\"select\"]('#'+divid).append(\"svg\")\n    .attr(\"class\", \"benchmarkingSVG\")\n    .attr('id','svg_'+divid)\n    .attr(\"width\", width + margin.left + margin.right)\n    .attr(\"height\", height + margin.top + margin.bottom)\n    .append(\"g\")\n    .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n    \n  svg.append(\"g\").append(\"rect\").attr(\"width\", width).attr(\"height\", height).attr(\"class\", \"plot-bg\");\n\n  // Add Axis labels\n  svg.append(\"g\").attr(\"class\", \"axis axis--x\")\n    .attr(\"transform\", \"translate(\" + 0 + \",\" + height + \")\")\n    .call(xAxis);\n\n  svg.append(\"g\").attr(\"class\", \"axis axis--y\").call(yAxis);\n  \n  // add X and Y Gridlines\n  var gridlines_x = d3__WEBPACK_IMPORTED_MODULE_0__[\"axisBottom\"]()\n                    .ticks(12)\n                    .tickFormat(\"\")\n                    .tickSize(height)\n                    .scale(xScale);\n\n  var gridlines_y = d3__WEBPACK_IMPORTED_MODULE_0__[\"axisLeft\"]()\n                    .ticks(12 * height / width)\n                    .tickFormat(\"\")\n                    .tickSize(-width)\n                    .scale(yScale);\n\n  svg.append(\"g\")\n     .attr(\"class\", \"bench_grid\")\n     .call(gridlines_x);\n  \n     svg.append(\"g\")\n     .attr(\"class\", \"bench_grid\")\n     .call(gridlines_y);\n         \n  let removed_tools = []; // this array stores the tools when the user clicks on them\n\n   // setup fill color\n  let cValue_func = function(d) {\n    return d.toolname;\n  },\n  color_func = d3__WEBPACK_IMPORTED_MODULE_0__[\"scaleOrdinal\"](d3__WEBPACK_IMPORTED_MODULE_0__[\"schemeSet1\"].concat(d3__WEBPACK_IMPORTED_MODULE_0__[\"schemeSet3\"]));\n\n  append_dots_errobars (svg, data, xScale, yScale, div, cValue_func, color_func,divid);\n\n  draw_legend (data, svg, xScale, yScale, div, width, height, removed_tools, color_func, color_func.domain(), margin,divid,classification_type);\n\n  compute_classification(data, svg, xScale, yScale, div, width, height, removed_tools,divid, classification_type);\n\n};\n\nfunction append_dots_errobars (svg, data, xScale, yScale, div, cValue, color,divid){\n\n  // Add Error Line\n  svg.append(\"g\").selectAll(\"line\")\n      .data(data).enter()\n      .append(\"line\")\n      .attr(\"class\", \"error-line\")\n      .attr(\"id\", function (d) { return divid+\"___line\"+d.toolname.replace(/[\\. ()/-]/g, \"_\");})\n      .attr(\"x1\", function(d) {\n        return xScale(d.x);\n      })\n      .attr(\"y1\", function(d) {\n        return yScale(d.y + d.e);\n      })\n      .attr(\"x2\", function(d) {\n        return xScale(d.x);\n      })\n      .attr(\"y2\", function(d) {\n        return yScale(d.y - d.e);\n      });\n\n  // Add Error Top Cap\n  svg.append(\"g\").selectAll(\"line\")\n      .data(data).enter()\n      .append(\"line\")\n      .attr(\"id\", function (d) { return divid+\"___top\"+d.toolname.replace(/[\\. ()/-]/g, \"_\");})\n      .attr(\"class\", \"error-cap\")\n      .attr(\"x1\", function(d) {\n        return xScale(d.x) - 4;\n      })\n      .attr(\"y1\", function(d) {\n        return yScale(d.y + d.e);\n      })\n      .attr(\"x2\", function(d) {\n        return xScale(d.x) + 4;\n      })\n      .attr(\"y2\", function(d) {\n        return yScale(d.y + d.e);\n      });\n\n  // Add Error Bottom Cap\n  svg.append(\"g\").selectAll(\"line\")\n      .data(data).enter()\n      .append(\"line\")\n      .attr(\"id\", function (d) { return divid+\"___bottom\"+d.toolname.replace(/[\\. ()/-]/g, \"_\");})\n      .attr(\"class\", \"error-cap\")\n      .attr(\"x1\", function(d) {\n        return xScale(d.x) - 4;\n      })\n      .attr(\"y1\", function(d) {\n        return yScale(d.y - d.e);\n      })\n      .attr(\"x2\", function(d) {\n        return xScale(d.x) + 4;\n      })\n      .attr(\"y2\", function(d) {\n        return yScale(d.y - d.e);\n      });\n\n  // add dots\n  let symbol = d3__WEBPACK_IMPORTED_MODULE_0__[\"symbol\"]();\n\n  let formatComma = d3__WEBPACK_IMPORTED_MODULE_0__[\"format\"](\",\");\n  let formatDecimal = d3__WEBPACK_IMPORTED_MODULE_0__[\"format\"](\".4f\");\n\n  let dots =svg.selectAll(\".dots\")\n    .data(data)\n    .enter()\n    .append(\"path\")\n    .attr(\"class\", \"benchmark_path\");\n    \n  dots.attr(\"d\", symbol.type(function(){return d3__WEBPACK_IMPORTED_MODULE_0__[\"symbolSquare\"]}))\n      .attr(\"id\", function (d) {  return divid+\"___\"+d.toolname.replace(/[\\. ()/-]/g, \"_\");})\n      .attr(\"class\",\"line\")\n      .attr('transform',function(d){ return \"translate(\"+xScale(d.x)+\",\"+yScale(d.y)+\")\"; })\n      .attr(\"r\", 6)\n      .style(\"fill\", function(d) {\n        return color(cValue(d));\n      })\n      .on(\"mouseover\", function(d) {\n        // show tooltip only if the tool is visible\n        let ID = divid+\"___\"+d.toolname.replace(/[\\. ()/-]/g, \"_\");\n        if (d3__WEBPACK_IMPORTED_MODULE_0__[\"select\"](\"#\"+ID).style(\"opacity\") == 1) {\n          div.transition()\t\t\n              .duration(100)\t\t\n              .style(\"opacity\", .9);\t\t\n          div.html(d.toolname + \"<br/>\"  + formatComma(d.x) + \"<br/>\"  + formatDecimal(d.y))\t\n              .style(\"left\", (d3__WEBPACK_IMPORTED_MODULE_0__[\"event\"].pageX) + \"px\")\t\t\n              .style(\"top\", (d3__WEBPACK_IMPORTED_MODULE_0__[\"event\"].pageY) + \"px\");\n        }\n      })\t\t\t\t\t\n      .on(\"mouseout\", function(d) {\t\t\n        div.transition()\t\t\n          .duration(1500)\t\t\n          .style(\"opacity\", 0);\t\n      });\n    \n};\n\nfunction draw_legend (data, svg, xScale, yScale, div, width, height, removed_tools, color, color_domain, margin,divid,classification_type) {\n\n  //set number of elements per legend row\n  let n = 5;\n\n  let legend = svg.selectAll(\".legend\")\n    .data(color_domain)\n    .enter().append(\"g\")\n    .attr(\"class\", \"legend\")\n    .attr(\"transform\", function(d, i) { return \"translate(\" + (-width+i%n*200) + \",\" + (height + 40 + Math.floor(i/n) * 20) + \")\"; });\n  \n  // draw legend colored rectangles\n  legend.append(\"rect\")\n        .attr(\"x\", width + 18)\n        .attr(\"width\", 18)\n        .attr(\"height\", 18)\n        .style(\"fill\", color)\n        .on('click', function(d) {\n\n          let dot = d3__WEBPACK_IMPORTED_MODULE_0__[\"select\"](\"text#\" +divid+\"___\"+d.replace(/[\\. ()/-]/g, \"_\"));\n          let ID = dot._groups[0][0].id;\n\n          if(data.length-removed_tools.length-1 >= 4){\n\n            let legend_rect = this;\n            show_or_hide_participant_in_plot (ID, data, svg, xScale, yScale, div, width, height, removed_tools,divid,classification_type, legend_rect);\n\n          } else if (data.length-removed_tools.length-1 < 4 && (d3__WEBPACK_IMPORTED_MODULE_0__[\"select\"](\"#\"+ID).style(\"opacity\")) == 0){\n\n            let legend_rect = this;\n            show_or_hide_participant_in_plot (ID, data, svg, xScale, yScale, div, width, height, removed_tools,divid,classification_type, legend_rect);\n\n          } else {\n            \n            jquery__WEBPACK_IMPORTED_MODULE_2___default()('.removal_alert').remove();\n            var alert_msg = jquery__WEBPACK_IMPORTED_MODULE_2___default()('<div class=\"removal_alert\">\\\n                                <span class=\"closebtn\" onclick=\"(this.parentNode.remove());\">&times;</span>\\\n                                At least four participants are required for the benchmark!!\\\n                              </div>');\n            jquery__WEBPACK_IMPORTED_MODULE_2___default()(\"#\" + divid).append(alert_msg);\n\n            setTimeout(function(){\n              if (jquery__WEBPACK_IMPORTED_MODULE_2___default()('.removal_alert').length > 0) {\n                jquery__WEBPACK_IMPORTED_MODULE_2___default()('.removal_alert').remove();\n              }\n            }, 5000)\n\n          };\n\n        });\n\n  // draw legend text\n  legend.append(\"text\")\n        .attr(\"x\", width + 40)\n        .attr(\"y\", 9)\n        .attr(\"id\", function (d) { return divid+\"___\"+d.replace(/[\\. ()/-]/g, \"_\");})\n        .attr(\"dy\", \".35em\")\n        .style(\"text-anchor\", \"start\")\n        .text(function(d) {\n          return d;\n        });\n\n};\n\nfunction show_or_hide_participant_in_plot (ID, data, svg, xScale, yScale, div, width, height, removed_tools,divid,classification_type, legend_rect){\n\n   let tool_id =ID.split(\"___\")[1];\n  // remove the existing number and classification lines from plot (if any)\n  svg.selectAll(\"#\"+divid+\"___x_quartile\").remove();\n  svg.selectAll(\"#\"+divid+\"___y_quartile\").remove();\n  svg.selectAll(\"#\"+divid+\"___diag_quartile_0\").remove();\n  svg.selectAll(\"#\"+divid+\"___diag_quartile_1\").remove();\n  svg.selectAll(\"#\"+divid+\"___diag_quartile_2\").remove();\n  svg.selectAll(\"#\"+divid+\"___num_bottom_right\").remove();\n  svg.selectAll(\"#\"+divid+\"___num_top_right\").remove();\n  svg.selectAll(\"#\"+divid+\"___num_bottom_left\").remove();\n  svg.selectAll(\"#\"+divid+\"___num_top_left\").remove();\n  \n\n  let blockopacity = d3__WEBPACK_IMPORTED_MODULE_0__[\"select\"](\"#\"+ID).style(\"opacity\");\n  \n  // change the opacity to 0 or 1 depending on the current state\n  if (blockopacity == 0) {\n    d3__WEBPACK_IMPORTED_MODULE_0__[\"select\"](\"#\"+ID).style(\"opacity\", 1);\n    d3__WEBPACK_IMPORTED_MODULE_0__[\"select\"](\"#\"+divid+\"___top\"+tool_id).style(\"opacity\", 1);\n    d3__WEBPACK_IMPORTED_MODULE_0__[\"select\"](\"#\"+divid+\"___bottom\"+tool_id).style(\"opacity\", 1);\n    d3__WEBPACK_IMPORTED_MODULE_0__[\"select\"](\"#\"+divid+\"___line\"+tool_id).style(\"opacity\", 1);\n    // recalculate the quartiles after removing the tools\n    let index = jquery__WEBPACK_IMPORTED_MODULE_2___default.a.inArray(tool_id.replace(/_/g, \"-\"), removed_tools);\n    removed_tools.splice(index, 1);\n    compute_classification(data, svg, xScale, yScale, div, width, height, removed_tools,divid,classification_type);\n    //change the legend opacity to keep track of hidden tools\n    d3__WEBPACK_IMPORTED_MODULE_0__[\"select\"](legend_rect).style(\"opacity\", 1);\n    d3__WEBPACK_IMPORTED_MODULE_0__[\"select\"](\"text#\" +divid+\"___\"+tool_id).style(\"opacity\", 1);\n\n  } else {\n    d3__WEBPACK_IMPORTED_MODULE_0__[\"select\"](\"#\"+ID).style(\"opacity\", 0);\n    d3__WEBPACK_IMPORTED_MODULE_0__[\"select\"](\"#\"+divid+\"___top\"+tool_id).style(\"opacity\", 0);\n    d3__WEBPACK_IMPORTED_MODULE_0__[\"select\"](\"#\"+divid+\"___bottom\"+tool_id).style(\"opacity\", 0);\n    d3__WEBPACK_IMPORTED_MODULE_0__[\"select\"](\"#\"+divid+\"___line\"+tool_id).style(\"opacity\", 0);\n    removed_tools.push(tool_id.replace(/_/g, \"-\"));\n    compute_classification(data, svg, xScale, yScale, div, width, height, removed_tools,divid,classification_type);\n    //change the legend opacity to keep track of hidden tools\n    d3__WEBPACK_IMPORTED_MODULE_0__[\"select\"](legend_rect).style(\"opacity\", 0.2);\n    d3__WEBPACK_IMPORTED_MODULE_0__[\"select\"](\"text#\" +divid+\"___\"+tool_id).style(\"opacity\", 0.2);\n  }\n\n};\n\nfunction get_square_quartiles(data, svg, xScale, yScale, div, removed_tools,better, divid, transform_to_table) {\n  \n  let tools_not_hidden = remove_hidden_tools(data, removed_tools);\n\n  // compute the quartiles over the new seet of data\n  let x_values = tools_not_hidden.map(a => a.x).sort(function(a, b){return a - b});\n  let y_values = tools_not_hidden.map(a => a.y).sort(function(a, b){return a - b});\n\n  let quantile_x = d3__WEBPACK_IMPORTED_MODULE_0__[\"quantile\"](x_values, 0.5);\n  let quantile_y = d3__WEBPACK_IMPORTED_MODULE_0__[\"quantile\"](y_values, 0.5);\n\n  let x_axis = xScale.domain();\n  let y_axis = yScale.domain();\n\n  let formatComma = d3__WEBPACK_IMPORTED_MODULE_0__[\"format\"](\",\");\n\n  svg.append(\"line\")\n    .attr(\"x1\", xScale(quantile_x))\n    .attr(\"y1\", yScale(y_axis[0]))\n    .attr(\"x2\", xScale(quantile_x))\n    .attr(\"y2\", yScale(y_axis[1]))\n    .attr(\"id\", function (d) { return divid+\"___x_quartile\";})\n    .attr(\"stroke\", \"#0A58A2\")\n    .attr(\"stroke-width\",3)\n    .style(\"stroke-dasharray\", (\"20, 5\"))\n    .style(\"opacity\", 0.4)\n    .on(\"mouseover\", function(d) {\t\n      div.transition()\t\t\n         .duration(100)\t\t\n         .style(\"opacity\", .9);\t\t\n      div.html(\"X quartile = \" + formatComma( quantile_x) )\t\n         .style(\"left\", (d3__WEBPACK_IMPORTED_MODULE_0__[\"event\"].pageX) + \"px\")\t\t\n         .style(\"top\", (d3__WEBPACK_IMPORTED_MODULE_0__[\"event\"].pageY) + \"px\");\n    })\t\t\t\t\t\n    .on(\"mouseout\", function(d) {\t\t\n      div.transition()\t\t\n         .duration(1000)\t\t\n         .style(\"opacity\", 0);\t\n    });\n\n  svg.append(\"line\")\n    .attr(\"x1\", xScale(x_axis[0]))\n    .attr(\"y1\", yScale(quantile_y))\n    .attr(\"x2\", xScale(x_axis[1]))\n    .attr(\"y2\", yScale(quantile_y))\n    .attr(\"id\", function (d) { return divid+\"___y_quartile\";})\n    .attr(\"stroke\", \"#0A58A2\")\n    .attr(\"stroke-width\",3)\n    .style(\"stroke-dasharray\", (\"20, 5\"))\n    .style(\"opacity\", 0.4)\n    .on(\"mouseover\", function(d) {\t\n      div.transition()\t\t\n         .duration(100)\t\t\n         .style(\"opacity\", .9);\t\t\n      div\t.html(\"Y quartile = \" + formatComma(quantile_y) )\t\n          .style(\"left\", (d3__WEBPACK_IMPORTED_MODULE_0__[\"event\"].pageX) + \"px\")\t\t\n          .style(\"top\", (d3__WEBPACK_IMPORTED_MODULE_0__[\"event\"].pageY) + \"px\");\n    })\t\t\t\t\t\n    .on(\"mouseout\", function(d) {\t\t\n      div.transition()\t\t\n         .duration(1500)\t\t\n         .style(\"opacity\", 0);\t\n    });\n\n    //the tranformation to tabular format is done only if there are any table elements in the html file\n    if (transform_to_table == true) {\n      transform_sqr_classif_to_table(better, tools_not_hidden, quantile_x, quantile_y, divid);\n    };\n    \n};\n\nfunction transform_sqr_classif_to_table(better, data, quantile_x, quantile_y, divid){\n  if (better == \"bottom-right\"){\n    data.forEach(function(element) {\n        if (element['x'] >= quantile_x && element['y'] <= quantile_y){\n              element['quartile'] = 1;\n        }else if (element['x'] >= quantile_x && element['y'] > quantile_y){\n              element['quartile'] = 3;\n        }else if (element['x'] < quantile_x && element['y'] > quantile_y){\n              element['quartile'] = 4;\n        }else if (element['x'] < quantile_x && element['y'] <= quantile_y){\n              element['quartile'] = 2;\n        }\n    });\n  } else if (better == \"top-right\"){\n      data.forEach(function(element) {\n        if (element['x'] >= quantile_x && element['y'] < quantile_y){\n              element['quartile'] = 3;\n        }else if (element['x'] >= quantile_x && element['y'] >= quantile_y){\n              element['quartile'] = 1;\n        }else if (element['x'] < quantile_x && element['y'] >= quantile_y){\n              element['quartile'] = 2;\n        }else if (element['x'] < quantile_x && element['y'] < quantile_y){\n              element['quartile'] = 4;\n        }\n      });\n  };\n\n  fill_in_table (divid, data);\n  set_cell_colors();\n\n};\n\n\nfunction append_quartile_numbers_to_plot (svg, xScale, yScale, better,divid){\n\n  let x_axis = xScale.domain();\n  let y_axis = yScale.domain();\n\n  let num_bottom_right,num_bottom_left,num_top_right,num_top_left;\n  // append quartile numbers to plot\n  if (better == \"bottom-right\"){\n     num_bottom_right = \"1\";\n     num_bottom_left = \"2\";\n     num_top_right = \"3\";\n     num_top_left = \"4\";\n  } \n  else if (better == \"top-right\"){\n     num_bottom_right = \"3\";\n     num_bottom_left = \"4\";\n     num_top_right = \"1\";\n     num_top_left = \"2\";\n  };\n\n  \n  svg.append(\"text\")\n  .attr(\"id\", function (d) { return divid+\"___num_bottom_right\";})\n  .attr(\"x\", xScale(x_axis[1]-(0.05*(x_axis[1]-x_axis[0]))))\n  .attr(\"y\", yScale(y_axis[1]-(0.97*(y_axis[1]-y_axis[0]))))\n  .style(\"opacity\", 0.4)\n  .style(\"font-size\", \"40px\")\n  .style(\"fill\", \"#0A58A2\")\n  .text(num_bottom_right);\n\n  svg.append(\"text\")\n  .attr(\"id\", function (d) { return divid+\"___num_bottom_left\";})\n  .attr(\"x\", xScale(x_axis[1]-(0.95*(x_axis[1]-x_axis[0]))))\n  .attr(\"y\", yScale(y_axis[1]-(0.97*(y_axis[1]-y_axis[0]))))\n  .style(\"opacity\", 0.4)\n  .style(\"font-size\", \"40px\")\n  .style(\"fill\", \"#0A58A2\")\n  .text(num_bottom_left);\n\n  svg.append(\"text\")\n  .attr(\"id\", function (d) { return divid+\"___num_top_right\";})\n  .attr(\"x\", xScale(x_axis[1]-(0.05*(x_axis[1]-x_axis[0]))))\n  .attr(\"y\", yScale(y_axis[1]-(0.1*(y_axis[1]-y_axis[0]))))\n  .style(\"opacity\", 0.4)\n  .style(\"font-size\", \"40px\")\n  .style(\"fill\", \"#0A58A2\")\n  .text(num_top_right);\n\n  svg.append(\"text\")\n  .attr(\"id\", function (d) { return divid+\"___num_top_left\";})\n  .attr(\"x\", xScale(x_axis[1]-(0.95*(x_axis[1]-x_axis[0]))))\n  .attr(\"y\", yScale(y_axis[1]-(0.1*(y_axis[1]-y_axis[0]))))\n  .style(\"opacity\", 0.4)\n  .style(\"font-size\", \"40px\")\n  .style(\"fill\", \"#0A58A2\")\n  .text(num_top_left);\n\n}\nfunction get_diagonal_quartiles(data, svg, xScale, yScale, div, width, height, removed_tools, better, divid, transform_to_table) {\n\n  let tools_not_hidden = remove_hidden_tools(data, removed_tools);\n\n  let x_values = tools_not_hidden.map(a => a.x);\n  let y_values = tools_not_hidden.map(a => a.y);\n\n  // get distance to lowest score corner\n\n  // normalize data to 0-1 range\n  let normalized_values = normalize_data(x_values, y_values);\n  let [x_norm, y_norm] = [normalized_values[0], normalized_values[1]];\n  \n  let max_x = Math.max.apply(null, x_values);\n  let max_y = Math.max.apply(null, y_values);\n\n  // # compute the scores for each of the tool. based on their distance to the x and y axis\n  let scores = []\n  let scores_coords = {}; //this object will store the scores and the coordinates\n  for (let i = 0; i < x_norm.length; i++) {\n\n    if (better == \"bottom-right\"){\n      scores.push(x_norm[i] + (1 - y_norm[i]));\n      scores_coords[x_norm[i] + (1 - y_norm[i])] =  [x_values[i], y_values[i]];\n      //append the score to the data array\n      tools_not_hidden[i]['score'] = x_norm[i] + (1 - y_norm[i]);\n    } \n    else if (better == \"top-right\"){\n      scores.push(x_norm[i] + y_norm[i]);\n      scores_coords[x_norm[i] + y_norm[i]] = [x_values[i], y_values[i]];\n      //append the score to the data array\n      tools_not_hidden[i]['score'] = x_norm[i] + y_norm[i];\n    };\n\n  };\n\n  // sort the scores and compute quartiles\n  scores.sort(function(a, b){return b-a});\n\n  let first_quartile = d3__WEBPACK_IMPORTED_MODULE_0__[\"quantile\"](scores, 0.25);\n  let second_quartile = d3__WEBPACK_IMPORTED_MODULE_0__[\"quantile\"](scores, 0.5);\n  let third_quartile = d3__WEBPACK_IMPORTED_MODULE_0__[\"quantile\"](scores, 0.75);\n\n  // compute the diagonal line coords\n  let coords = [get_diagonal_line(scores, scores_coords, first_quartile, better, max_x, max_y,svg, xScale, yScale), \n                get_diagonal_line(scores, scores_coords, second_quartile, better, max_x, max_y,svg, xScale, yScale), \n                get_diagonal_line(scores, scores_coords, third_quartile, better, max_x, max_y,svg, xScale, yScale)\n              ];\n  \n  // append the 3 lines to the svg\n  let index = 0;\n\n  coords.forEach(line => {\n    let [x_coords, y_coords] = [line[0], line[1]];\n    svg.append(\"line\")\n       .attr(\"clip-path\",\"url(#clip)\")\n       .attr(\"x1\", xScale(x_coords[0]))\n       .attr(\"y1\", yScale(y_coords[0]))\n       .attr(\"x2\", xScale(x_coords[1]))\n       .attr(\"y2\", yScale(y_coords[1]))  \n       .attr(\"id\", function (d) { return divid+\"___diag_quartile_\" + index;})\n       .attr(\"stroke\", \"#0A58A2\")\n       .attr(\"stroke-width\",3)\n       .style(\"stroke-dasharray\", (\"20, 5\"))\n       .style(\"opacity\", 0.4)\n\n    svg.append(\"clipPath\")\n       .attr(\"id\", \"clip\")\n       .append(\"rect\")\n       .attr(\"width\", width)\n       .attr(\"height\", height);\n\n    index += 1;\n  });\n\n  //the tranformation to tabular format is done only if there are any table elements in the html file\n  if (transform_to_table == true) {\n    transform_diag_classif_to_table(tools_not_hidden, first_quartile, second_quartile, third_quartile, divid);\n  };\n\n};\n\nfunction transform_diag_classif_to_table(data, first_quartile, second_quartile, third_quartile, divid){\n\n  data.forEach(function(element) {\n\n    if (element['score'] > first_quartile){\n          element['quartile'] = 1;\n    }else if ( element['score'] > second_quartile && element['score'] <= first_quartile){\n          element['quartile'] = 2;\n    }else if ( element['score'] > third_quartile && element['score'] <= second_quartile){\n          element['quartile'] = 3;\n    }else if (element['score'] <= third_quartile){\n          element['quartile'] = 4;\n    }\n  });\n\n  fill_in_table (divid, data);\n  set_cell_colors();\n\n};\n\nfunction normalize_data(x_values, y_values){\n\n  let maxX = Math.max.apply(null, x_values);\n  let maxY = Math.max.apply(null, y_values);\n  \n  let x_norm = x_values.map(function(e) {  \n    return e / maxX;\n  });\n\n  let y_norm = y_values.map(function(e) {  \n    return e / maxY;\n  });\n\n  return [x_norm, y_norm];\n};\n\nfunction get_diagonal_line(scores, scores_coords, quartile, better, max_x, max_y,svg, xScale, yScale){\n\n  let target;\n  for (let i = 0; i < scores.length; i++) {\n    // # find out which are the two points that contain the percentile value\n    \n    if (scores[i] <= quartile){\n        target = [[scores_coords[scores[i - 1]][0], scores_coords[scores[i - 1]][1]],\n                  [scores_coords[scores[i]][0], scores_coords[scores[i]][1]]];\n        break;\n    };\n  };\n  // # get the the mid point between the two, where the quartile line will pass\n  let half_point = [(target[0][0] + target[1][0]) / 2, (target[0][1] + target[1][1]) / 2];\n\n  // # draw the line depending on which is the optimal corner\n  let x_coords;\n  let y_coords;\n  if (better == \"bottom-right\"){\n       x_coords = [half_point[0] - max_x, half_point[0] + max_x];\n       y_coords = [half_point[1] - max_y, half_point[1] + max_y];\n  } else if (better == \"top-right\"){\n       x_coords = [half_point[0] + max_x, half_point[0] - max_x];\n       y_coords = [half_point[1] - max_y, half_point[1] + max_y];   \n  };\n\n  return [x_coords, y_coords];\n};\n\nfunction remove_hidden_tools(data, removed_tools){\n  // remove from the data array the participants that the user has hidden (removed_tools)\n  // create a new array where the tools that have not been hidden will be stored\n  let tools_not_hidden = [];\n  data.forEach(element => {\n    let index = jquery__WEBPACK_IMPORTED_MODULE_2___default.a.inArray(element.toolname, removed_tools);\n    if (index == -1){\n      tools_not_hidden.push(element);\n    }\n  });\n\n  return tools_not_hidden;\n\n};\n\nfunction fill_in_table (divid, data){\n  //create table dinamically\n  var table = document.getElementById(divid + \"_table\");\n  var row = table.insertRow(-1);\n  row.insertCell(0).innerHTML = \"<b>TOOL</b>\";\n  row.insertCell(1).innerHTML = \"<b>QUARTILE</b>\";\n\n  data.forEach(function(element) {\n    var row = table.insertRow(-1);\n    row.insertCell(0).innerHTML = element[\"toolname\"];\n    row.insertCell(1).innerHTML = element[\"quartile\"];\n  });\n\n};\n\nfunction set_cell_colors(){\n\n  var cell = jquery__WEBPACK_IMPORTED_MODULE_2___default()('td'); \n\n  cell.each(function() { //loop through all td elements ie the cells\n\n    var cell_value = jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).html(); //get the value\n\n    if (cell_value == 1) { //if then for if value is 1\n      jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).css({'background' : '#238b45'});   // changes td to red.\n    } else if (cell_value == 2) {\n      jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).css({'background' : '#74c476'}); \n    } else if (cell_value == 3) {\n      jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).css({'background' : '#bae4b3'}); \n    } else if (cell_value == 4) {\n      jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).css({'background' : '#edf8e9'}); \n    } else {\n      jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).css({'background' : '#ffffff'});\n    };\n\n  });\n\n};\n\n\n\nloadurl();\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYXBwLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2FwcC5qcz8xMTEyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGQzIGZyb20gJ2QzJztcbmltcG9ydCAnLi9hcHAuY3NzJztcbmltcG9ydCAkIGZyb20gXCJqcXVlcnlcIjtcblxuXG4vLyAuL25vZGVfbW9kdWxlcy8uYmluL3dlYnBhY2stY2xpIHNyYy9hcHAuanMgLS1vdXRwdXQ9YnVpbGQvYnVpbGQuanMgLWQgLXdcblxuXG5sZXQgTUFJTl9EQVRBID0ge307XG5cblxuZnVuY3Rpb24gbG9hZHVybCgpe1xuICAgIGxldCBkaXZpZDtcbiAgICBcbiAgICBsZXQgY2hhcnRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImJlbmNobWFya2luZ0NoYXJ0XCIpO1xuICAgICBcbiAgICBsZXQgaSA9IDA7XG4gICAgbGV0IGRhdGFJZDtcbiAgICBsZXQgeTtcbiAgICBcbiAgICAvLyBhcHBlbmQgaWRzIHRvIGNoYXJ0L3MgYW5kIG1ha2UgZDMgcGxvdFxuICAgIGkgPSAwXG4gICAgZm9yKHkgb2YgY2hhcnRzKXtcbiAgICAgIC8vIGdldCBiZW5jaG1hcmtpbmcgZXZlbnQgaWRcbiAgICAgIGRhdGFJZCA9IHkuZ2V0QXR0cmlidXRlKCdkYXRhLWlkJyk7XG4gICAgICAvL3NldCBjaGFydCBpZFxuICAgICAgZGl2aWQgPSAoZGF0YUlkK2kpLnJlcGxhY2UoXCI6XCIsXCJfXCIpO1xuICAgICAgeS5pZD1kaXZpZDtcblxuICAgICAgLy8gYXBwZW5kIGJ1dHRvbnNcbiAgICAgIGxldCBidXR0b24xX2lkID0gZGl2aWQgKyBcIl9fbm9uZVwiO1xuICAgICAgbGV0IGJ1dHRvbjJfaWQgPSBkaXZpZCArIFwiX19zcXVhcmVzXCI7XG4gICAgICBsZXQgYnV0dG9uM19pZCA9IGRpdmlkICsgXCJfX2RpYWdvbmFsc1wiO1xuICAgICAgXG4gICAgICAvLyBhcHBlbmQgc2VsZWN0aW9uIGxpc3QgdG9vbHRpcCBjb250YWluZXJcbiAgICAgIGQzLnNlbGVjdCgnIycrZGl2aWQpLmFwcGVuZChcImRpdlwiKVxuICAgICAgICAuYXR0cihcImlkXCIsIFwidG9vbHRpcF9jb250YWluZXJcIilcblxuICAgICAgbGV0IHNlbGVjdF9saXN0ID0gZDMuc2VsZWN0KCcjJytkaXZpZCkuYXBwZW5kKFwiZm9ybVwiKS5hcHBlbmQoXCJzZWxlY3RcIilcbiAgICAgIC5hdHRyKFwiY2xhc3NcIixcImNsYXNzaWZpY2F0b3JzX2xpc3RcIilcbiAgICAgIC5hdHRyKFwiaWRcIixkaXZpZCArIFwiX2Ryb3Bkb3duX2xpc3RcIilcbiAgICAgIC5hcHBlbmQoXCJvcHRncm91cFwiKVxuICAgICAgLmF0dHIoXCJsYWJlbFwiLFwiU2VsZWN0IGEgY2xhc3NpZmljYXRpb24gbWV0aG9kOlwiKTtcblxuICAgICAgc2VsZWN0X2xpc3QuYXBwZW5kKFwib3B0aW9uXCIpXG4gICAgICAuYXR0cihcImNsYXNzXCIsIFwic2VsZWN0aW9uX29wdGlvblwiKVxuICAgICAgLmF0dHIoXCJpZFwiLCBidXR0b24xX2lkKVxuICAgICAgLmF0dHIoXCJ0aXRsZVwiLCBcIlNob3cgb25seSByYXcgZGF0YVwiKVxuICAgICAgLmF0dHIoXCJzZWxlY3RlZFwiLFwiZGlzYWJsZWRcIilcbiAgICAgIC5hdHRyKFwiZGF0YS10b2dnbGVcIiwgXCJsaXN0X3Rvb2x0aXBcIilcbiAgICAgIC5hdHRyKFwiZGF0YS1jb250YWluZXJcIiwgXCIjdG9vbHRpcF9jb250YWluZXJcIikgXG4gICAgICAudGV4dChcIk5PIENMQVNTSUZJQ0FUSU9OXCIpXG4gICAgICAub24oJ2NsaWNrJywgZnVuY3Rpb24oZCkge1xuICAgICAgICBvblF1YXJ0aWxlQ2hhbmdlKHRoaXMuaWQpO1xuICAgICAgfSk7XG4gICAgICBzZWxlY3RfbGlzdC5hcHBlbmQoXCJvcHRpb25cIilcbiAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJzZWxlY3Rpb25fb3B0aW9uXCIpXG4gICAgICAuYXR0cihcImlkXCIsIGJ1dHRvbjJfaWQpXG4gICAgICAuYXR0cihcInRpdGxlXCIsIFwiQXBwbHkgc3F1YXJlIHF1YXJ0aWxlcyBjbGFzc2lmaWNhdGlvbiBtZXRob2QgKGJhc2VkIG9uIHRoZSAwLjUgcXVhcnRpbGUgb2YgdGhlIFggYW5kIFkgbWV0cmljcylcIilcbiAgICAgIC5hdHRyKFwiZGF0YS10b2dnbGVcIiwgXCJsaXN0X3Rvb2x0aXBcIilcbiAgICAgIC5hdHRyKFwiZGF0YS1jb250YWluZXJcIiwgXCIjdG9vbHRpcF9jb250YWluZXJcIikgXG4gICAgICAudGV4dChcIlNRVUFSRSBRVUFSVElMRVNcIilcbiAgICAgIC5vbignY2xpY2snLCBmdW5jdGlvbihkKSB7XG4gICAgICAgIG9uUXVhcnRpbGVDaGFuZ2UodGhpcy5pZCk7XG4gICAgICB9KTtcbiAgICAgIHNlbGVjdF9saXN0LmFwcGVuZChcIm9wdGlvblwiKVxuICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcInNlbGVjdGlvbl9vcHRpb25cIilcbiAgICAgIC5hdHRyKFwiaWRcIiwgYnV0dG9uM19pZClcbiAgICAgIC5hdHRyKFwidGl0bGVcIiwgXCJBcHBseSBkaWFnb25hbCBxdWFydGlsZXMgY2xhc3NpZmNhdGlvbiBtZXRob2QgKGJhc2VkIG9uIHRoZSBhc3NpZ25tZW50IG9mIGEgc2NvcmUgdG8gZWFjaCBwYXJ0aWNpcGFudCBwcm9jZWVkaW5nIGZyb20gaXRzIGRpc3RhbmNlIHRvIHRoZSAnb3B0aW1hbCBwZXJmb3JtYW5jZScgY29ybmVyKVwiKVxuICAgICAgLmF0dHIoXCJkYXRhLXRvZ2dsZVwiLCBcImxpc3RfdG9vbHRpcFwiKVxuICAgICAgLmF0dHIoXCJkYXRhLWNvbnRhaW5lclwiLCBcIiN0b29sdGlwX2NvbnRhaW5lclwiKSBcbiAgICAgIC50ZXh0KFwiRElBR09OQUwgUVVBUlRJTEVTXCIpXG4gICAgICAub24oJ2NsaWNrJywgZnVuY3Rpb24oZCkge1xuICAgICAgICBvblF1YXJ0aWxlQ2hhbmdlKHRoaXMuaWQpO1xuICAgICAgfSk7XG4gICAgIFxuICAgICAgbGV0IHVybCA9IFwiaHR0cHM6Ly9kZXYtb3BlbmViZW5jaC5ic2MuZXMvYXBpL3NjaWVudGlmaWMvRGF0YXNldC8/cXVlcnk9XCIgKyBkYXRhSWQgKyBcIiZmbXQ9anNvblwiO1xuICAgICAgZ2V0X2RhdGEodXJsLGRpdmlkKTsgXG5cbiAgICAgIC8vICQoJ1tkYXRhLXRvZ2dsZT1cImxpc3RfdG9vbHRpcFwiXScpLnRvb2x0aXAoKTtcblxuICAgICAgLy9jaGVjayB0aGUgdHJhbnNmb3JtYXRpb24gdG8gdGFibGUgYXR0cmlidXRlIGFuZCBhcHBlbmQgdGFibGUgdG8gaHRtbFxuICAgICAgaWYgKHkuZ2V0QXR0cmlidXRlKCd0b1RhYmxlJykgPT0gXCJ0cnVlXCIpe1xuICAgICAgICBsZXQgdGFibGVfaWQgPSBkaXZpZCArIFwiX3RhYmxlXCI7XG4gICAgICAgIHZhciBpbnB1dCA9ICQoJzxicj48YnI+PHRhYmxlIGlkPVwiJyt0YWJsZV9pZCsnXCIgZGF0YS1pZD1cIicrZGF0YUlkKydcIiBjbGFzcz1cImJlbmNobWFya2luZ1RhYmxlXCI+PC90YWJsZT4nKTtcbiAgICAgICAgJChcIiNcIiArIGRpdmlkKS5hcHBlbmQoaW5wdXQpO1xuICAgICAgfTtcbiAgICAgICAgICAgIFxuICAgICAgaSsrO1xuICAgIH1cbiAgICAgICAgXG4gICAgXG4gICAgICAgXG59O1xuXG5cblxuZnVuY3Rpb24gZ2V0X2RhdGEodXJsLGRpdmlkKXtcblxuICBmZXRjaFVybCh1cmwpLnRoZW4ocmVzdWx0cyA9PiB7XG4gICAgam9pbl9hbGxfanNvbihyZXN1bHRzLkRhdGFzZXQsZGl2aWQpO1xuICB9KVxuXG59O1xuXG5hc3luYyBmdW5jdGlvbiBmZXRjaFVybCh1cmwpIHtcblxuICB0cnkge1xuICAgIGxldCByZXF1ZXN0ID0gYXdhaXQgZmV0Y2godXJsKTtcbiAgICBsZXQgcmVzdWx0ID0gYXdhaXQgcmVxdWVzdC50ZXh0KCk7XG4gICAgICByZXR1cm4gSlNPTi5wYXJzZShyZXN1bHQpO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLmxvZyhgSW52YWxpZCBVcmwgRXJyb3I6ICR7ZXJyLnN0YWNrfSBgKTtcbiAgICB9XG5cbn07XG5cbmZ1bmN0aW9uIGpvaW5fYWxsX2pzb24oYXJyYXksZGl2aWQpe1xuICB0cnl7XG4gICAgbGV0IGZ1bGxfanNvbiAgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxldCBqbyA9IHt9O1xuICAgICAgICBqb1sndG9vbG5hbWUnXSA9IGFycmF5W2ldLm5hbWUuc3BsaXQoJy4nKVswXTtcbiAgICAgICAgam9bJ3gnXSA9IGFycmF5W2ldLm1ldHJpY3NbMF0ucmVzdWx0LnZhbHVlO1xuICAgICAgICBqb1sneSddID0gYXJyYXlbaV0ubWV0cmljc1sxXS5yZXN1bHQudmFsdWU7XG4gICAgICAgIGpvWydlJ10gPSBhcnJheVtpXS5tZXRyaWNzWzJdLnJlc3VsdC52YWx1ZTtcbiAgICAgICAgZnVsbF9qc29uLnB1c2goam8pOyAgICBcbiAgICB9XG5cbiAgICBNQUlOX0RBVEFbZGl2aWRdID0gZnVsbF9qc29uO1xuICAgIC8vIGJ5IGRlZmF1bHQsIG5vIGNsYXNzaWZpY2F0aW9uIG1ldGhvZCBpcyBhcHBsaWVkLiBpdCBpcyB0aGUgZmlyc3QgaXRlbSBpbiB0aGUgc2VsZWN0aW9uIGxpc3RcbiAgICB2YXIgZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGRpdmlkICsgXCJfZHJvcGRvd25fbGlzdFwiKTtcbiAgICBsZXQgY2xhc3NpZmljYXRpb25fdHlwZSA9IGUub3B0aW9uc1tlLnNlbGVjdGVkSW5kZXhdLmlkO1xuXG4gICAgY3JlYXRlQ2hhcnQoZnVsbF9qc29uLGRpdmlkLCBjbGFzc2lmaWNhdGlvbl90eXBlKTtcbiAgfWNhdGNoKGVycil7XG4gICAgY29uc29sZS5sb2coYEludmFsaWQgVXJsIEVycm9yOiAke2Vyci5zdGFja30gYCk7XG4gIH1cblxuICAgIFxufTtcblxuZnVuY3Rpb24gb25RdWFydGlsZUNoYW5nZShJRCl7ICBcbiAgXG4gIHZhciBjaGFydF9pZCA9IElELnNwbGl0KFwiX19cIilbMF07XG4gIC8vIGNvbnNvbGUubG9nKGQzLnNlbGVjdCgnIycrJ3N2Z18nK2NoYXJ0X2lkKSk7XG4gIGQzLnNlbGVjdCgnIycrJ3N2Z18nK2NoYXJ0X2lkKS5yZW1vdmUoKTtcbiAgbGV0IGNsYXNzaWZpY2F0aW9uX3R5cGUgPSBJRDtcbiAgY3JlYXRlQ2hhcnQoTUFJTl9EQVRBW2NoYXJ0X2lkXSxjaGFydF9pZCwgY2xhc3NpZmljYXRpb25fdHlwZSk7XG59O1xuXG5mdW5jdGlvbiBjb21wdXRlX2NsYXNzaWZpY2F0aW9uKGRhdGEsIHN2ZywgeFNjYWxlLCB5U2NhbGUsIGRpdiwgd2lkdGgsIGhlaWdodCwgcmVtb3ZlZF90b29scyxkaXZpZCwgY2xhc3NpZmljYXRpb25fdHlwZSkge1xuXG4gIGxldCB0cmFuc2Zvcm1fdG9fdGFibGU7IC8vdGhpcyB2YXJpYWJsZSBpcyBzZXQgdG8gdHJ1ZSBpZiB0aGVyZSBhcmUgdGFibGUgZWxlbWVudHMgd2l0aCB0aGUgY29ycmVzcG9uZGVuIGRpdmlkIGluIHRoZSBodG1sIGZpbGVcbiAgLy8gZXZlcnkgdGltZSBhIG5ldyBjbGFzc2lmaWNhdGlvbiBpcyBjb21wdXRlIHRoZSBwcmV2aW91cyByZXN1bHRzIHRhYmxlIGlzIGRlbGV0ZWQgKGlmIGl0IGV4aXN0cylcbiAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGRpdmlkICsgXCJfdGFibGVcIikgIT0gbnVsbCkge1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGRpdmlkICsgXCJfdGFibGVcIikuaW5uZXJIVE1MID0gJyc7XG4gICAgdHJhbnNmb3JtX3RvX3RhYmxlID0gdHJ1ZTtcbiAgfTtcblxuICBsZXQgYmV0dGVyID0gXCJib3R0b20tcmlnaHRcIjtcbiAgaWYgKGNsYXNzaWZpY2F0aW9uX3R5cGUgPT0gKCBkaXZpZCArIFwiX19zcXVhcmVzXCIpKSB7XG4gICAgZ2V0X3NxdWFyZV9xdWFydGlsZXMoZGF0YSwgc3ZnLCB4U2NhbGUsIHlTY2FsZSwgZGl2LCByZW1vdmVkX3Rvb2xzLGJldHRlcixkaXZpZCwgdHJhbnNmb3JtX3RvX3RhYmxlKTtcbiAgICBhcHBlbmRfcXVhcnRpbGVfbnVtYmVyc190b19wbG90IChzdmcsIHhTY2FsZSwgeVNjYWxlLCBiZXR0ZXIsZGl2aWQpO1xuICB9ICBcbiAgZWxzZSBpZiAoY2xhc3NpZmljYXRpb25fdHlwZSA9PSAoZGl2aWQgKyBcIl9fZGlhZ29uYWxzXCIpKSB7XG4gICAgZ2V0X2RpYWdvbmFsX3F1YXJ0aWxlcyhkYXRhLCBzdmcsIHhTY2FsZSwgeVNjYWxlLCBkaXYsIHdpZHRoLCBoZWlnaHQsIHJlbW92ZWRfdG9vbHMsIGJldHRlcixkaXZpZCwgdHJhbnNmb3JtX3RvX3RhYmxlKTtcbiAgfSBcbiAgXG59O1xuXG5mdW5jdGlvbiBjb21wdXRlX2NoYXJ0X2hlaWdodChkYXRhKXtcblxuICBpZiAoZGF0YS5sZW5ndGglNSA9PSAwKXtcbiAgICByZXR1cm4gKDQwICsgKDIwICogKE1hdGgudHJ1bmMoZGF0YS5sZW5ndGgvNSkpKSk7XG4gIH0gZWxzZSBpZiAoZGF0YS5sZW5naHQlNSAhPSAwKSB7XG4gICAgcmV0dXJuICg0MCArICgyMCAqIChNYXRoLnRydW5jKGRhdGEubGVuZ3RoLzUpKzEpKSk7XG4gIH0gXG4gIFxufTtcblxuZnVuY3Rpb24gY3JlYXRlQ2hhcnQgKGRhdGEsZGl2aWQsIGNsYXNzaWZpY2F0aW9uX3R5cGUpe1xuICAvLyBjb25zb2xlLmxvZyhkYXRhKVxuICBsZXQgbWFyZ2luID0ge3RvcDogMjAsIHJpZ2h0OiA0MCwgYm90dG9tOiBjb21wdXRlX2NoYXJ0X2hlaWdodChkYXRhKSwgbGVmdDogNDB9LFxuICAgIHdpZHRoID0gMTIwMCAtIG1hcmdpbi5sZWZ0IC0gbWFyZ2luLnJpZ2h0LFxuICAgIGhlaWdodCA9IDUwMCAtIG1hcmdpbi50b3AgLSBtYXJnaW4uYm90dG9tO1xuXG5cbiAgbGV0IHhTY2FsZSA9IGQzLnNjYWxlTGluZWFyKClcbiAgICAucmFuZ2UoWzAsIHdpZHRoXSlcbiAgICAuZG9tYWluKFtkMy5taW4oZGF0YSwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZC54OyB9KSwgZDMubWF4KGRhdGEsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQueDsgfSldKS5uaWNlKCk7XG5cbiAgbGV0IG1pbl95ID0gZDMubWluKGRhdGEsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQueTsgfSk7XG4gIGxldCBtYXhfeSA9IGQzLm1heChkYXRhLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLnk7IH0pO1xuICBsZXQgeVNjYWxlID0gZDMuc2NhbGVMaW5lYXIoKVxuICAgIC5yYW5nZShbaGVpZ2h0LCAwXSlcbiAgICAuZG9tYWluKFttaW5feSAtIDAuMyoobWF4X3ktbWluX3kpLCBtYXhfeSArIDAuMyoobWF4X3ktbWluX3kpXSkubmljZSgpO1xuXG4gIGxldCB4QXhpcyA9IGQzLmF4aXNCb3R0b20oeFNjYWxlKS50aWNrcygxMiksXG4gICAgICB5QXhpcyA9IGQzLmF4aXNMZWZ0KHlTY2FsZSkudGlja3MoMTIgKiBoZWlnaHQgLyB3aWR0aCk7XG5cbiAgbGV0IGxpbmUgPSBkMy5saW5lKClcbiAgICAueChmdW5jdGlvbihkKSB7XG4gICAgICByZXR1cm4geFNjYWxlKGQueCk7XG4gICAgfSlcbiAgICAueShmdW5jdGlvbihkKSB7XG4gICAgICByZXR1cm4geVNjYWxlKGQueSk7XG4gICAgfSk7XG5cbiAgLy8gRGVmaW5lIHRoZSBkaXYgZm9yIHRoZSB0b29sdGlwXG5cbiAgbGV0IGRpdiA9IGQzLnNlbGVjdCgnIycrZGl2aWQpLmFwcGVuZChcImRpdlwiKS5hdHRyKFwiY2xhc3NcIiwgXCJiZW5jaG1hcmtfdG9vbHRpcFwiKS5zdHlsZShcIm9wYWNpdHlcIiwgMCk7XG5cbiAgLy8gYXBwZW5kIHRoZSBzdmcgZWxlbWVudFxuICAvLyBkMy5zZWxlY3QoXCJzdmdcIikucmVtb3ZlKClcbiAgICAvLyBjb25zb2xlLmxvZyhkMy5zZWxlY3QoXCJzdmdcIikucmVtb3ZlKCkpO1xuXG4gIGxldCBzdmcgPSBkMy5zZWxlY3QoJyMnK2RpdmlkKS5hcHBlbmQoXCJzdmdcIilcbiAgICAuYXR0cihcImNsYXNzXCIsIFwiYmVuY2htYXJraW5nU1ZHXCIpXG4gICAgLmF0dHIoJ2lkJywnc3ZnXycrZGl2aWQpXG4gICAgLmF0dHIoXCJ3aWR0aFwiLCB3aWR0aCArIG1hcmdpbi5sZWZ0ICsgbWFyZ2luLnJpZ2h0KVxuICAgIC5hdHRyKFwiaGVpZ2h0XCIsIGhlaWdodCArIG1hcmdpbi50b3AgKyBtYXJnaW4uYm90dG9tKVxuICAgIC5hcHBlbmQoXCJnXCIpXG4gICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyBtYXJnaW4ubGVmdCArIFwiLFwiICsgbWFyZ2luLnRvcCArIFwiKVwiKTtcbiAgICBcbiAgc3ZnLmFwcGVuZChcImdcIikuYXBwZW5kKFwicmVjdFwiKS5hdHRyKFwid2lkdGhcIiwgd2lkdGgpLmF0dHIoXCJoZWlnaHRcIiwgaGVpZ2h0KS5hdHRyKFwiY2xhc3NcIiwgXCJwbG90LWJnXCIpO1xuXG4gIC8vIEFkZCBBeGlzIGxhYmVsc1xuICBzdmcuYXBwZW5kKFwiZ1wiKS5hdHRyKFwiY2xhc3NcIiwgXCJheGlzIGF4aXMtLXhcIilcbiAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIDAgKyBcIixcIiArIGhlaWdodCArIFwiKVwiKVxuICAgIC5jYWxsKHhBeGlzKTtcblxuICBzdmcuYXBwZW5kKFwiZ1wiKS5hdHRyKFwiY2xhc3NcIiwgXCJheGlzIGF4aXMtLXlcIikuY2FsbCh5QXhpcyk7XG4gIFxuICAvLyBhZGQgWCBhbmQgWSBHcmlkbGluZXNcbiAgdmFyIGdyaWRsaW5lc194ID0gZDMuYXhpc0JvdHRvbSgpXG4gICAgICAgICAgICAgICAgICAgIC50aWNrcygxMilcbiAgICAgICAgICAgICAgICAgICAgLnRpY2tGb3JtYXQoXCJcIilcbiAgICAgICAgICAgICAgICAgICAgLnRpY2tTaXplKGhlaWdodClcbiAgICAgICAgICAgICAgICAgICAgLnNjYWxlKHhTY2FsZSk7XG5cbiAgdmFyIGdyaWRsaW5lc195ID0gZDMuYXhpc0xlZnQoKVxuICAgICAgICAgICAgICAgICAgICAudGlja3MoMTIgKiBoZWlnaHQgLyB3aWR0aClcbiAgICAgICAgICAgICAgICAgICAgLnRpY2tGb3JtYXQoXCJcIilcbiAgICAgICAgICAgICAgICAgICAgLnRpY2tTaXplKC13aWR0aClcbiAgICAgICAgICAgICAgICAgICAgLnNjYWxlKHlTY2FsZSk7XG5cbiAgc3ZnLmFwcGVuZChcImdcIilcbiAgICAgLmF0dHIoXCJjbGFzc1wiLCBcImJlbmNoX2dyaWRcIilcbiAgICAgLmNhbGwoZ3JpZGxpbmVzX3gpO1xuICBcbiAgICAgc3ZnLmFwcGVuZChcImdcIilcbiAgICAgLmF0dHIoXCJjbGFzc1wiLCBcImJlbmNoX2dyaWRcIilcbiAgICAgLmNhbGwoZ3JpZGxpbmVzX3kpO1xuICAgICAgICAgXG4gIGxldCByZW1vdmVkX3Rvb2xzID0gW107IC8vIHRoaXMgYXJyYXkgc3RvcmVzIHRoZSB0b29scyB3aGVuIHRoZSB1c2VyIGNsaWNrcyBvbiB0aGVtXG5cbiAgIC8vIHNldHVwIGZpbGwgY29sb3JcbiAgbGV0IGNWYWx1ZV9mdW5jID0gZnVuY3Rpb24oZCkge1xuICAgIHJldHVybiBkLnRvb2xuYW1lO1xuICB9LFxuICBjb2xvcl9mdW5jID0gZDMuc2NhbGVPcmRpbmFsKGQzLnNjaGVtZVNldDEuY29uY2F0KGQzLnNjaGVtZVNldDMpKTtcblxuICBhcHBlbmRfZG90c19lcnJvYmFycyAoc3ZnLCBkYXRhLCB4U2NhbGUsIHlTY2FsZSwgZGl2LCBjVmFsdWVfZnVuYywgY29sb3JfZnVuYyxkaXZpZCk7XG5cbiAgZHJhd19sZWdlbmQgKGRhdGEsIHN2ZywgeFNjYWxlLCB5U2NhbGUsIGRpdiwgd2lkdGgsIGhlaWdodCwgcmVtb3ZlZF90b29scywgY29sb3JfZnVuYywgY29sb3JfZnVuYy5kb21haW4oKSwgbWFyZ2luLGRpdmlkLGNsYXNzaWZpY2F0aW9uX3R5cGUpO1xuXG4gIGNvbXB1dGVfY2xhc3NpZmljYXRpb24oZGF0YSwgc3ZnLCB4U2NhbGUsIHlTY2FsZSwgZGl2LCB3aWR0aCwgaGVpZ2h0LCByZW1vdmVkX3Rvb2xzLGRpdmlkLCBjbGFzc2lmaWNhdGlvbl90eXBlKTtcblxufTtcblxuZnVuY3Rpb24gYXBwZW5kX2RvdHNfZXJyb2JhcnMgKHN2ZywgZGF0YSwgeFNjYWxlLCB5U2NhbGUsIGRpdiwgY1ZhbHVlLCBjb2xvcixkaXZpZCl7XG5cbiAgLy8gQWRkIEVycm9yIExpbmVcbiAgc3ZnLmFwcGVuZChcImdcIikuc2VsZWN0QWxsKFwibGluZVwiKVxuICAgICAgLmRhdGEoZGF0YSkuZW50ZXIoKVxuICAgICAgLmFwcGVuZChcImxpbmVcIilcbiAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJlcnJvci1saW5lXCIpXG4gICAgICAuYXR0cihcImlkXCIsIGZ1bmN0aW9uIChkKSB7IHJldHVybiBkaXZpZCtcIl9fX2xpbmVcIitkLnRvb2xuYW1lLnJlcGxhY2UoL1tcXC4gKCkvLV0vZywgXCJfXCIpO30pXG4gICAgICAuYXR0cihcIngxXCIsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgcmV0dXJuIHhTY2FsZShkLngpO1xuICAgICAgfSlcbiAgICAgIC5hdHRyKFwieTFcIiwgZnVuY3Rpb24oZCkge1xuICAgICAgICByZXR1cm4geVNjYWxlKGQueSArIGQuZSk7XG4gICAgICB9KVxuICAgICAgLmF0dHIoXCJ4MlwiLCBmdW5jdGlvbihkKSB7XG4gICAgICAgIHJldHVybiB4U2NhbGUoZC54KTtcbiAgICAgIH0pXG4gICAgICAuYXR0cihcInkyXCIsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgcmV0dXJuIHlTY2FsZShkLnkgLSBkLmUpO1xuICAgICAgfSk7XG5cbiAgLy8gQWRkIEVycm9yIFRvcCBDYXBcbiAgc3ZnLmFwcGVuZChcImdcIikuc2VsZWN0QWxsKFwibGluZVwiKVxuICAgICAgLmRhdGEoZGF0YSkuZW50ZXIoKVxuICAgICAgLmFwcGVuZChcImxpbmVcIilcbiAgICAgIC5hdHRyKFwiaWRcIiwgZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGRpdmlkK1wiX19fdG9wXCIrZC50b29sbmFtZS5yZXBsYWNlKC9bXFwuICgpLy1dL2csIFwiX1wiKTt9KVxuICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcImVycm9yLWNhcFwiKVxuICAgICAgLmF0dHIoXCJ4MVwiLCBmdW5jdGlvbihkKSB7XG4gICAgICAgIHJldHVybiB4U2NhbGUoZC54KSAtIDQ7XG4gICAgICB9KVxuICAgICAgLmF0dHIoXCJ5MVwiLCBmdW5jdGlvbihkKSB7XG4gICAgICAgIHJldHVybiB5U2NhbGUoZC55ICsgZC5lKTtcbiAgICAgIH0pXG4gICAgICAuYXR0cihcIngyXCIsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgcmV0dXJuIHhTY2FsZShkLngpICsgNDtcbiAgICAgIH0pXG4gICAgICAuYXR0cihcInkyXCIsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgcmV0dXJuIHlTY2FsZShkLnkgKyBkLmUpO1xuICAgICAgfSk7XG5cbiAgLy8gQWRkIEVycm9yIEJvdHRvbSBDYXBcbiAgc3ZnLmFwcGVuZChcImdcIikuc2VsZWN0QWxsKFwibGluZVwiKVxuICAgICAgLmRhdGEoZGF0YSkuZW50ZXIoKVxuICAgICAgLmFwcGVuZChcImxpbmVcIilcbiAgICAgIC5hdHRyKFwiaWRcIiwgZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGRpdmlkK1wiX19fYm90dG9tXCIrZC50b29sbmFtZS5yZXBsYWNlKC9bXFwuICgpLy1dL2csIFwiX1wiKTt9KVxuICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcImVycm9yLWNhcFwiKVxuICAgICAgLmF0dHIoXCJ4MVwiLCBmdW5jdGlvbihkKSB7XG4gICAgICAgIHJldHVybiB4U2NhbGUoZC54KSAtIDQ7XG4gICAgICB9KVxuICAgICAgLmF0dHIoXCJ5MVwiLCBmdW5jdGlvbihkKSB7XG4gICAgICAgIHJldHVybiB5U2NhbGUoZC55IC0gZC5lKTtcbiAgICAgIH0pXG4gICAgICAuYXR0cihcIngyXCIsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgcmV0dXJuIHhTY2FsZShkLngpICsgNDtcbiAgICAgIH0pXG4gICAgICAuYXR0cihcInkyXCIsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgcmV0dXJuIHlTY2FsZShkLnkgLSBkLmUpO1xuICAgICAgfSk7XG5cbiAgLy8gYWRkIGRvdHNcbiAgbGV0IHN5bWJvbCA9IGQzLnN5bWJvbCgpO1xuXG4gIGxldCBmb3JtYXRDb21tYSA9IGQzLmZvcm1hdChcIixcIik7XG4gIGxldCBmb3JtYXREZWNpbWFsID0gZDMuZm9ybWF0KFwiLjRmXCIpO1xuXG4gIGxldCBkb3RzID1zdmcuc2VsZWN0QWxsKFwiLmRvdHNcIilcbiAgICAuZGF0YShkYXRhKVxuICAgIC5lbnRlcigpXG4gICAgLmFwcGVuZChcInBhdGhcIilcbiAgICAuYXR0cihcImNsYXNzXCIsIFwiYmVuY2htYXJrX3BhdGhcIik7XG4gICAgXG4gIGRvdHMuYXR0cihcImRcIiwgc3ltYm9sLnR5cGUoZnVuY3Rpb24oKXtyZXR1cm4gZDMuc3ltYm9sU3F1YXJlfSkpXG4gICAgICAuYXR0cihcImlkXCIsIGZ1bmN0aW9uIChkKSB7ICByZXR1cm4gZGl2aWQrXCJfX19cIitkLnRvb2xuYW1lLnJlcGxhY2UoL1tcXC4gKCkvLV0vZywgXCJfXCIpO30pXG4gICAgICAuYXR0cihcImNsYXNzXCIsXCJsaW5lXCIpXG4gICAgICAuYXR0cigndHJhbnNmb3JtJyxmdW5jdGlvbihkKXsgcmV0dXJuIFwidHJhbnNsYXRlKFwiK3hTY2FsZShkLngpK1wiLFwiK3lTY2FsZShkLnkpK1wiKVwiOyB9KVxuICAgICAgLmF0dHIoXCJyXCIsIDYpXG4gICAgICAuc3R5bGUoXCJmaWxsXCIsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgcmV0dXJuIGNvbG9yKGNWYWx1ZShkKSk7XG4gICAgICB9KVxuICAgICAgLm9uKFwibW91c2VvdmVyXCIsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgLy8gc2hvdyB0b29sdGlwIG9ubHkgaWYgdGhlIHRvb2wgaXMgdmlzaWJsZVxuICAgICAgICBsZXQgSUQgPSBkaXZpZCtcIl9fX1wiK2QudG9vbG5hbWUucmVwbGFjZSgvW1xcLiAoKS8tXS9nLCBcIl9cIik7XG4gICAgICAgIGlmIChkMy5zZWxlY3QoXCIjXCIrSUQpLnN0eWxlKFwib3BhY2l0eVwiKSA9PSAxKSB7XG4gICAgICAgICAgZGl2LnRyYW5zaXRpb24oKVx0XHRcbiAgICAgICAgICAgICAgLmR1cmF0aW9uKDEwMClcdFx0XG4gICAgICAgICAgICAgIC5zdHlsZShcIm9wYWNpdHlcIiwgLjkpO1x0XHRcbiAgICAgICAgICBkaXYuaHRtbChkLnRvb2xuYW1lICsgXCI8YnIvPlwiICArIGZvcm1hdENvbW1hKGQueCkgKyBcIjxici8+XCIgICsgZm9ybWF0RGVjaW1hbChkLnkpKVx0XG4gICAgICAgICAgICAgIC5zdHlsZShcImxlZnRcIiwgKGQzLmV2ZW50LnBhZ2VYKSArIFwicHhcIilcdFx0XG4gICAgICAgICAgICAgIC5zdHlsZShcInRvcFwiLCAoZDMuZXZlbnQucGFnZVkpICsgXCJweFwiKTtcbiAgICAgICAgfVxuICAgICAgfSlcdFx0XHRcdFx0XG4gICAgICAub24oXCJtb3VzZW91dFwiLCBmdW5jdGlvbihkKSB7XHRcdFxuICAgICAgICBkaXYudHJhbnNpdGlvbigpXHRcdFxuICAgICAgICAgIC5kdXJhdGlvbigxNTAwKVx0XHRcbiAgICAgICAgICAuc3R5bGUoXCJvcGFjaXR5XCIsIDApO1x0XG4gICAgICB9KTtcbiAgICBcbn07XG5cbmZ1bmN0aW9uIGRyYXdfbGVnZW5kIChkYXRhLCBzdmcsIHhTY2FsZSwgeVNjYWxlLCBkaXYsIHdpZHRoLCBoZWlnaHQsIHJlbW92ZWRfdG9vbHMsIGNvbG9yLCBjb2xvcl9kb21haW4sIG1hcmdpbixkaXZpZCxjbGFzc2lmaWNhdGlvbl90eXBlKSB7XG5cbiAgLy9zZXQgbnVtYmVyIG9mIGVsZW1lbnRzIHBlciBsZWdlbmQgcm93XG4gIGxldCBuID0gNTtcblxuICBsZXQgbGVnZW5kID0gc3ZnLnNlbGVjdEFsbChcIi5sZWdlbmRcIilcbiAgICAuZGF0YShjb2xvcl9kb21haW4pXG4gICAgLmVudGVyKCkuYXBwZW5kKFwiZ1wiKVxuICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJsZWdlbmRcIilcbiAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbihkLCBpKSB7IHJldHVybiBcInRyYW5zbGF0ZShcIiArICgtd2lkdGgraSVuKjIwMCkgKyBcIixcIiArIChoZWlnaHQgKyA0MCArIE1hdGguZmxvb3IoaS9uKSAqIDIwKSArIFwiKVwiOyB9KTtcbiAgXG4gIC8vIGRyYXcgbGVnZW5kIGNvbG9yZWQgcmVjdGFuZ2xlc1xuICBsZWdlbmQuYXBwZW5kKFwicmVjdFwiKVxuICAgICAgICAuYXR0cihcInhcIiwgd2lkdGggKyAxOClcbiAgICAgICAgLmF0dHIoXCJ3aWR0aFwiLCAxOClcbiAgICAgICAgLmF0dHIoXCJoZWlnaHRcIiwgMTgpXG4gICAgICAgIC5zdHlsZShcImZpbGxcIiwgY29sb3IpXG4gICAgICAgIC5vbignY2xpY2snLCBmdW5jdGlvbihkKSB7XG5cbiAgICAgICAgICBsZXQgZG90ID0gZDMuc2VsZWN0KFwidGV4dCNcIiArZGl2aWQrXCJfX19cIitkLnJlcGxhY2UoL1tcXC4gKCkvLV0vZywgXCJfXCIpKTtcbiAgICAgICAgICBsZXQgSUQgPSBkb3QuX2dyb3Vwc1swXVswXS5pZDtcblxuICAgICAgICAgIGlmKGRhdGEubGVuZ3RoLXJlbW92ZWRfdG9vbHMubGVuZ3RoLTEgPj0gNCl7XG5cbiAgICAgICAgICAgIGxldCBsZWdlbmRfcmVjdCA9IHRoaXM7XG4gICAgICAgICAgICBzaG93X29yX2hpZGVfcGFydGljaXBhbnRfaW5fcGxvdCAoSUQsIGRhdGEsIHN2ZywgeFNjYWxlLCB5U2NhbGUsIGRpdiwgd2lkdGgsIGhlaWdodCwgcmVtb3ZlZF90b29scyxkaXZpZCxjbGFzc2lmaWNhdGlvbl90eXBlLCBsZWdlbmRfcmVjdCk7XG5cbiAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEubGVuZ3RoLXJlbW92ZWRfdG9vbHMubGVuZ3RoLTEgPCA0ICYmIChkMy5zZWxlY3QoXCIjXCIrSUQpLnN0eWxlKFwib3BhY2l0eVwiKSkgPT0gMCl7XG5cbiAgICAgICAgICAgIGxldCBsZWdlbmRfcmVjdCA9IHRoaXM7XG4gICAgICAgICAgICBzaG93X29yX2hpZGVfcGFydGljaXBhbnRfaW5fcGxvdCAoSUQsIGRhdGEsIHN2ZywgeFNjYWxlLCB5U2NhbGUsIGRpdiwgd2lkdGgsIGhlaWdodCwgcmVtb3ZlZF90b29scyxkaXZpZCxjbGFzc2lmaWNhdGlvbl90eXBlLCBsZWdlbmRfcmVjdCk7XG5cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAkKCcucmVtb3ZhbF9hbGVydCcpLnJlbW92ZSgpO1xuICAgICAgICAgICAgdmFyIGFsZXJ0X21zZyA9ICQoJzxkaXYgY2xhc3M9XCJyZW1vdmFsX2FsZXJ0XCI+XFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJjbG9zZWJ0blwiIG9uY2xpY2s9XCIodGhpcy5wYXJlbnROb2RlLnJlbW92ZSgpKTtcIj4mdGltZXM7PC9zcGFuPlxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0IGxlYXN0IGZvdXIgcGFydGljaXBhbnRzIGFyZSByZXF1aXJlZCBmb3IgdGhlIGJlbmNobWFyayEhXFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PicpO1xuICAgICAgICAgICAgJChcIiNcIiArIGRpdmlkKS5hcHBlbmQoYWxlcnRfbXNnKTtcblxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICAgICAgICBpZiAoJCgnLnJlbW92YWxfYWxlcnQnKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgJCgnLnJlbW92YWxfYWxlcnQnKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgNTAwMClcblxuICAgICAgICAgIH07XG5cbiAgICAgICAgfSk7XG5cbiAgLy8gZHJhdyBsZWdlbmQgdGV4dFxuICBsZWdlbmQuYXBwZW5kKFwidGV4dFwiKVxuICAgICAgICAuYXR0cihcInhcIiwgd2lkdGggKyA0MClcbiAgICAgICAgLmF0dHIoXCJ5XCIsIDkpXG4gICAgICAgIC5hdHRyKFwiaWRcIiwgZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGRpdmlkK1wiX19fXCIrZC5yZXBsYWNlKC9bXFwuICgpLy1dL2csIFwiX1wiKTt9KVxuICAgICAgICAuYXR0cihcImR5XCIsIFwiLjM1ZW1cIilcbiAgICAgICAgLnN0eWxlKFwidGV4dC1hbmNob3JcIiwgXCJzdGFydFwiKVxuICAgICAgICAudGV4dChmdW5jdGlvbihkKSB7XG4gICAgICAgICAgcmV0dXJuIGQ7XG4gICAgICAgIH0pO1xuXG59O1xuXG5mdW5jdGlvbiBzaG93X29yX2hpZGVfcGFydGljaXBhbnRfaW5fcGxvdCAoSUQsIGRhdGEsIHN2ZywgeFNjYWxlLCB5U2NhbGUsIGRpdiwgd2lkdGgsIGhlaWdodCwgcmVtb3ZlZF90b29scyxkaXZpZCxjbGFzc2lmaWNhdGlvbl90eXBlLCBsZWdlbmRfcmVjdCl7XG5cbiAgIGxldCB0b29sX2lkID1JRC5zcGxpdChcIl9fX1wiKVsxXTtcbiAgLy8gcmVtb3ZlIHRoZSBleGlzdGluZyBudW1iZXIgYW5kIGNsYXNzaWZpY2F0aW9uIGxpbmVzIGZyb20gcGxvdCAoaWYgYW55KVxuICBzdmcuc2VsZWN0QWxsKFwiI1wiK2RpdmlkK1wiX19feF9xdWFydGlsZVwiKS5yZW1vdmUoKTtcbiAgc3ZnLnNlbGVjdEFsbChcIiNcIitkaXZpZCtcIl9fX3lfcXVhcnRpbGVcIikucmVtb3ZlKCk7XG4gIHN2Zy5zZWxlY3RBbGwoXCIjXCIrZGl2aWQrXCJfX19kaWFnX3F1YXJ0aWxlXzBcIikucmVtb3ZlKCk7XG4gIHN2Zy5zZWxlY3RBbGwoXCIjXCIrZGl2aWQrXCJfX19kaWFnX3F1YXJ0aWxlXzFcIikucmVtb3ZlKCk7XG4gIHN2Zy5zZWxlY3RBbGwoXCIjXCIrZGl2aWQrXCJfX19kaWFnX3F1YXJ0aWxlXzJcIikucmVtb3ZlKCk7XG4gIHN2Zy5zZWxlY3RBbGwoXCIjXCIrZGl2aWQrXCJfX19udW1fYm90dG9tX3JpZ2h0XCIpLnJlbW92ZSgpO1xuICBzdmcuc2VsZWN0QWxsKFwiI1wiK2RpdmlkK1wiX19fbnVtX3RvcF9yaWdodFwiKS5yZW1vdmUoKTtcbiAgc3ZnLnNlbGVjdEFsbChcIiNcIitkaXZpZCtcIl9fX251bV9ib3R0b21fbGVmdFwiKS5yZW1vdmUoKTtcbiAgc3ZnLnNlbGVjdEFsbChcIiNcIitkaXZpZCtcIl9fX251bV90b3BfbGVmdFwiKS5yZW1vdmUoKTtcbiAgXG5cbiAgbGV0IGJsb2Nrb3BhY2l0eSA9IGQzLnNlbGVjdChcIiNcIitJRCkuc3R5bGUoXCJvcGFjaXR5XCIpO1xuICBcbiAgLy8gY2hhbmdlIHRoZSBvcGFjaXR5IHRvIDAgb3IgMSBkZXBlbmRpbmcgb24gdGhlIGN1cnJlbnQgc3RhdGVcbiAgaWYgKGJsb2Nrb3BhY2l0eSA9PSAwKSB7XG4gICAgZDMuc2VsZWN0KFwiI1wiK0lEKS5zdHlsZShcIm9wYWNpdHlcIiwgMSk7XG4gICAgZDMuc2VsZWN0KFwiI1wiK2RpdmlkK1wiX19fdG9wXCIrdG9vbF9pZCkuc3R5bGUoXCJvcGFjaXR5XCIsIDEpO1xuICAgIGQzLnNlbGVjdChcIiNcIitkaXZpZCtcIl9fX2JvdHRvbVwiK3Rvb2xfaWQpLnN0eWxlKFwib3BhY2l0eVwiLCAxKTtcbiAgICBkMy5zZWxlY3QoXCIjXCIrZGl2aWQrXCJfX19saW5lXCIrdG9vbF9pZCkuc3R5bGUoXCJvcGFjaXR5XCIsIDEpO1xuICAgIC8vIHJlY2FsY3VsYXRlIHRoZSBxdWFydGlsZXMgYWZ0ZXIgcmVtb3ZpbmcgdGhlIHRvb2xzXG4gICAgbGV0IGluZGV4ID0gJC5pbkFycmF5KHRvb2xfaWQucmVwbGFjZSgvXy9nLCBcIi1cIiksIHJlbW92ZWRfdG9vbHMpO1xuICAgIHJlbW92ZWRfdG9vbHMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICBjb21wdXRlX2NsYXNzaWZpY2F0aW9uKGRhdGEsIHN2ZywgeFNjYWxlLCB5U2NhbGUsIGRpdiwgd2lkdGgsIGhlaWdodCwgcmVtb3ZlZF90b29scyxkaXZpZCxjbGFzc2lmaWNhdGlvbl90eXBlKTtcbiAgICAvL2NoYW5nZSB0aGUgbGVnZW5kIG9wYWNpdHkgdG8ga2VlcCB0cmFjayBvZiBoaWRkZW4gdG9vbHNcbiAgICBkMy5zZWxlY3QobGVnZW5kX3JlY3QpLnN0eWxlKFwib3BhY2l0eVwiLCAxKTtcbiAgICBkMy5zZWxlY3QoXCJ0ZXh0I1wiICtkaXZpZCtcIl9fX1wiK3Rvb2xfaWQpLnN0eWxlKFwib3BhY2l0eVwiLCAxKTtcblxuICB9IGVsc2Uge1xuICAgIGQzLnNlbGVjdChcIiNcIitJRCkuc3R5bGUoXCJvcGFjaXR5XCIsIDApO1xuICAgIGQzLnNlbGVjdChcIiNcIitkaXZpZCtcIl9fX3RvcFwiK3Rvb2xfaWQpLnN0eWxlKFwib3BhY2l0eVwiLCAwKTtcbiAgICBkMy5zZWxlY3QoXCIjXCIrZGl2aWQrXCJfX19ib3R0b21cIit0b29sX2lkKS5zdHlsZShcIm9wYWNpdHlcIiwgMCk7XG4gICAgZDMuc2VsZWN0KFwiI1wiK2RpdmlkK1wiX19fbGluZVwiK3Rvb2xfaWQpLnN0eWxlKFwib3BhY2l0eVwiLCAwKTtcbiAgICByZW1vdmVkX3Rvb2xzLnB1c2godG9vbF9pZC5yZXBsYWNlKC9fL2csIFwiLVwiKSk7XG4gICAgY29tcHV0ZV9jbGFzc2lmaWNhdGlvbihkYXRhLCBzdmcsIHhTY2FsZSwgeVNjYWxlLCBkaXYsIHdpZHRoLCBoZWlnaHQsIHJlbW92ZWRfdG9vbHMsZGl2aWQsY2xhc3NpZmljYXRpb25fdHlwZSk7XG4gICAgLy9jaGFuZ2UgdGhlIGxlZ2VuZCBvcGFjaXR5IHRvIGtlZXAgdHJhY2sgb2YgaGlkZGVuIHRvb2xzXG4gICAgZDMuc2VsZWN0KGxlZ2VuZF9yZWN0KS5zdHlsZShcIm9wYWNpdHlcIiwgMC4yKTtcbiAgICBkMy5zZWxlY3QoXCJ0ZXh0I1wiICtkaXZpZCtcIl9fX1wiK3Rvb2xfaWQpLnN0eWxlKFwib3BhY2l0eVwiLCAwLjIpO1xuICB9XG5cbn07XG5cbmZ1bmN0aW9uIGdldF9zcXVhcmVfcXVhcnRpbGVzKGRhdGEsIHN2ZywgeFNjYWxlLCB5U2NhbGUsIGRpdiwgcmVtb3ZlZF90b29scyxiZXR0ZXIsIGRpdmlkLCB0cmFuc2Zvcm1fdG9fdGFibGUpIHtcbiAgXG4gIGxldCB0b29sc19ub3RfaGlkZGVuID0gcmVtb3ZlX2hpZGRlbl90b29scyhkYXRhLCByZW1vdmVkX3Rvb2xzKTtcblxuICAvLyBjb21wdXRlIHRoZSBxdWFydGlsZXMgb3ZlciB0aGUgbmV3IHNlZXQgb2YgZGF0YVxuICBsZXQgeF92YWx1ZXMgPSB0b29sc19ub3RfaGlkZGVuLm1hcChhID0+IGEueCkuc29ydChmdW5jdGlvbihhLCBiKXtyZXR1cm4gYSAtIGJ9KTtcbiAgbGV0IHlfdmFsdWVzID0gdG9vbHNfbm90X2hpZGRlbi5tYXAoYSA9PiBhLnkpLnNvcnQoZnVuY3Rpb24oYSwgYil7cmV0dXJuIGEgLSBifSk7XG5cbiAgbGV0IHF1YW50aWxlX3ggPSBkMy5xdWFudGlsZSh4X3ZhbHVlcywgMC41KTtcbiAgbGV0IHF1YW50aWxlX3kgPSBkMy5xdWFudGlsZSh5X3ZhbHVlcywgMC41KTtcblxuICBsZXQgeF9heGlzID0geFNjYWxlLmRvbWFpbigpO1xuICBsZXQgeV9heGlzID0geVNjYWxlLmRvbWFpbigpO1xuXG4gIGxldCBmb3JtYXRDb21tYSA9IGQzLmZvcm1hdChcIixcIik7XG5cbiAgc3ZnLmFwcGVuZChcImxpbmVcIilcbiAgICAuYXR0cihcIngxXCIsIHhTY2FsZShxdWFudGlsZV94KSlcbiAgICAuYXR0cihcInkxXCIsIHlTY2FsZSh5X2F4aXNbMF0pKVxuICAgIC5hdHRyKFwieDJcIiwgeFNjYWxlKHF1YW50aWxlX3gpKVxuICAgIC5hdHRyKFwieTJcIiwgeVNjYWxlKHlfYXhpc1sxXSkpXG4gICAgLmF0dHIoXCJpZFwiLCBmdW5jdGlvbiAoZCkgeyByZXR1cm4gZGl2aWQrXCJfX194X3F1YXJ0aWxlXCI7fSlcbiAgICAuYXR0cihcInN0cm9rZVwiLCBcIiMwQTU4QTJcIilcbiAgICAuYXR0cihcInN0cm9rZS13aWR0aFwiLDMpXG4gICAgLnN0eWxlKFwic3Ryb2tlLWRhc2hhcnJheVwiLCAoXCIyMCwgNVwiKSlcbiAgICAuc3R5bGUoXCJvcGFjaXR5XCIsIDAuNClcbiAgICAub24oXCJtb3VzZW92ZXJcIiwgZnVuY3Rpb24oZCkge1x0XG4gICAgICBkaXYudHJhbnNpdGlvbigpXHRcdFxuICAgICAgICAgLmR1cmF0aW9uKDEwMClcdFx0XG4gICAgICAgICAuc3R5bGUoXCJvcGFjaXR5XCIsIC45KTtcdFx0XG4gICAgICBkaXYuaHRtbChcIlggcXVhcnRpbGUgPSBcIiArIGZvcm1hdENvbW1hKCBxdWFudGlsZV94KSApXHRcbiAgICAgICAgIC5zdHlsZShcImxlZnRcIiwgKGQzLmV2ZW50LnBhZ2VYKSArIFwicHhcIilcdFx0XG4gICAgICAgICAuc3R5bGUoXCJ0b3BcIiwgKGQzLmV2ZW50LnBhZ2VZKSArIFwicHhcIik7XG4gICAgfSlcdFx0XHRcdFx0XG4gICAgLm9uKFwibW91c2VvdXRcIiwgZnVuY3Rpb24oZCkge1x0XHRcbiAgICAgIGRpdi50cmFuc2l0aW9uKClcdFx0XG4gICAgICAgICAuZHVyYXRpb24oMTAwMClcdFx0XG4gICAgICAgICAuc3R5bGUoXCJvcGFjaXR5XCIsIDApO1x0XG4gICAgfSk7XG5cbiAgc3ZnLmFwcGVuZChcImxpbmVcIilcbiAgICAuYXR0cihcIngxXCIsIHhTY2FsZSh4X2F4aXNbMF0pKVxuICAgIC5hdHRyKFwieTFcIiwgeVNjYWxlKHF1YW50aWxlX3kpKVxuICAgIC5hdHRyKFwieDJcIiwgeFNjYWxlKHhfYXhpc1sxXSkpXG4gICAgLmF0dHIoXCJ5MlwiLCB5U2NhbGUocXVhbnRpbGVfeSkpXG4gICAgLmF0dHIoXCJpZFwiLCBmdW5jdGlvbiAoZCkgeyByZXR1cm4gZGl2aWQrXCJfX195X3F1YXJ0aWxlXCI7fSlcbiAgICAuYXR0cihcInN0cm9rZVwiLCBcIiMwQTU4QTJcIilcbiAgICAuYXR0cihcInN0cm9rZS13aWR0aFwiLDMpXG4gICAgLnN0eWxlKFwic3Ryb2tlLWRhc2hhcnJheVwiLCAoXCIyMCwgNVwiKSlcbiAgICAuc3R5bGUoXCJvcGFjaXR5XCIsIDAuNClcbiAgICAub24oXCJtb3VzZW92ZXJcIiwgZnVuY3Rpb24oZCkge1x0XG4gICAgICBkaXYudHJhbnNpdGlvbigpXHRcdFxuICAgICAgICAgLmR1cmF0aW9uKDEwMClcdFx0XG4gICAgICAgICAuc3R5bGUoXCJvcGFjaXR5XCIsIC45KTtcdFx0XG4gICAgICBkaXZcdC5odG1sKFwiWSBxdWFydGlsZSA9IFwiICsgZm9ybWF0Q29tbWEocXVhbnRpbGVfeSkgKVx0XG4gICAgICAgICAgLnN0eWxlKFwibGVmdFwiLCAoZDMuZXZlbnQucGFnZVgpICsgXCJweFwiKVx0XHRcbiAgICAgICAgICAuc3R5bGUoXCJ0b3BcIiwgKGQzLmV2ZW50LnBhZ2VZKSArIFwicHhcIik7XG4gICAgfSlcdFx0XHRcdFx0XG4gICAgLm9uKFwibW91c2VvdXRcIiwgZnVuY3Rpb24oZCkge1x0XHRcbiAgICAgIGRpdi50cmFuc2l0aW9uKClcdFx0XG4gICAgICAgICAuZHVyYXRpb24oMTUwMClcdFx0XG4gICAgICAgICAuc3R5bGUoXCJvcGFjaXR5XCIsIDApO1x0XG4gICAgfSk7XG5cbiAgICAvL3RoZSB0cmFuZm9ybWF0aW9uIHRvIHRhYnVsYXIgZm9ybWF0IGlzIGRvbmUgb25seSBpZiB0aGVyZSBhcmUgYW55IHRhYmxlIGVsZW1lbnRzIGluIHRoZSBodG1sIGZpbGVcbiAgICBpZiAodHJhbnNmb3JtX3RvX3RhYmxlID09IHRydWUpIHtcbiAgICAgIHRyYW5zZm9ybV9zcXJfY2xhc3NpZl90b190YWJsZShiZXR0ZXIsIHRvb2xzX25vdF9oaWRkZW4sIHF1YW50aWxlX3gsIHF1YW50aWxlX3ksIGRpdmlkKTtcbiAgICB9O1xuICAgIFxufTtcblxuZnVuY3Rpb24gdHJhbnNmb3JtX3Nxcl9jbGFzc2lmX3RvX3RhYmxlKGJldHRlciwgZGF0YSwgcXVhbnRpbGVfeCwgcXVhbnRpbGVfeSwgZGl2aWQpe1xuICBpZiAoYmV0dGVyID09IFwiYm90dG9tLXJpZ2h0XCIpe1xuICAgIGRhdGEuZm9yRWFjaChmdW5jdGlvbihlbGVtZW50KSB7XG4gICAgICAgIGlmIChlbGVtZW50Wyd4J10gPj0gcXVhbnRpbGVfeCAmJiBlbGVtZW50Wyd5J10gPD0gcXVhbnRpbGVfeSl7XG4gICAgICAgICAgICAgIGVsZW1lbnRbJ3F1YXJ0aWxlJ10gPSAxO1xuICAgICAgICB9ZWxzZSBpZiAoZWxlbWVudFsneCddID49IHF1YW50aWxlX3ggJiYgZWxlbWVudFsneSddID4gcXVhbnRpbGVfeSl7XG4gICAgICAgICAgICAgIGVsZW1lbnRbJ3F1YXJ0aWxlJ10gPSAzO1xuICAgICAgICB9ZWxzZSBpZiAoZWxlbWVudFsneCddIDwgcXVhbnRpbGVfeCAmJiBlbGVtZW50Wyd5J10gPiBxdWFudGlsZV95KXtcbiAgICAgICAgICAgICAgZWxlbWVudFsncXVhcnRpbGUnXSA9IDQ7XG4gICAgICAgIH1lbHNlIGlmIChlbGVtZW50Wyd4J10gPCBxdWFudGlsZV94ICYmIGVsZW1lbnRbJ3knXSA8PSBxdWFudGlsZV95KXtcbiAgICAgICAgICAgICAgZWxlbWVudFsncXVhcnRpbGUnXSA9IDI7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgfSBlbHNlIGlmIChiZXR0ZXIgPT0gXCJ0b3AtcmlnaHRcIil7XG4gICAgICBkYXRhLmZvckVhY2goZnVuY3Rpb24oZWxlbWVudCkge1xuICAgICAgICBpZiAoZWxlbWVudFsneCddID49IHF1YW50aWxlX3ggJiYgZWxlbWVudFsneSddIDwgcXVhbnRpbGVfeSl7XG4gICAgICAgICAgICAgIGVsZW1lbnRbJ3F1YXJ0aWxlJ10gPSAzO1xuICAgICAgICB9ZWxzZSBpZiAoZWxlbWVudFsneCddID49IHF1YW50aWxlX3ggJiYgZWxlbWVudFsneSddID49IHF1YW50aWxlX3kpe1xuICAgICAgICAgICAgICBlbGVtZW50WydxdWFydGlsZSddID0gMTtcbiAgICAgICAgfWVsc2UgaWYgKGVsZW1lbnRbJ3gnXSA8IHF1YW50aWxlX3ggJiYgZWxlbWVudFsneSddID49IHF1YW50aWxlX3kpe1xuICAgICAgICAgICAgICBlbGVtZW50WydxdWFydGlsZSddID0gMjtcbiAgICAgICAgfWVsc2UgaWYgKGVsZW1lbnRbJ3gnXSA8IHF1YW50aWxlX3ggJiYgZWxlbWVudFsneSddIDwgcXVhbnRpbGVfeSl7XG4gICAgICAgICAgICAgIGVsZW1lbnRbJ3F1YXJ0aWxlJ10gPSA0O1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgfTtcblxuICBmaWxsX2luX3RhYmxlIChkaXZpZCwgZGF0YSk7XG4gIHNldF9jZWxsX2NvbG9ycygpO1xuXG59O1xuXG5cbmZ1bmN0aW9uIGFwcGVuZF9xdWFydGlsZV9udW1iZXJzX3RvX3Bsb3QgKHN2ZywgeFNjYWxlLCB5U2NhbGUsIGJldHRlcixkaXZpZCl7XG5cbiAgbGV0IHhfYXhpcyA9IHhTY2FsZS5kb21haW4oKTtcbiAgbGV0IHlfYXhpcyA9IHlTY2FsZS5kb21haW4oKTtcblxuICBsZXQgbnVtX2JvdHRvbV9yaWdodCxudW1fYm90dG9tX2xlZnQsbnVtX3RvcF9yaWdodCxudW1fdG9wX2xlZnQ7XG4gIC8vIGFwcGVuZCBxdWFydGlsZSBudW1iZXJzIHRvIHBsb3RcbiAgaWYgKGJldHRlciA9PSBcImJvdHRvbS1yaWdodFwiKXtcbiAgICAgbnVtX2JvdHRvbV9yaWdodCA9IFwiMVwiO1xuICAgICBudW1fYm90dG9tX2xlZnQgPSBcIjJcIjtcbiAgICAgbnVtX3RvcF9yaWdodCA9IFwiM1wiO1xuICAgICBudW1fdG9wX2xlZnQgPSBcIjRcIjtcbiAgfSBcbiAgZWxzZSBpZiAoYmV0dGVyID09IFwidG9wLXJpZ2h0XCIpe1xuICAgICBudW1fYm90dG9tX3JpZ2h0ID0gXCIzXCI7XG4gICAgIG51bV9ib3R0b21fbGVmdCA9IFwiNFwiO1xuICAgICBudW1fdG9wX3JpZ2h0ID0gXCIxXCI7XG4gICAgIG51bV90b3BfbGVmdCA9IFwiMlwiO1xuICB9O1xuXG4gIFxuICBzdmcuYXBwZW5kKFwidGV4dFwiKVxuICAuYXR0cihcImlkXCIsIGZ1bmN0aW9uIChkKSB7IHJldHVybiBkaXZpZCtcIl9fX251bV9ib3R0b21fcmlnaHRcIjt9KVxuICAuYXR0cihcInhcIiwgeFNjYWxlKHhfYXhpc1sxXS0oMC4wNSooeF9heGlzWzFdLXhfYXhpc1swXSkpKSlcbiAgLmF0dHIoXCJ5XCIsIHlTY2FsZSh5X2F4aXNbMV0tKDAuOTcqKHlfYXhpc1sxXS15X2F4aXNbMF0pKSkpXG4gIC5zdHlsZShcIm9wYWNpdHlcIiwgMC40KVxuICAuc3R5bGUoXCJmb250LXNpemVcIiwgXCI0MHB4XCIpXG4gIC5zdHlsZShcImZpbGxcIiwgXCIjMEE1OEEyXCIpXG4gIC50ZXh0KG51bV9ib3R0b21fcmlnaHQpO1xuXG4gIHN2Zy5hcHBlbmQoXCJ0ZXh0XCIpXG4gIC5hdHRyKFwiaWRcIiwgZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGRpdmlkK1wiX19fbnVtX2JvdHRvbV9sZWZ0XCI7fSlcbiAgLmF0dHIoXCJ4XCIsIHhTY2FsZSh4X2F4aXNbMV0tKDAuOTUqKHhfYXhpc1sxXS14X2F4aXNbMF0pKSkpXG4gIC5hdHRyKFwieVwiLCB5U2NhbGUoeV9heGlzWzFdLSgwLjk3Kih5X2F4aXNbMV0teV9heGlzWzBdKSkpKVxuICAuc3R5bGUoXCJvcGFjaXR5XCIsIDAuNClcbiAgLnN0eWxlKFwiZm9udC1zaXplXCIsIFwiNDBweFwiKVxuICAuc3R5bGUoXCJmaWxsXCIsIFwiIzBBNThBMlwiKVxuICAudGV4dChudW1fYm90dG9tX2xlZnQpO1xuXG4gIHN2Zy5hcHBlbmQoXCJ0ZXh0XCIpXG4gIC5hdHRyKFwiaWRcIiwgZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGRpdmlkK1wiX19fbnVtX3RvcF9yaWdodFwiO30pXG4gIC5hdHRyKFwieFwiLCB4U2NhbGUoeF9heGlzWzFdLSgwLjA1Kih4X2F4aXNbMV0teF9heGlzWzBdKSkpKVxuICAuYXR0cihcInlcIiwgeVNjYWxlKHlfYXhpc1sxXS0oMC4xKih5X2F4aXNbMV0teV9heGlzWzBdKSkpKVxuICAuc3R5bGUoXCJvcGFjaXR5XCIsIDAuNClcbiAgLnN0eWxlKFwiZm9udC1zaXplXCIsIFwiNDBweFwiKVxuICAuc3R5bGUoXCJmaWxsXCIsIFwiIzBBNThBMlwiKVxuICAudGV4dChudW1fdG9wX3JpZ2h0KTtcblxuICBzdmcuYXBwZW5kKFwidGV4dFwiKVxuICAuYXR0cihcImlkXCIsIGZ1bmN0aW9uIChkKSB7IHJldHVybiBkaXZpZCtcIl9fX251bV90b3BfbGVmdFwiO30pXG4gIC5hdHRyKFwieFwiLCB4U2NhbGUoeF9heGlzWzFdLSgwLjk1Kih4X2F4aXNbMV0teF9heGlzWzBdKSkpKVxuICAuYXR0cihcInlcIiwgeVNjYWxlKHlfYXhpc1sxXS0oMC4xKih5X2F4aXNbMV0teV9heGlzWzBdKSkpKVxuICAuc3R5bGUoXCJvcGFjaXR5XCIsIDAuNClcbiAgLnN0eWxlKFwiZm9udC1zaXplXCIsIFwiNDBweFwiKVxuICAuc3R5bGUoXCJmaWxsXCIsIFwiIzBBNThBMlwiKVxuICAudGV4dChudW1fdG9wX2xlZnQpO1xuXG59XG5mdW5jdGlvbiBnZXRfZGlhZ29uYWxfcXVhcnRpbGVzKGRhdGEsIHN2ZywgeFNjYWxlLCB5U2NhbGUsIGRpdiwgd2lkdGgsIGhlaWdodCwgcmVtb3ZlZF90b29scywgYmV0dGVyLCBkaXZpZCwgdHJhbnNmb3JtX3RvX3RhYmxlKSB7XG5cbiAgbGV0IHRvb2xzX25vdF9oaWRkZW4gPSByZW1vdmVfaGlkZGVuX3Rvb2xzKGRhdGEsIHJlbW92ZWRfdG9vbHMpO1xuXG4gIGxldCB4X3ZhbHVlcyA9IHRvb2xzX25vdF9oaWRkZW4ubWFwKGEgPT4gYS54KTtcbiAgbGV0IHlfdmFsdWVzID0gdG9vbHNfbm90X2hpZGRlbi5tYXAoYSA9PiBhLnkpO1xuXG4gIC8vIGdldCBkaXN0YW5jZSB0byBsb3dlc3Qgc2NvcmUgY29ybmVyXG5cbiAgLy8gbm9ybWFsaXplIGRhdGEgdG8gMC0xIHJhbmdlXG4gIGxldCBub3JtYWxpemVkX3ZhbHVlcyA9IG5vcm1hbGl6ZV9kYXRhKHhfdmFsdWVzLCB5X3ZhbHVlcyk7XG4gIGxldCBbeF9ub3JtLCB5X25vcm1dID0gW25vcm1hbGl6ZWRfdmFsdWVzWzBdLCBub3JtYWxpemVkX3ZhbHVlc1sxXV07XG4gIFxuICBsZXQgbWF4X3ggPSBNYXRoLm1heC5hcHBseShudWxsLCB4X3ZhbHVlcyk7XG4gIGxldCBtYXhfeSA9IE1hdGgubWF4LmFwcGx5KG51bGwsIHlfdmFsdWVzKTtcblxuICAvLyAjIGNvbXB1dGUgdGhlIHNjb3JlcyBmb3IgZWFjaCBvZiB0aGUgdG9vbC4gYmFzZWQgb24gdGhlaXIgZGlzdGFuY2UgdG8gdGhlIHggYW5kIHkgYXhpc1xuICBsZXQgc2NvcmVzID0gW11cbiAgbGV0IHNjb3Jlc19jb29yZHMgPSB7fTsgLy90aGlzIG9iamVjdCB3aWxsIHN0b3JlIHRoZSBzY29yZXMgYW5kIHRoZSBjb29yZGluYXRlc1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHhfbm9ybS5sZW5ndGg7IGkrKykge1xuXG4gICAgaWYgKGJldHRlciA9PSBcImJvdHRvbS1yaWdodFwiKXtcbiAgICAgIHNjb3Jlcy5wdXNoKHhfbm9ybVtpXSArICgxIC0geV9ub3JtW2ldKSk7XG4gICAgICBzY29yZXNfY29vcmRzW3hfbm9ybVtpXSArICgxIC0geV9ub3JtW2ldKV0gPSAgW3hfdmFsdWVzW2ldLCB5X3ZhbHVlc1tpXV07XG4gICAgICAvL2FwcGVuZCB0aGUgc2NvcmUgdG8gdGhlIGRhdGEgYXJyYXlcbiAgICAgIHRvb2xzX25vdF9oaWRkZW5baV1bJ3Njb3JlJ10gPSB4X25vcm1baV0gKyAoMSAtIHlfbm9ybVtpXSk7XG4gICAgfSBcbiAgICBlbHNlIGlmIChiZXR0ZXIgPT0gXCJ0b3AtcmlnaHRcIil7XG4gICAgICBzY29yZXMucHVzaCh4X25vcm1baV0gKyB5X25vcm1baV0pO1xuICAgICAgc2NvcmVzX2Nvb3Jkc1t4X25vcm1baV0gKyB5X25vcm1baV1dID0gW3hfdmFsdWVzW2ldLCB5X3ZhbHVlc1tpXV07XG4gICAgICAvL2FwcGVuZCB0aGUgc2NvcmUgdG8gdGhlIGRhdGEgYXJyYXlcbiAgICAgIHRvb2xzX25vdF9oaWRkZW5baV1bJ3Njb3JlJ10gPSB4X25vcm1baV0gKyB5X25vcm1baV07XG4gICAgfTtcblxuICB9O1xuXG4gIC8vIHNvcnQgdGhlIHNjb3JlcyBhbmQgY29tcHV0ZSBxdWFydGlsZXNcbiAgc2NvcmVzLnNvcnQoZnVuY3Rpb24oYSwgYil7cmV0dXJuIGItYX0pO1xuXG4gIGxldCBmaXJzdF9xdWFydGlsZSA9IGQzLnF1YW50aWxlKHNjb3JlcywgMC4yNSk7XG4gIGxldCBzZWNvbmRfcXVhcnRpbGUgPSBkMy5xdWFudGlsZShzY29yZXMsIDAuNSk7XG4gIGxldCB0aGlyZF9xdWFydGlsZSA9IGQzLnF1YW50aWxlKHNjb3JlcywgMC43NSk7XG5cbiAgLy8gY29tcHV0ZSB0aGUgZGlhZ29uYWwgbGluZSBjb29yZHNcbiAgbGV0IGNvb3JkcyA9IFtnZXRfZGlhZ29uYWxfbGluZShzY29yZXMsIHNjb3Jlc19jb29yZHMsIGZpcnN0X3F1YXJ0aWxlLCBiZXR0ZXIsIG1heF94LCBtYXhfeSxzdmcsIHhTY2FsZSwgeVNjYWxlKSwgXG4gICAgICAgICAgICAgICAgZ2V0X2RpYWdvbmFsX2xpbmUoc2NvcmVzLCBzY29yZXNfY29vcmRzLCBzZWNvbmRfcXVhcnRpbGUsIGJldHRlciwgbWF4X3gsIG1heF95LHN2ZywgeFNjYWxlLCB5U2NhbGUpLCBcbiAgICAgICAgICAgICAgICBnZXRfZGlhZ29uYWxfbGluZShzY29yZXMsIHNjb3Jlc19jb29yZHMsIHRoaXJkX3F1YXJ0aWxlLCBiZXR0ZXIsIG1heF94LCBtYXhfeSxzdmcsIHhTY2FsZSwgeVNjYWxlKVxuICAgICAgICAgICAgICBdO1xuICBcbiAgLy8gYXBwZW5kIHRoZSAzIGxpbmVzIHRvIHRoZSBzdmdcbiAgbGV0IGluZGV4ID0gMDtcblxuICBjb29yZHMuZm9yRWFjaChsaW5lID0+IHtcbiAgICBsZXQgW3hfY29vcmRzLCB5X2Nvb3Jkc10gPSBbbGluZVswXSwgbGluZVsxXV07XG4gICAgc3ZnLmFwcGVuZChcImxpbmVcIilcbiAgICAgICAuYXR0cihcImNsaXAtcGF0aFwiLFwidXJsKCNjbGlwKVwiKVxuICAgICAgIC5hdHRyKFwieDFcIiwgeFNjYWxlKHhfY29vcmRzWzBdKSlcbiAgICAgICAuYXR0cihcInkxXCIsIHlTY2FsZSh5X2Nvb3Jkc1swXSkpXG4gICAgICAgLmF0dHIoXCJ4MlwiLCB4U2NhbGUoeF9jb29yZHNbMV0pKVxuICAgICAgIC5hdHRyKFwieTJcIiwgeVNjYWxlKHlfY29vcmRzWzFdKSkgIFxuICAgICAgIC5hdHRyKFwiaWRcIiwgZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGRpdmlkK1wiX19fZGlhZ19xdWFydGlsZV9cIiArIGluZGV4O30pXG4gICAgICAgLmF0dHIoXCJzdHJva2VcIiwgXCIjMEE1OEEyXCIpXG4gICAgICAgLmF0dHIoXCJzdHJva2Utd2lkdGhcIiwzKVxuICAgICAgIC5zdHlsZShcInN0cm9rZS1kYXNoYXJyYXlcIiwgKFwiMjAsIDVcIikpXG4gICAgICAgLnN0eWxlKFwib3BhY2l0eVwiLCAwLjQpXG5cbiAgICBzdmcuYXBwZW5kKFwiY2xpcFBhdGhcIilcbiAgICAgICAuYXR0cihcImlkXCIsIFwiY2xpcFwiKVxuICAgICAgIC5hcHBlbmQoXCJyZWN0XCIpXG4gICAgICAgLmF0dHIoXCJ3aWR0aFwiLCB3aWR0aClcbiAgICAgICAuYXR0cihcImhlaWdodFwiLCBoZWlnaHQpO1xuXG4gICAgaW5kZXggKz0gMTtcbiAgfSk7XG5cbiAgLy90aGUgdHJhbmZvcm1hdGlvbiB0byB0YWJ1bGFyIGZvcm1hdCBpcyBkb25lIG9ubHkgaWYgdGhlcmUgYXJlIGFueSB0YWJsZSBlbGVtZW50cyBpbiB0aGUgaHRtbCBmaWxlXG4gIGlmICh0cmFuc2Zvcm1fdG9fdGFibGUgPT0gdHJ1ZSkge1xuICAgIHRyYW5zZm9ybV9kaWFnX2NsYXNzaWZfdG9fdGFibGUodG9vbHNfbm90X2hpZGRlbiwgZmlyc3RfcXVhcnRpbGUsIHNlY29uZF9xdWFydGlsZSwgdGhpcmRfcXVhcnRpbGUsIGRpdmlkKTtcbiAgfTtcblxufTtcblxuZnVuY3Rpb24gdHJhbnNmb3JtX2RpYWdfY2xhc3NpZl90b190YWJsZShkYXRhLCBmaXJzdF9xdWFydGlsZSwgc2Vjb25kX3F1YXJ0aWxlLCB0aGlyZF9xdWFydGlsZSwgZGl2aWQpe1xuXG4gIGRhdGEuZm9yRWFjaChmdW5jdGlvbihlbGVtZW50KSB7XG5cbiAgICBpZiAoZWxlbWVudFsnc2NvcmUnXSA+IGZpcnN0X3F1YXJ0aWxlKXtcbiAgICAgICAgICBlbGVtZW50WydxdWFydGlsZSddID0gMTtcbiAgICB9ZWxzZSBpZiAoIGVsZW1lbnRbJ3Njb3JlJ10gPiBzZWNvbmRfcXVhcnRpbGUgJiYgZWxlbWVudFsnc2NvcmUnXSA8PSBmaXJzdF9xdWFydGlsZSl7XG4gICAgICAgICAgZWxlbWVudFsncXVhcnRpbGUnXSA9IDI7XG4gICAgfWVsc2UgaWYgKCBlbGVtZW50WydzY29yZSddID4gdGhpcmRfcXVhcnRpbGUgJiYgZWxlbWVudFsnc2NvcmUnXSA8PSBzZWNvbmRfcXVhcnRpbGUpe1xuICAgICAgICAgIGVsZW1lbnRbJ3F1YXJ0aWxlJ10gPSAzO1xuICAgIH1lbHNlIGlmIChlbGVtZW50WydzY29yZSddIDw9IHRoaXJkX3F1YXJ0aWxlKXtcbiAgICAgICAgICBlbGVtZW50WydxdWFydGlsZSddID0gNDtcbiAgICB9XG4gIH0pO1xuXG4gIGZpbGxfaW5fdGFibGUgKGRpdmlkLCBkYXRhKTtcbiAgc2V0X2NlbGxfY29sb3JzKCk7XG5cbn07XG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZV9kYXRhKHhfdmFsdWVzLCB5X3ZhbHVlcyl7XG5cbiAgbGV0IG1heFggPSBNYXRoLm1heC5hcHBseShudWxsLCB4X3ZhbHVlcyk7XG4gIGxldCBtYXhZID0gTWF0aC5tYXguYXBwbHkobnVsbCwgeV92YWx1ZXMpO1xuICBcbiAgbGV0IHhfbm9ybSA9IHhfdmFsdWVzLm1hcChmdW5jdGlvbihlKSB7ICBcbiAgICByZXR1cm4gZSAvIG1heFg7XG4gIH0pO1xuXG4gIGxldCB5X25vcm0gPSB5X3ZhbHVlcy5tYXAoZnVuY3Rpb24oZSkgeyAgXG4gICAgcmV0dXJuIGUgLyBtYXhZO1xuICB9KTtcblxuICByZXR1cm4gW3hfbm9ybSwgeV9ub3JtXTtcbn07XG5cbmZ1bmN0aW9uIGdldF9kaWFnb25hbF9saW5lKHNjb3Jlcywgc2NvcmVzX2Nvb3JkcywgcXVhcnRpbGUsIGJldHRlciwgbWF4X3gsIG1heF95LHN2ZywgeFNjYWxlLCB5U2NhbGUpe1xuXG4gIGxldCB0YXJnZXQ7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgc2NvcmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgLy8gIyBmaW5kIG91dCB3aGljaCBhcmUgdGhlIHR3byBwb2ludHMgdGhhdCBjb250YWluIHRoZSBwZXJjZW50aWxlIHZhbHVlXG4gICAgXG4gICAgaWYgKHNjb3Jlc1tpXSA8PSBxdWFydGlsZSl7XG4gICAgICAgIHRhcmdldCA9IFtbc2NvcmVzX2Nvb3Jkc1tzY29yZXNbaSAtIDFdXVswXSwgc2NvcmVzX2Nvb3Jkc1tzY29yZXNbaSAtIDFdXVsxXV0sXG4gICAgICAgICAgICAgICAgICBbc2NvcmVzX2Nvb3Jkc1tzY29yZXNbaV1dWzBdLCBzY29yZXNfY29vcmRzW3Njb3Jlc1tpXV1bMV1dXTtcbiAgICAgICAgYnJlYWs7XG4gICAgfTtcbiAgfTtcbiAgLy8gIyBnZXQgdGhlIHRoZSBtaWQgcG9pbnQgYmV0d2VlbiB0aGUgdHdvLCB3aGVyZSB0aGUgcXVhcnRpbGUgbGluZSB3aWxsIHBhc3NcbiAgbGV0IGhhbGZfcG9pbnQgPSBbKHRhcmdldFswXVswXSArIHRhcmdldFsxXVswXSkgLyAyLCAodGFyZ2V0WzBdWzFdICsgdGFyZ2V0WzFdWzFdKSAvIDJdO1xuXG4gIC8vICMgZHJhdyB0aGUgbGluZSBkZXBlbmRpbmcgb24gd2hpY2ggaXMgdGhlIG9wdGltYWwgY29ybmVyXG4gIGxldCB4X2Nvb3JkcztcbiAgbGV0IHlfY29vcmRzO1xuICBpZiAoYmV0dGVyID09IFwiYm90dG9tLXJpZ2h0XCIpe1xuICAgICAgIHhfY29vcmRzID0gW2hhbGZfcG9pbnRbMF0gLSBtYXhfeCwgaGFsZl9wb2ludFswXSArIG1heF94XTtcbiAgICAgICB5X2Nvb3JkcyA9IFtoYWxmX3BvaW50WzFdIC0gbWF4X3ksIGhhbGZfcG9pbnRbMV0gKyBtYXhfeV07XG4gIH0gZWxzZSBpZiAoYmV0dGVyID09IFwidG9wLXJpZ2h0XCIpe1xuICAgICAgIHhfY29vcmRzID0gW2hhbGZfcG9pbnRbMF0gKyBtYXhfeCwgaGFsZl9wb2ludFswXSAtIG1heF94XTtcbiAgICAgICB5X2Nvb3JkcyA9IFtoYWxmX3BvaW50WzFdIC0gbWF4X3ksIGhhbGZfcG9pbnRbMV0gKyBtYXhfeV07ICAgXG4gIH07XG5cbiAgcmV0dXJuIFt4X2Nvb3JkcywgeV9jb29yZHNdO1xufTtcblxuZnVuY3Rpb24gcmVtb3ZlX2hpZGRlbl90b29scyhkYXRhLCByZW1vdmVkX3Rvb2xzKXtcbiAgLy8gcmVtb3ZlIGZyb20gdGhlIGRhdGEgYXJyYXkgdGhlIHBhcnRpY2lwYW50cyB0aGF0IHRoZSB1c2VyIGhhcyBoaWRkZW4gKHJlbW92ZWRfdG9vbHMpXG4gIC8vIGNyZWF0ZSBhIG5ldyBhcnJheSB3aGVyZSB0aGUgdG9vbHMgdGhhdCBoYXZlIG5vdCBiZWVuIGhpZGRlbiB3aWxsIGJlIHN0b3JlZFxuICBsZXQgdG9vbHNfbm90X2hpZGRlbiA9IFtdO1xuICBkYXRhLmZvckVhY2goZWxlbWVudCA9PiB7XG4gICAgbGV0IGluZGV4ID0gJC5pbkFycmF5KGVsZW1lbnQudG9vbG5hbWUsIHJlbW92ZWRfdG9vbHMpO1xuICAgIGlmIChpbmRleCA9PSAtMSl7XG4gICAgICB0b29sc19ub3RfaGlkZGVuLnB1c2goZWxlbWVudCk7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gdG9vbHNfbm90X2hpZGRlbjtcblxufTtcblxuZnVuY3Rpb24gZmlsbF9pbl90YWJsZSAoZGl2aWQsIGRhdGEpe1xuICAvL2NyZWF0ZSB0YWJsZSBkaW5hbWljYWxseVxuICB2YXIgdGFibGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChkaXZpZCArIFwiX3RhYmxlXCIpO1xuICB2YXIgcm93ID0gdGFibGUuaW5zZXJ0Um93KC0xKTtcbiAgcm93Lmluc2VydENlbGwoMCkuaW5uZXJIVE1MID0gXCI8Yj5UT09MPC9iPlwiO1xuICByb3cuaW5zZXJ0Q2VsbCgxKS5pbm5lckhUTUwgPSBcIjxiPlFVQVJUSUxFPC9iPlwiO1xuXG4gIGRhdGEuZm9yRWFjaChmdW5jdGlvbihlbGVtZW50KSB7XG4gICAgdmFyIHJvdyA9IHRhYmxlLmluc2VydFJvdygtMSk7XG4gICAgcm93Lmluc2VydENlbGwoMCkuaW5uZXJIVE1MID0gZWxlbWVudFtcInRvb2xuYW1lXCJdO1xuICAgIHJvdy5pbnNlcnRDZWxsKDEpLmlubmVySFRNTCA9IGVsZW1lbnRbXCJxdWFydGlsZVwiXTtcbiAgfSk7XG5cbn07XG5cbmZ1bmN0aW9uIHNldF9jZWxsX2NvbG9ycygpe1xuXG4gIHZhciBjZWxsID0gJCgndGQnKTsgXG5cbiAgY2VsbC5lYWNoKGZ1bmN0aW9uKCkgeyAvL2xvb3AgdGhyb3VnaCBhbGwgdGQgZWxlbWVudHMgaWUgdGhlIGNlbGxzXG5cbiAgICB2YXIgY2VsbF92YWx1ZSA9ICQodGhpcykuaHRtbCgpOyAvL2dldCB0aGUgdmFsdWVcblxuICAgIGlmIChjZWxsX3ZhbHVlID09IDEpIHsgLy9pZiB0aGVuIGZvciBpZiB2YWx1ZSBpcyAxXG4gICAgICAkKHRoaXMpLmNzcyh7J2JhY2tncm91bmQnIDogJyMyMzhiNDUnfSk7ICAgLy8gY2hhbmdlcyB0ZCB0byByZWQuXG4gICAgfSBlbHNlIGlmIChjZWxsX3ZhbHVlID09IDIpIHtcbiAgICAgICQodGhpcykuY3NzKHsnYmFja2dyb3VuZCcgOiAnIzc0YzQ3Nid9KTsgXG4gICAgfSBlbHNlIGlmIChjZWxsX3ZhbHVlID09IDMpIHtcbiAgICAgICQodGhpcykuY3NzKHsnYmFja2dyb3VuZCcgOiAnI2JhZTRiMyd9KTsgXG4gICAgfSBlbHNlIGlmIChjZWxsX3ZhbHVlID09IDQpIHtcbiAgICAgICQodGhpcykuY3NzKHsnYmFja2dyb3VuZCcgOiAnI2VkZjhlOSd9KTsgXG4gICAgfSBlbHNlIHtcbiAgICAgICQodGhpcykuY3NzKHsnYmFja2dyb3VuZCcgOiAnI2ZmZmZmZid9KTtcbiAgICB9O1xuXG4gIH0pO1xuXG59O1xuXG5leHBvcnR7XG4gIGxvYWR1cmwsXG4gIG9uUXVhcnRpbGVDaGFuZ2Vcbn1cblxubG9hZHVybCgpO1xuXG5cblxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/app.js\n");
+eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"loadurl\", function() { return loadurl; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"onQuartileChange\", function() { return onQuartileChange; });\n/* harmony import */ var d3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! d3 */ \"./node_modules/d3/index.js\");\n/* harmony import */ var _app_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./app.css */ \"./src/app.css\");\n/* harmony import */ var _app_css__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_app_css__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jquery */ \"./node_modules/jquery/dist/jquery.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var pareto_frontier__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! pareto-frontier */ \"./node_modules/pareto-frontier/index.js\");\n/* harmony import */ var pareto_frontier__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(pareto_frontier__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\n\n\n// ./node_modules/.bin/webpack-cli src/app.js --output=build/build.js -d -w\n\n\nlet MAIN_DATA = {};\n\n\nfunction loadurl(){\n    let divid;\n    \n    let charts = document.getElementsByClassName(\"benchmarkingChart\");\n     \n    let i = 0;\n    let dataId;\n    let y;\n    \n    // append ids to chart/s and make d3 plot\n    i = 0\n    for(y of charts){\n      // get benchmarking event id\n      dataId = y.getAttribute('data-id');\n      //set chart id\n      divid = (dataId+i).replace(\":\",\"_\");\n      y.id=divid;\n\n      // append buttons\n      let button1_id = divid + \"__none\";\n      let button2_id = divid + \"__squares\";\n      let button3_id = divid + \"__diagonals\";\n      \n      // append selection list tooltip container\n      d3__WEBPACK_IMPORTED_MODULE_0__[\"select\"]('#'+divid).append(\"div\")\n        .attr(\"id\", \"tooltip_container\")\n\n      let select_list = d3__WEBPACK_IMPORTED_MODULE_0__[\"select\"]('#'+divid).append(\"form\").append(\"select\")\n      .attr(\"class\",\"classificators_list\")\n      .attr(\"id\",divid + \"_dropdown_list\")\n      .append(\"optgroup\")\n      .attr(\"label\",\"Select a classification method:\");\n\n      select_list.append(\"option\")\n      .attr(\"class\", \"selection_option\")\n      .attr(\"id\", button1_id)\n      .attr(\"title\", \"Show only raw data\")\n      .attr(\"selected\",\"disabled\")\n      .attr(\"data-toggle\", \"list_tooltip\")\n      .attr(\"data-container\", \"#tooltip_container\") \n      .text(\"NO CLASSIFICATION\")\n      .on('click', function(d) {\n        onQuartileChange(this.id);\n      });\n      select_list.append(\"option\")\n      .attr(\"class\", \"selection_option\")\n      .attr(\"id\", button2_id)\n      .attr(\"title\", \"Apply square quartiles classification method (based on the 0.5 quartile of the X and Y metrics)\")\n      .attr(\"data-toggle\", \"list_tooltip\")\n      .attr(\"data-container\", \"#tooltip_container\") \n      .text(\"SQUARE QUARTILES\")\n      .on('click', function(d) {\n        onQuartileChange(this.id);\n      });\n      select_list.append(\"option\")\n      .attr(\"class\", \"selection_option\")\n      .attr(\"id\", button3_id)\n      .attr(\"title\", \"Apply diagonal quartiles classifcation method (based on the assignment of a score to each participant proceeding from its distance to the 'optimal performance' corner)\")\n      .attr(\"data-toggle\", \"list_tooltip\")\n      .attr(\"data-container\", \"#tooltip_container\") \n      .text(\"DIAGONAL QUARTILES\")\n      .on('click', function(d) {\n        onQuartileChange(this.id);\n      });\n     \n      let url = \"https://dev-openebench.bsc.es/api/scientific/Dataset/?query=\" + dataId + \"&fmt=json\";\n      get_data(url,divid); \n\n      // $('[data-toggle=\"list_tooltip\"]').tooltip();\n\n      //check the transformation to table attribute and append table to html\n      if (y.getAttribute('toTable') == \"true\"){\n        let table_id = divid + \"_table\";\n        var input = jquery__WEBPACK_IMPORTED_MODULE_2___default()('<br><br><table id=\"'+table_id+'\" data-id=\"'+dataId+'\" class=\"benchmarkingTable\"></table>');\n        jquery__WEBPACK_IMPORTED_MODULE_2___default()(\"#\" + divid).append(input);\n      };\n            \n      i++;\n    }\n        \n    \n       \n};\n\n\n\nfunction get_data(url,divid){\n\n  fetchUrl(url).then(results => {\n    join_all_json(results.Dataset,divid);\n  })\n\n};\n\nasync function fetchUrl(url) {\n\n  try {\n    let request = await fetch(url);\n    let result = await request.text();\n      return JSON.parse(result);\n    }\n    catch (err) {\n      console.log(`Invalid Url Error: ${err.stack} `);\n    }\n\n};\n\nfunction join_all_json(array,divid){\n  try{\n    let full_json  = [];\n    for (let i = 0; i < array.length; i++) {\n        let jo = {};\n        jo['toolname'] = array[i].name.split('.')[0];\n        jo['x'] = array[i].metrics[0].result.value;\n        jo['y'] = array[i].metrics[1].result.value;\n        jo['e'] = array[i].metrics[2].result.value;\n        full_json.push(jo);    \n    }\n\n    MAIN_DATA[divid] = full_json;\n    // by default, no classification method is applied. it is the first item in the selection list\n    var e = document.getElementById(divid + \"_dropdown_list\");\n    let classification_type = e.options[e.selectedIndex].id;\n\n    createChart(full_json,divid, classification_type);\n  }catch(err){\n    console.log(`Invalid Url Error: ${err.stack} `);\n  }\n\n    \n};\n\nfunction onQuartileChange(ID){  \n  \n  var chart_id = ID.split(\"__\")[0];\n  // console.log(d3.select('#'+'svg_'+chart_id));\n  d3__WEBPACK_IMPORTED_MODULE_0__[\"select\"]('#'+'svg_'+chart_id).remove();\n  let classification_type = ID;\n  createChart(MAIN_DATA[chart_id],chart_id, classification_type);\n};\n\nfunction compute_classification(data, svg, xScale, yScale, div, width, height, removed_tools,divid, classification_type) {\n\n  let transform_to_table; //this variable is set to true if there are table elements with the corresponden divid in the html file\n  // every time a new classification is compute the previous results table is deleted (if it exists)\n  if (document.getElementById(divid + \"_table\") != null) {\n    document.getElementById(divid + \"_table\").innerHTML = '';\n    transform_to_table = true;\n  };\n\n  let better = \"top-right\";\n  if (classification_type == ( divid + \"__squares\")) {\n    draw_pareto(data, svg, xScale, yScale, div, width, height, removed_tools,divid, better);\n    get_square_quartiles(data, svg, xScale, yScale, div, removed_tools,better,divid, transform_to_table);\n    append_quartile_numbers_to_plot (svg, xScale, yScale, better,divid);\n  }  \n  else if (classification_type == (divid + \"__diagonals\")) {\n    draw_pareto(data, svg, xScale, yScale, div, width, height, removed_tools,divid, better);\n    get_diagonal_quartiles(data, svg, xScale, yScale, div, width, height, removed_tools, better,divid, transform_to_table);\n  } else {\n    draw_pareto(data, svg, xScale, yScale, div, width, height, removed_tools,divid, better);\n  }\n  \n};\n\nfunction compute_chart_height(data){\n\n  if (data.length%5 == 0){\n    return (40 + (20 * (Math.trunc(data.length/5))));\n  } else if (data.lenght%5 != 0) {\n    return (40 + (20 * (Math.trunc(data.length/5)+1)));\n  } \n  \n};\n\nfunction createChart (data,divid, classification_type){\n  // console.log(data)\n  let margin = {top: 20, right: 40, bottom: compute_chart_height(data), left: 40},\n    width = 1200 - margin.left - margin.right,\n    height = 500 - margin.top - margin.bottom;\n\n\n  let xScale = d3__WEBPACK_IMPORTED_MODULE_0__[\"scaleLinear\"]()\n    .range([0, width])\n    .domain([d3__WEBPACK_IMPORTED_MODULE_0__[\"min\"](data, function(d) { return d.x; }), d3__WEBPACK_IMPORTED_MODULE_0__[\"max\"](data, function(d) { return d.x; })]).nice();\n\n  let min_y = d3__WEBPACK_IMPORTED_MODULE_0__[\"min\"](data, function(d) { return d.y; });\n  let max_y = d3__WEBPACK_IMPORTED_MODULE_0__[\"max\"](data, function(d) { return d.y; });\n  let yScale = d3__WEBPACK_IMPORTED_MODULE_0__[\"scaleLinear\"]()\n    .range([height, 0])\n    .domain([min_y - 0.3*(max_y-min_y), max_y + 0.3*(max_y-min_y)]).nice();\n\n  let xAxis = d3__WEBPACK_IMPORTED_MODULE_0__[\"axisBottom\"](xScale).ticks(12),\n      yAxis = d3__WEBPACK_IMPORTED_MODULE_0__[\"axisLeft\"](yScale).ticks(12 * height / width);\n\n  let line = d3__WEBPACK_IMPORTED_MODULE_0__[\"line\"]()\n    .x(function(d) {\n      return xScale(d.x);\n    })\n    .y(function(d) {\n      return yScale(d.y);\n    });\n\n  // Define the div for the tooltip\n\n  let div = d3__WEBPACK_IMPORTED_MODULE_0__[\"select\"]('#'+divid).append(\"div\").attr(\"class\", \"benchmark_tooltip\").style(\"opacity\", 0);\n\n  // append the svg element\n  // d3.select(\"svg\").remove()\n    // console.log(d3.select(\"svg\").remove());\n\n  let svg = d3__WEBPACK_IMPORTED_MODULE_0__[\"select\"]('#'+divid).append(\"svg\")\n    .attr(\"class\", \"benchmarkingSVG\")\n    .attr('id','svg_'+divid)\n    .attr(\"width\", width + margin.left + margin.right)\n    .attr(\"height\", height + margin.top + margin.bottom)\n    .append(\"g\")\n    .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n    \n  svg.append(\"g\").append(\"rect\").attr(\"width\", width).attr(\"height\", height).attr(\"class\", \"plot-bg\");\n\n  // Add Axis labels\n  svg.append(\"g\").attr(\"class\", \"axis axis--x\")\n    .attr(\"transform\", \"translate(\" + 0 + \",\" + height + \")\")\n    .call(xAxis);\n\n  svg.append(\"g\").attr(\"class\", \"axis axis--y\").call(yAxis);\n  \n  // add X and Y Gridlines\n  var gridlines_x = d3__WEBPACK_IMPORTED_MODULE_0__[\"axisBottom\"]()\n                    .ticks(12)\n                    .tickFormat(\"\")\n                    .tickSize(height)\n                    .scale(xScale);\n\n  var gridlines_y = d3__WEBPACK_IMPORTED_MODULE_0__[\"axisLeft\"]()\n                    .ticks(12 * height / width)\n                    .tickFormat(\"\")\n                    .tickSize(-width)\n                    .scale(yScale);\n\n  svg.append(\"g\")\n     .attr(\"class\", \"bench_grid\")\n     .call(gridlines_x);\n  \n     svg.append(\"g\")\n     .attr(\"class\", \"bench_grid\")\n     .call(gridlines_y);\n         \n  let removed_tools = []; // this array stores the tools when the user clicks on them\n\n   // setup fill color\n  let cValue_func = function(d) {\n    return d.toolname;\n  },\n  color_func = d3__WEBPACK_IMPORTED_MODULE_0__[\"scaleOrdinal\"](d3__WEBPACK_IMPORTED_MODULE_0__[\"schemeSet1\"].concat(d3__WEBPACK_IMPORTED_MODULE_0__[\"schemeSet3\"]));\n\n  append_dots_errobars (svg, data, xScale, yScale, div, cValue_func, color_func,divid);\n\n  draw_legend (data, svg, xScale, yScale, div, width, height, removed_tools, color_func, color_func.domain(), margin,divid,classification_type);\n\n    compute_classification(data, svg, xScale, yScale, div, width, height, removed_tools,divid, classification_type);\n\n};\n\nfunction append_dots_errobars (svg, data, xScale, yScale, div, cValue, color,divid){\n\n  // Add Error Line\n  svg.append(\"g\").selectAll(\"line\")\n      .data(data).enter()\n      .append(\"line\")\n      .attr(\"class\", \"error-line\")\n      .attr(\"id\", function (d) { return divid+\"___line\"+d.toolname.replace(/[\\. ()/-]/g, \"_\");})\n      .attr(\"x1\", function(d) {\n        return xScale(d.x);\n      })\n      .attr(\"y1\", function(d) {\n        return yScale(d.y + d.e);\n      })\n      .attr(\"x2\", function(d) {\n        return xScale(d.x);\n      })\n      .attr(\"y2\", function(d) {\n        return yScale(d.y - d.e);\n      });\n\n  // Add Error Top Cap\n  svg.append(\"g\").selectAll(\"line\")\n      .data(data).enter()\n      .append(\"line\")\n      .attr(\"id\", function (d) { return divid+\"___top\"+d.toolname.replace(/[\\. ()/-]/g, \"_\");})\n      .attr(\"class\", \"error-cap\")\n      .attr(\"x1\", function(d) {\n        return xScale(d.x) - 4;\n      })\n      .attr(\"y1\", function(d) {\n        return yScale(d.y + d.e);\n      })\n      .attr(\"x2\", function(d) {\n        return xScale(d.x) + 4;\n      })\n      .attr(\"y2\", function(d) {\n        return yScale(d.y + d.e);\n      });\n\n  // Add Error Bottom Cap\n  svg.append(\"g\").selectAll(\"line\")\n      .data(data).enter()\n      .append(\"line\")\n      .attr(\"id\", function (d) { return divid+\"___bottom\"+d.toolname.replace(/[\\. ()/-]/g, \"_\");})\n      .attr(\"class\", \"error-cap\")\n      .attr(\"x1\", function(d) {\n        return xScale(d.x) - 4;\n      })\n      .attr(\"y1\", function(d) {\n        return yScale(d.y - d.e);\n      })\n      .attr(\"x2\", function(d) {\n        return xScale(d.x) + 4;\n      })\n      .attr(\"y2\", function(d) {\n        return yScale(d.y - d.e);\n      });\n\n  // add dots\n  let symbol = d3__WEBPACK_IMPORTED_MODULE_0__[\"symbol\"]();\n\n  let formatComma = d3__WEBPACK_IMPORTED_MODULE_0__[\"format\"](\",\");\n  let formatDecimal = d3__WEBPACK_IMPORTED_MODULE_0__[\"format\"](\".4f\");\n\n  let dots =svg.selectAll(\".dots\")\n    .data(data)\n    .enter()\n    .append(\"path\")\n    .attr(\"class\", \"benchmark_path\");\n    \n  dots.attr(\"d\", symbol.type(function(){return d3__WEBPACK_IMPORTED_MODULE_0__[\"symbolSquare\"]}))\n      .attr(\"id\", function (d) {  return divid+\"___\"+d.toolname.replace(/[\\. ()/-]/g, \"_\");})\n      .attr(\"class\",\"line\")\n      .attr('transform',function(d){ return \"translate(\"+xScale(d.x)+\",\"+yScale(d.y)+\")\"; })\n      .attr(\"r\", 6)\n      .style(\"fill\", function(d) {\n        return color(cValue(d));\n      })\n      .on(\"mouseover\", function(d) {\n        // show tooltip only if the tool is visible\n        let ID = divid+\"___\"+d.toolname.replace(/[\\. ()/-]/g, \"_\");\n        if (d3__WEBPACK_IMPORTED_MODULE_0__[\"select\"](\"#\"+ID).style(\"opacity\") == 1) {\n          div.transition()\t\t\n              .duration(100)\t\t\n              .style(\"opacity\", .9);\t\t\n          div.html(d.toolname + \"<br/>\"  + formatComma(d.x) + \"<br/>\"  + formatDecimal(d.y))\t\n              .style(\"left\", (d3__WEBPACK_IMPORTED_MODULE_0__[\"event\"].pageX) + \"px\")\t\t\n              .style(\"top\", (d3__WEBPACK_IMPORTED_MODULE_0__[\"event\"].pageY) + \"px\");\n        }\n      })\t\t\t\t\t\n      .on(\"mouseout\", function(d) {\t\t\n        div.transition()\t\t\n          .duration(1500)\t\t\n          .style(\"opacity\", 0);\t\n      });\n    \n};\n\nfunction draw_legend (data, svg, xScale, yScale, div, width, height, removed_tools, color, color_domain, margin,divid,classification_type) {\n\n  //set number of elements per legend row\n  let n = 5;\n\n  let legend = svg.selectAll(\".legend\")\n    .data(color_domain)\n    .enter().append(\"g\")\n    .attr(\"class\", \"legend\")\n    .attr(\"transform\", function(d, i) { return \"translate(\" + (-width+i%n*200) + \",\" + (height + 40 + Math.floor(i/n) * 20) + \")\"; });\n  \n  // draw legend colored rectangles\n  legend.append(\"rect\")\n        .attr(\"x\", width + 18)\n        .attr(\"width\", 18)\n        .attr(\"height\", 18)\n        .style(\"fill\", color)\n        .on('click', function(d) {\n\n          let dot = d3__WEBPACK_IMPORTED_MODULE_0__[\"select\"](\"text#\" +divid+\"___\"+d.replace(/[\\. ()/-]/g, \"_\"));\n          let ID = dot._groups[0][0].id;\n\n          if(data.length-removed_tools.length-1 >= 4){\n\n            let legend_rect = this;\n            show_or_hide_participant_in_plot (ID, data, svg, xScale, yScale, div, width, height, removed_tools,divid,classification_type, legend_rect);\n\n          } else if (data.length-removed_tools.length-1 < 4 && (d3__WEBPACK_IMPORTED_MODULE_0__[\"select\"](\"#\"+ID).style(\"opacity\")) == 0){\n\n            let legend_rect = this;\n            show_or_hide_participant_in_plot (ID, data, svg, xScale, yScale, div, width, height, removed_tools,divid,classification_type, legend_rect);\n\n          } else {\n            \n            jquery__WEBPACK_IMPORTED_MODULE_2___default()('.removal_alert').remove();\n            var alert_msg = jquery__WEBPACK_IMPORTED_MODULE_2___default()('<div class=\"removal_alert\">\\\n                                <span class=\"closebtn\" onclick=\"(this.parentNode.remove());\">&times;</span>\\\n                                At least four participants are required for the benchmark!!\\\n                              </div>');\n            jquery__WEBPACK_IMPORTED_MODULE_2___default()(\"#\" + divid).append(alert_msg);\n\n            setTimeout(function(){\n              if (jquery__WEBPACK_IMPORTED_MODULE_2___default()('.removal_alert').length > 0) {\n                jquery__WEBPACK_IMPORTED_MODULE_2___default()('.removal_alert').remove();\n              }\n            }, 5000)\n\n          };\n\n        });\n\n  // draw legend text\n  legend.append(\"text\")\n        .attr(\"x\", width + 40)\n        .attr(\"y\", 9)\n        .attr(\"id\", function (d) { return divid+\"___\"+d.replace(/[\\. ()/-]/g, \"_\");})\n        .attr(\"dy\", \".35em\")\n        .style(\"text-anchor\", \"start\")\n        .text(function(d) {\n          return d;\n        });\n\n};\n\nfunction draw_pareto(data, svg, xScale, yScale, div, width, height, removed_tools,divid, better){\n\n  const points = [];\n\n  let tools_not_hidden = remove_hidden_tools(data, removed_tools);\n\n  tools_not_hidden.forEach(function(element) {\n    points.push([element['x'], element['y']])\n  });\n\n  let pf_coords;\n  let x_axis = xScale.domain();\n  let y_axis = yScale.domain();\n\n  if (better == \"bottom-right\"){\n    pf_coords = pareto_frontier__WEBPACK_IMPORTED_MODULE_3__[\"getParetoFrontier\"](points, { optimize: 'bottomRight'});\n    // append edges to pareto frontier\n    pf_coords.unshift ([pf_coords[0][0], y_axis[1]]);\n    pf_coords.push([x_axis[0], pf_coords[pf_coords.length -1 ][1]]);\n  } else if (better == \"top-right\"){\n    pf_coords = pareto_frontier__WEBPACK_IMPORTED_MODULE_3__[\"getParetoFrontier\"](points, { optimize: 'topRight'});\n    // append edges to pareto frontier\n    pf_coords.unshift ([pf_coords[0][0], y_axis[0]]);\n    pf_coords.push([x_axis[0], pf_coords[pf_coords.length -1 ][1]]);\n\n  }\n  \n  for (var i = 0; i < (pf_coords.length-1); i++) {\n    svg.append(\"line\")\n       .attr(\"clip-path\",\"url(#clip)\")\n       .attr(\"x1\", xScale(pf_coords[i][0]))\n       .attr(\"y1\", yScale(pf_coords[i][1]))\n       .attr(\"x2\", xScale(pf_coords[i+1][0]))\n       .attr(\"y2\", yScale(pf_coords[i+1][1]))  \n       .attr(\"id\", function (d) { return divid+\"___pareto\";})\n       .attr(\"stroke\", \"grey\")\n       .attr(\"stroke-width\",3)\n       .style(\"stroke-dasharray\", (\"20, 5\"))\n       .style(\"opacity\", 0.4)\n  };\n\n\n}\n\nfunction show_or_hide_participant_in_plot (ID, data, svg, xScale, yScale, div, width, height, removed_tools,divid,classification_type, legend_rect){\n\n   let tool_id =ID.split(\"___\")[1];\n  // remove the existing number and classification lines from plot (if any)\n  svg.selectAll(\"#\"+divid+\"___x_quartile\").remove();\n  svg.selectAll(\"#\"+divid+\"___y_quartile\").remove();\n  svg.selectAll(\"#\"+divid+\"___diag_quartile_0\").remove();\n  svg.selectAll(\"#\"+divid+\"___diag_quartile_1\").remove();\n  svg.selectAll(\"#\"+divid+\"___diag_quartile_2\").remove();\n  svg.selectAll(\"#\"+divid+\"___num_bottom_right\").remove();\n  svg.selectAll(\"#\"+divid+\"___num_top_right\").remove();\n  svg.selectAll(\"#\"+divid+\"___num_bottom_left\").remove();\n  svg.selectAll(\"#\"+divid+\"___num_top_left\").remove();\n  svg.selectAll(\"#\"+divid+\"___pareto\" ).remove();\n\n  let blockopacity = d3__WEBPACK_IMPORTED_MODULE_0__[\"select\"](\"#\"+ID).style(\"opacity\");\n  \n  // change the opacity to 0 or 1 depending on the current state\n  if (blockopacity == 0) {\n    d3__WEBPACK_IMPORTED_MODULE_0__[\"select\"](\"#\"+ID).style(\"opacity\", 1);\n    d3__WEBPACK_IMPORTED_MODULE_0__[\"select\"](\"#\"+divid+\"___top\"+tool_id).style(\"opacity\", 1);\n    d3__WEBPACK_IMPORTED_MODULE_0__[\"select\"](\"#\"+divid+\"___bottom\"+tool_id).style(\"opacity\", 1);\n    d3__WEBPACK_IMPORTED_MODULE_0__[\"select\"](\"#\"+divid+\"___line\"+tool_id).style(\"opacity\", 1);\n    // recalculate the quartiles after removing the tools\n    let index = jquery__WEBPACK_IMPORTED_MODULE_2___default.a.inArray(tool_id.replace(/_/g, \"-\"), removed_tools);\n    removed_tools.splice(index, 1);\n    compute_classification(data, svg, xScale, yScale, div, width, height, removed_tools,divid,classification_type);\n    //change the legend opacity to keep track of hidden tools\n    d3__WEBPACK_IMPORTED_MODULE_0__[\"select\"](legend_rect).style(\"opacity\", 1);\n    d3__WEBPACK_IMPORTED_MODULE_0__[\"select\"](\"text#\" +divid+\"___\"+tool_id).style(\"opacity\", 1);\n\n  } else {\n    d3__WEBPACK_IMPORTED_MODULE_0__[\"select\"](\"#\"+ID).style(\"opacity\", 0);\n    d3__WEBPACK_IMPORTED_MODULE_0__[\"select\"](\"#\"+divid+\"___top\"+tool_id).style(\"opacity\", 0);\n    d3__WEBPACK_IMPORTED_MODULE_0__[\"select\"](\"#\"+divid+\"___bottom\"+tool_id).style(\"opacity\", 0);\n    d3__WEBPACK_IMPORTED_MODULE_0__[\"select\"](\"#\"+divid+\"___line\"+tool_id).style(\"opacity\", 0);\n    removed_tools.push(tool_id.replace(/_/g, \"-\"));\n    compute_classification(data, svg, xScale, yScale, div, width, height, removed_tools,divid,classification_type);\n    //change the legend opacity to keep track of hidden tools\n    d3__WEBPACK_IMPORTED_MODULE_0__[\"select\"](legend_rect).style(\"opacity\", 0.2);\n    d3__WEBPACK_IMPORTED_MODULE_0__[\"select\"](\"text#\" +divid+\"___\"+tool_id).style(\"opacity\", 0.2);\n  }\n\n};\n\nfunction get_square_quartiles(data, svg, xScale, yScale, div, removed_tools,better, divid, transform_to_table) {\n  \n  let tools_not_hidden = remove_hidden_tools(data, removed_tools);\n\n  // compute the quartiles over the new seet of data\n  let x_values = tools_not_hidden.map(a => a.x).sort(function(a, b){return a - b});\n  let y_values = tools_not_hidden.map(a => a.y).sort(function(a, b){return a - b});\n\n  let quantile_x = d3__WEBPACK_IMPORTED_MODULE_0__[\"quantile\"](x_values, 0.5);\n  let quantile_y = d3__WEBPACK_IMPORTED_MODULE_0__[\"quantile\"](y_values, 0.5);\n\n  let x_axis = xScale.domain();\n  let y_axis = yScale.domain();\n\n  let formatComma = d3__WEBPACK_IMPORTED_MODULE_0__[\"format\"](\",\");\n\n  svg.append(\"line\")\n    .attr(\"x1\", xScale(quantile_x))\n    .attr(\"y1\", yScale(y_axis[0]))\n    .attr(\"x2\", xScale(quantile_x))\n    .attr(\"y2\", yScale(y_axis[1]))\n    .attr(\"id\", function (d) { return divid+\"___x_quartile\";})\n    .attr(\"stroke\", \"#0A58A2\")\n    .attr(\"stroke-width\",3)\n    .style(\"stroke-dasharray\", (\"20, 5\"))\n    .style(\"opacity\", 0.4)\n    .on(\"mouseover\", function(d) {\t\n      div.transition()\t\t\n         .duration(100)\t\t\n         .style(\"opacity\", .9);\t\t\n      div.html(\"X quartile = \" + formatComma( quantile_x) )\t\n         .style(\"left\", (d3__WEBPACK_IMPORTED_MODULE_0__[\"event\"].pageX) + \"px\")\t\t\n         .style(\"top\", (d3__WEBPACK_IMPORTED_MODULE_0__[\"event\"].pageY) + \"px\");\n    })\t\t\t\t\t\n    .on(\"mouseout\", function(d) {\t\t\n      div.transition()\t\t\n         .duration(1000)\t\t\n         .style(\"opacity\", 0);\t\n    });\n\n  svg.append(\"line\")\n    .attr(\"x1\", xScale(x_axis[0]))\n    .attr(\"y1\", yScale(quantile_y))\n    .attr(\"x2\", xScale(x_axis[1]))\n    .attr(\"y2\", yScale(quantile_y))\n    .attr(\"id\", function (d) { return divid+\"___y_quartile\";})\n    .attr(\"stroke\", \"#0A58A2\")\n    .attr(\"stroke-width\",3)\n    .style(\"stroke-dasharray\", (\"20, 5\"))\n    .style(\"opacity\", 0.4)\n    .on(\"mouseover\", function(d) {\t\n      div.transition()\t\t\n         .duration(100)\t\t\n         .style(\"opacity\", .9);\t\t\n      div\t.html(\"Y quartile = \" + formatComma(quantile_y) )\t\n          .style(\"left\", (d3__WEBPACK_IMPORTED_MODULE_0__[\"event\"].pageX) + \"px\")\t\t\n          .style(\"top\", (d3__WEBPACK_IMPORTED_MODULE_0__[\"event\"].pageY) + \"px\");\n    })\t\t\t\t\t\n    .on(\"mouseout\", function(d) {\t\t\n      div.transition()\t\t\n         .duration(1500)\t\t\n         .style(\"opacity\", 0);\t\n    });\n\n    //the tranformation to tabular format is done only if there are any table elements in the html file\n    if (transform_to_table == true) {\n      transform_sqr_classif_to_table(better, tools_not_hidden, quantile_x, quantile_y, divid);\n    };\n    \n};\n\nfunction transform_sqr_classif_to_table(better, data, quantile_x, quantile_y, divid){\n  if (better == \"bottom-right\"){\n    data.forEach(function(element) {\n        if (element['x'] >= quantile_x && element['y'] <= quantile_y){\n              element['quartile'] = 1;\n        }else if (element['x'] >= quantile_x && element['y'] > quantile_y){\n              element['quartile'] = 3;\n        }else if (element['x'] < quantile_x && element['y'] > quantile_y){\n              element['quartile'] = 4;\n        }else if (element['x'] < quantile_x && element['y'] <= quantile_y){\n              element['quartile'] = 2;\n        }\n    });\n  } else if (better == \"top-right\"){\n      data.forEach(function(element) {\n        if (element['x'] >= quantile_x && element['y'] < quantile_y){\n              element['quartile'] = 3;\n        }else if (element['x'] >= quantile_x && element['y'] >= quantile_y){\n              element['quartile'] = 1;\n        }else if (element['x'] < quantile_x && element['y'] >= quantile_y){\n              element['quartile'] = 2;\n        }else if (element['x'] < quantile_x && element['y'] < quantile_y){\n              element['quartile'] = 4;\n        }\n      });\n  };\n\n  fill_in_table (divid, data);\n  set_cell_colors();\n\n};\n\n\nfunction append_quartile_numbers_to_plot (svg, xScale, yScale, better,divid){\n\n  let x_axis = xScale.domain();\n  let y_axis = yScale.domain();\n\n  let num_bottom_right,num_bottom_left,num_top_right,num_top_left;\n  // append quartile numbers to plot\n  if (better == \"bottom-right\"){\n     num_bottom_right = \"1\";\n     num_bottom_left = \"2\";\n     num_top_right = \"3\";\n     num_top_left = \"4\";\n  } \n  else if (better == \"top-right\"){\n     num_bottom_right = \"3\";\n     num_bottom_left = \"4\";\n     num_top_right = \"1\";\n     num_top_left = \"2\";\n  };\n\n  \n  svg.append(\"text\")\n  .attr(\"id\", function (d) { return divid+\"___num_bottom_right\";})\n  .attr(\"x\", xScale(x_axis[1]-(0.05*(x_axis[1]-x_axis[0]))))\n  .attr(\"y\", yScale(y_axis[1]-(0.97*(y_axis[1]-y_axis[0]))))\n  .style(\"opacity\", 0.4)\n  .style(\"font-size\", \"40px\")\n  .style(\"fill\", \"#0A58A2\")\n  .text(num_bottom_right);\n\n  svg.append(\"text\")\n  .attr(\"id\", function (d) { return divid+\"___num_bottom_left\";})\n  .attr(\"x\", xScale(x_axis[1]-(0.95*(x_axis[1]-x_axis[0]))))\n  .attr(\"y\", yScale(y_axis[1]-(0.97*(y_axis[1]-y_axis[0]))))\n  .style(\"opacity\", 0.4)\n  .style(\"font-size\", \"40px\")\n  .style(\"fill\", \"#0A58A2\")\n  .text(num_bottom_left);\n\n  svg.append(\"text\")\n  .attr(\"id\", function (d) { return divid+\"___num_top_right\";})\n  .attr(\"x\", xScale(x_axis[1]-(0.05*(x_axis[1]-x_axis[0]))))\n  .attr(\"y\", yScale(y_axis[1]-(0.1*(y_axis[1]-y_axis[0]))))\n  .style(\"opacity\", 0.4)\n  .style(\"font-size\", \"40px\")\n  .style(\"fill\", \"#0A58A2\")\n  .text(num_top_right);\n\n  svg.append(\"text\")\n  .attr(\"id\", function (d) { return divid+\"___num_top_left\";})\n  .attr(\"x\", xScale(x_axis[1]-(0.95*(x_axis[1]-x_axis[0]))))\n  .attr(\"y\", yScale(y_axis[1]-(0.1*(y_axis[1]-y_axis[0]))))\n  .style(\"opacity\", 0.4)\n  .style(\"font-size\", \"40px\")\n  .style(\"fill\", \"#0A58A2\")\n  .text(num_top_left);\n\n}\nfunction get_diagonal_quartiles(data, svg, xScale, yScale, div, width, height, removed_tools, better, divid, transform_to_table) {\n\n  let tools_not_hidden = remove_hidden_tools(data, removed_tools);\n\n  let x_values = tools_not_hidden.map(a => a.x);\n  let y_values = tools_not_hidden.map(a => a.y);\n\n  // get distance to lowest score corner\n\n  // normalize data to 0-1 range\n  let normalized_values = normalize_data(x_values, y_values);\n  let [x_norm, y_norm] = [normalized_values[0], normalized_values[1]];\n  \n  let max_x = Math.max.apply(null, x_values);\n  let max_y = Math.max.apply(null, y_values);\n\n  // # compute the scores for each of the tool. based on their distance to the x and y axis\n  let scores = []\n  let scores_coords = {}; //this object will store the scores and the coordinates\n  for (let i = 0; i < x_norm.length; i++) {\n\n    if (better == \"bottom-right\"){\n      scores.push(x_norm[i] + (1 - y_norm[i]));\n      scores_coords[x_norm[i] + (1 - y_norm[i])] =  [x_values[i], y_values[i]];\n      //append the score to the data array\n      tools_not_hidden[i]['score'] = x_norm[i] + (1 - y_norm[i]);\n    } \n    else if (better == \"top-right\"){\n      scores.push(x_norm[i] + y_norm[i]);\n      scores_coords[x_norm[i] + y_norm[i]] = [x_values[i], y_values[i]];\n      //append the score to the data array\n      tools_not_hidden[i]['score'] = x_norm[i] + y_norm[i];\n    };\n\n  };\n\n  // sort the scores and compute quartiles\n  scores.sort(function(a, b){return b-a});\n\n  let first_quartile = d3__WEBPACK_IMPORTED_MODULE_0__[\"quantile\"](scores, 0.25);\n  let second_quartile = d3__WEBPACK_IMPORTED_MODULE_0__[\"quantile\"](scores, 0.5);\n  let third_quartile = d3__WEBPACK_IMPORTED_MODULE_0__[\"quantile\"](scores, 0.75);\n\n  // compute the diagonal line coords\n  let coords = [get_diagonal_line(scores, scores_coords, first_quartile, better, max_x, max_y,svg, xScale, yScale), \n                get_diagonal_line(scores, scores_coords, second_quartile, better, max_x, max_y,svg, xScale, yScale), \n                get_diagonal_line(scores, scores_coords, third_quartile, better, max_x, max_y,svg, xScale, yScale)\n              ];\n  \n  // append the 3 lines to the svg\n  let index = 0;\n\n  coords.forEach(line => {\n    let [x_coords, y_coords] = [line[0], line[1]];\n    svg.append(\"line\")\n       .attr(\"clip-path\",\"url(#clip)\")\n       .attr(\"x1\", xScale(x_coords[0]))\n       .attr(\"y1\", yScale(y_coords[0]))\n       .attr(\"x2\", xScale(x_coords[1]))\n       .attr(\"y2\", yScale(y_coords[1]))  \n       .attr(\"id\", function (d) { return divid+\"___diag_quartile_\" + index;})\n       .attr(\"stroke\", \"#0A58A2\")\n       .attr(\"stroke-width\",3)\n       .style(\"stroke-dasharray\", (\"20, 5\"))\n       .style(\"opacity\", 0.4)\n\n    // svg.append(\"text\")\n    // .attr(\"x\", xScale(0.56))\n    // .attr(\"y\", yScale(0.86))\n    // .style(\"opacity\", 0.4)\n    // .style(\"font-size\", \"40px\")\n    // .style(\"fill\", \"#0A58A2\")\n    // .text(\"num\");\n\n    svg.append(\"clipPath\")\n       .attr(\"id\", \"clip\")\n       .append(\"rect\")\n       .attr(\"width\", width)\n       .attr(\"height\", height);\n\n    index += 1;\n  });\n\n  //the tranformation to tabular format is done only if there are any table elements in the html file\n  if (transform_to_table == true) {\n    transform_diag_classif_to_table(tools_not_hidden, first_quartile, second_quartile, third_quartile, divid);\n  };\n\n};\n\nfunction transform_diag_classif_to_table(data, first_quartile, second_quartile, third_quartile, divid){\n\n  data.forEach(function(element) {\n\n    if (element['score'] > first_quartile){\n          element['quartile'] = 1;\n    }else if ( element['score'] > second_quartile && element['score'] <= first_quartile){\n          element['quartile'] = 2;\n    }else if ( element['score'] > third_quartile && element['score'] <= second_quartile){\n          element['quartile'] = 3;\n    }else if (element['score'] <= third_quartile){\n          element['quartile'] = 4;\n    }\n  });\n\n  fill_in_table (divid, data);\n  set_cell_colors();\n\n};\n\nfunction normalize_data(x_values, y_values){\n\n  let maxX = Math.max.apply(null, x_values);\n  let maxY = Math.max.apply(null, y_values);\n  \n  let x_norm = x_values.map(function(e) {  \n    return e / maxX;\n  });\n\n  let y_norm = y_values.map(function(e) {  \n    return e / maxY;\n  });\n\n  return [x_norm, y_norm];\n};\n\nfunction get_diagonal_line(scores, scores_coords, quartile, better, max_x, max_y,svg, xScale, yScale){\n\n  let target;\n  for (let i = 0; i < scores.length; i++) {\n    // # find out which are the two points that contain the percentile value\n    \n    if (scores[i] <= quartile){\n        target = [[scores_coords[scores[i - 1]][0], scores_coords[scores[i - 1]][1]],\n                  [scores_coords[scores[i]][0], scores_coords[scores[i]][1]]];\n        break;\n    };\n  };\n  // # get the the mid point between the two, where the quartile line will pass\n  let half_point = [(target[0][0] + target[1][0]) / 2, (target[0][1] + target[1][1]) / 2];\n\n  // # draw the line depending on which is the optimal corner\n  let x_coords;\n  let y_coords;\n  if (better == \"bottom-right\"){\n       x_coords = [half_point[0] - max_x, half_point[0] + max_x];\n       y_coords = [half_point[1] - max_y, half_point[1] + max_y];\n  } else if (better == \"top-right\"){\n       x_coords = [half_point[0] + max_x, half_point[0] - max_x];\n       y_coords = [half_point[1] - max_y, half_point[1] + max_y];   \n  };\n\n  return [x_coords, y_coords];\n};\n\nfunction remove_hidden_tools(data, removed_tools){\n  // remove from the data array the participants that the user has hidden (removed_tools)\n  // create a new array where the tools that have not been hidden will be stored\n  let tools_not_hidden = [];\n  data.forEach(element => {\n    let index = jquery__WEBPACK_IMPORTED_MODULE_2___default.a.inArray(element.toolname, removed_tools);\n    if (index == -1){\n      tools_not_hidden.push(element);\n    }\n  });\n\n  return tools_not_hidden;\n\n};\n\nfunction fill_in_table (divid, data){\n  //create table dinamically\n  var table = document.getElementById(divid + \"_table\");\n  var row = table.insertRow(-1);\n  row.insertCell(0).innerHTML = \"<b>TOOL</b>\";\n  row.insertCell(1).innerHTML = \"<b>QUARTILE</b>\";\n\n  data.forEach(function(element) {\n    var row = table.insertRow(-1);\n    row.insertCell(0).innerHTML = element[\"toolname\"];\n    row.insertCell(1).innerHTML = element[\"quartile\"];\n  });\n\n};\n\nfunction set_cell_colors(){\n\n  var cell = jquery__WEBPACK_IMPORTED_MODULE_2___default()('td'); \n\n  cell.each(function() { //loop through all td elements ie the cells\n\n    var cell_value = jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).html(); //get the value\n\n    if (cell_value == 1) { //if then for if value is 1\n      jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).css({'background' : '#238b45'});   // changes td to red.\n    } else if (cell_value == 2) {\n      jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).css({'background' : '#74c476'}); \n    } else if (cell_value == 3) {\n      jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).css({'background' : '#bae4b3'}); \n    } else if (cell_value == 4) {\n      jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).css({'background' : '#edf8e9'}); \n    } else {\n      jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).css({'background' : '#ffffff'});\n    };\n\n  });\n\n};\n\n\n\nloadurl();\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYXBwLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2FwcC5qcz8xMTEyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGQzIGZyb20gJ2QzJztcbmltcG9ydCAnLi9hcHAuY3NzJztcbmltcG9ydCAkIGZyb20gXCJqcXVlcnlcIjtcbmltcG9ydCAqIGFzIHBmIGZyb20gJ3BhcmV0by1mcm9udGllcic7XG5cblxuLy8gLi9ub2RlX21vZHVsZXMvLmJpbi93ZWJwYWNrLWNsaSBzcmMvYXBwLmpzIC0tb3V0cHV0PWJ1aWxkL2J1aWxkLmpzIC1kIC13XG5cblxubGV0IE1BSU5fREFUQSA9IHt9O1xuXG5cbmZ1bmN0aW9uIGxvYWR1cmwoKXtcbiAgICBsZXQgZGl2aWQ7XG4gICAgXG4gICAgbGV0IGNoYXJ0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJiZW5jaG1hcmtpbmdDaGFydFwiKTtcbiAgICAgXG4gICAgbGV0IGkgPSAwO1xuICAgIGxldCBkYXRhSWQ7XG4gICAgbGV0IHk7XG4gICAgXG4gICAgLy8gYXBwZW5kIGlkcyB0byBjaGFydC9zIGFuZCBtYWtlIGQzIHBsb3RcbiAgICBpID0gMFxuICAgIGZvcih5IG9mIGNoYXJ0cyl7XG4gICAgICAvLyBnZXQgYmVuY2htYXJraW5nIGV2ZW50IGlkXG4gICAgICBkYXRhSWQgPSB5LmdldEF0dHJpYnV0ZSgnZGF0YS1pZCcpO1xuICAgICAgLy9zZXQgY2hhcnQgaWRcbiAgICAgIGRpdmlkID0gKGRhdGFJZCtpKS5yZXBsYWNlKFwiOlwiLFwiX1wiKTtcbiAgICAgIHkuaWQ9ZGl2aWQ7XG5cbiAgICAgIC8vIGFwcGVuZCBidXR0b25zXG4gICAgICBsZXQgYnV0dG9uMV9pZCA9IGRpdmlkICsgXCJfX25vbmVcIjtcbiAgICAgIGxldCBidXR0b24yX2lkID0gZGl2aWQgKyBcIl9fc3F1YXJlc1wiO1xuICAgICAgbGV0IGJ1dHRvbjNfaWQgPSBkaXZpZCArIFwiX19kaWFnb25hbHNcIjtcbiAgICAgIFxuICAgICAgLy8gYXBwZW5kIHNlbGVjdGlvbiBsaXN0IHRvb2x0aXAgY29udGFpbmVyXG4gICAgICBkMy5zZWxlY3QoJyMnK2RpdmlkKS5hcHBlbmQoXCJkaXZcIilcbiAgICAgICAgLmF0dHIoXCJpZFwiLCBcInRvb2x0aXBfY29udGFpbmVyXCIpXG5cbiAgICAgIGxldCBzZWxlY3RfbGlzdCA9IGQzLnNlbGVjdCgnIycrZGl2aWQpLmFwcGVuZChcImZvcm1cIikuYXBwZW5kKFwic2VsZWN0XCIpXG4gICAgICAuYXR0cihcImNsYXNzXCIsXCJjbGFzc2lmaWNhdG9yc19saXN0XCIpXG4gICAgICAuYXR0cihcImlkXCIsZGl2aWQgKyBcIl9kcm9wZG93bl9saXN0XCIpXG4gICAgICAuYXBwZW5kKFwib3B0Z3JvdXBcIilcbiAgICAgIC5hdHRyKFwibGFiZWxcIixcIlNlbGVjdCBhIGNsYXNzaWZpY2F0aW9uIG1ldGhvZDpcIik7XG5cbiAgICAgIHNlbGVjdF9saXN0LmFwcGVuZChcIm9wdGlvblwiKVxuICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcInNlbGVjdGlvbl9vcHRpb25cIilcbiAgICAgIC5hdHRyKFwiaWRcIiwgYnV0dG9uMV9pZClcbiAgICAgIC5hdHRyKFwidGl0bGVcIiwgXCJTaG93IG9ubHkgcmF3IGRhdGFcIilcbiAgICAgIC5hdHRyKFwic2VsZWN0ZWRcIixcImRpc2FibGVkXCIpXG4gICAgICAuYXR0cihcImRhdGEtdG9nZ2xlXCIsIFwibGlzdF90b29sdGlwXCIpXG4gICAgICAuYXR0cihcImRhdGEtY29udGFpbmVyXCIsIFwiI3Rvb2x0aXBfY29udGFpbmVyXCIpIFxuICAgICAgLnRleHQoXCJOTyBDTEFTU0lGSUNBVElPTlwiKVxuICAgICAgLm9uKCdjbGljaycsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgb25RdWFydGlsZUNoYW5nZSh0aGlzLmlkKTtcbiAgICAgIH0pO1xuICAgICAgc2VsZWN0X2xpc3QuYXBwZW5kKFwib3B0aW9uXCIpXG4gICAgICAuYXR0cihcImNsYXNzXCIsIFwic2VsZWN0aW9uX29wdGlvblwiKVxuICAgICAgLmF0dHIoXCJpZFwiLCBidXR0b24yX2lkKVxuICAgICAgLmF0dHIoXCJ0aXRsZVwiLCBcIkFwcGx5IHNxdWFyZSBxdWFydGlsZXMgY2xhc3NpZmljYXRpb24gbWV0aG9kIChiYXNlZCBvbiB0aGUgMC41IHF1YXJ0aWxlIG9mIHRoZSBYIGFuZCBZIG1ldHJpY3MpXCIpXG4gICAgICAuYXR0cihcImRhdGEtdG9nZ2xlXCIsIFwibGlzdF90b29sdGlwXCIpXG4gICAgICAuYXR0cihcImRhdGEtY29udGFpbmVyXCIsIFwiI3Rvb2x0aXBfY29udGFpbmVyXCIpIFxuICAgICAgLnRleHQoXCJTUVVBUkUgUVVBUlRJTEVTXCIpXG4gICAgICAub24oJ2NsaWNrJywgZnVuY3Rpb24oZCkge1xuICAgICAgICBvblF1YXJ0aWxlQ2hhbmdlKHRoaXMuaWQpO1xuICAgICAgfSk7XG4gICAgICBzZWxlY3RfbGlzdC5hcHBlbmQoXCJvcHRpb25cIilcbiAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJzZWxlY3Rpb25fb3B0aW9uXCIpXG4gICAgICAuYXR0cihcImlkXCIsIGJ1dHRvbjNfaWQpXG4gICAgICAuYXR0cihcInRpdGxlXCIsIFwiQXBwbHkgZGlhZ29uYWwgcXVhcnRpbGVzIGNsYXNzaWZjYXRpb24gbWV0aG9kIChiYXNlZCBvbiB0aGUgYXNzaWdubWVudCBvZiBhIHNjb3JlIHRvIGVhY2ggcGFydGljaXBhbnQgcHJvY2VlZGluZyBmcm9tIGl0cyBkaXN0YW5jZSB0byB0aGUgJ29wdGltYWwgcGVyZm9ybWFuY2UnIGNvcm5lcilcIilcbiAgICAgIC5hdHRyKFwiZGF0YS10b2dnbGVcIiwgXCJsaXN0X3Rvb2x0aXBcIilcbiAgICAgIC5hdHRyKFwiZGF0YS1jb250YWluZXJcIiwgXCIjdG9vbHRpcF9jb250YWluZXJcIikgXG4gICAgICAudGV4dChcIkRJQUdPTkFMIFFVQVJUSUxFU1wiKVxuICAgICAgLm9uKCdjbGljaycsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgb25RdWFydGlsZUNoYW5nZSh0aGlzLmlkKTtcbiAgICAgIH0pO1xuICAgICBcbiAgICAgIGxldCB1cmwgPSBcImh0dHBzOi8vZGV2LW9wZW5lYmVuY2guYnNjLmVzL2FwaS9zY2llbnRpZmljL0RhdGFzZXQvP3F1ZXJ5PVwiICsgZGF0YUlkICsgXCImZm10PWpzb25cIjtcbiAgICAgIGdldF9kYXRhKHVybCxkaXZpZCk7IFxuXG4gICAgICAvLyAkKCdbZGF0YS10b2dnbGU9XCJsaXN0X3Rvb2x0aXBcIl0nKS50b29sdGlwKCk7XG5cbiAgICAgIC8vY2hlY2sgdGhlIHRyYW5zZm9ybWF0aW9uIHRvIHRhYmxlIGF0dHJpYnV0ZSBhbmQgYXBwZW5kIHRhYmxlIHRvIGh0bWxcbiAgICAgIGlmICh5LmdldEF0dHJpYnV0ZSgndG9UYWJsZScpID09IFwidHJ1ZVwiKXtcbiAgICAgICAgbGV0IHRhYmxlX2lkID0gZGl2aWQgKyBcIl90YWJsZVwiO1xuICAgICAgICB2YXIgaW5wdXQgPSAkKCc8YnI+PGJyPjx0YWJsZSBpZD1cIicrdGFibGVfaWQrJ1wiIGRhdGEtaWQ9XCInK2RhdGFJZCsnXCIgY2xhc3M9XCJiZW5jaG1hcmtpbmdUYWJsZVwiPjwvdGFibGU+Jyk7XG4gICAgICAgICQoXCIjXCIgKyBkaXZpZCkuYXBwZW5kKGlucHV0KTtcbiAgICAgIH07XG4gICAgICAgICAgICBcbiAgICAgIGkrKztcbiAgICB9XG4gICAgICAgIFxuICAgIFxuICAgICAgIFxufTtcblxuXG5cbmZ1bmN0aW9uIGdldF9kYXRhKHVybCxkaXZpZCl7XG5cbiAgZmV0Y2hVcmwodXJsKS50aGVuKHJlc3VsdHMgPT4ge1xuICAgIGpvaW5fYWxsX2pzb24ocmVzdWx0cy5EYXRhc2V0LGRpdmlkKTtcbiAgfSlcblxufTtcblxuYXN5bmMgZnVuY3Rpb24gZmV0Y2hVcmwodXJsKSB7XG5cbiAgdHJ5IHtcbiAgICBsZXQgcmVxdWVzdCA9IGF3YWl0IGZldGNoKHVybCk7XG4gICAgbGV0IHJlc3VsdCA9IGF3YWl0IHJlcXVlc3QudGV4dCgpO1xuICAgICAgcmV0dXJuIEpTT04ucGFyc2UocmVzdWx0KTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5sb2coYEludmFsaWQgVXJsIEVycm9yOiAke2Vyci5zdGFja30gYCk7XG4gICAgfVxuXG59O1xuXG5mdW5jdGlvbiBqb2luX2FsbF9qc29uKGFycmF5LGRpdmlkKXtcbiAgdHJ5e1xuICAgIGxldCBmdWxsX2pzb24gID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykge1xuICAgICAgICBsZXQgam8gPSB7fTtcbiAgICAgICAgam9bJ3Rvb2xuYW1lJ10gPSBhcnJheVtpXS5uYW1lLnNwbGl0KCcuJylbMF07XG4gICAgICAgIGpvWyd4J10gPSBhcnJheVtpXS5tZXRyaWNzWzBdLnJlc3VsdC52YWx1ZTtcbiAgICAgICAgam9bJ3knXSA9IGFycmF5W2ldLm1ldHJpY3NbMV0ucmVzdWx0LnZhbHVlO1xuICAgICAgICBqb1snZSddID0gYXJyYXlbaV0ubWV0cmljc1syXS5yZXN1bHQudmFsdWU7XG4gICAgICAgIGZ1bGxfanNvbi5wdXNoKGpvKTsgICAgXG4gICAgfVxuXG4gICAgTUFJTl9EQVRBW2RpdmlkXSA9IGZ1bGxfanNvbjtcbiAgICAvLyBieSBkZWZhdWx0LCBubyBjbGFzc2lmaWNhdGlvbiBtZXRob2QgaXMgYXBwbGllZC4gaXQgaXMgdGhlIGZpcnN0IGl0ZW0gaW4gdGhlIHNlbGVjdGlvbiBsaXN0XG4gICAgdmFyIGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChkaXZpZCArIFwiX2Ryb3Bkb3duX2xpc3RcIik7XG4gICAgbGV0IGNsYXNzaWZpY2F0aW9uX3R5cGUgPSBlLm9wdGlvbnNbZS5zZWxlY3RlZEluZGV4XS5pZDtcblxuICAgIGNyZWF0ZUNoYXJ0KGZ1bGxfanNvbixkaXZpZCwgY2xhc3NpZmljYXRpb25fdHlwZSk7XG4gIH1jYXRjaChlcnIpe1xuICAgIGNvbnNvbGUubG9nKGBJbnZhbGlkIFVybCBFcnJvcjogJHtlcnIuc3RhY2t9IGApO1xuICB9XG5cbiAgICBcbn07XG5cbmZ1bmN0aW9uIG9uUXVhcnRpbGVDaGFuZ2UoSUQpeyAgXG4gIFxuICB2YXIgY2hhcnRfaWQgPSBJRC5zcGxpdChcIl9fXCIpWzBdO1xuICAvLyBjb25zb2xlLmxvZyhkMy5zZWxlY3QoJyMnKydzdmdfJytjaGFydF9pZCkpO1xuICBkMy5zZWxlY3QoJyMnKydzdmdfJytjaGFydF9pZCkucmVtb3ZlKCk7XG4gIGxldCBjbGFzc2lmaWNhdGlvbl90eXBlID0gSUQ7XG4gIGNyZWF0ZUNoYXJ0KE1BSU5fREFUQVtjaGFydF9pZF0sY2hhcnRfaWQsIGNsYXNzaWZpY2F0aW9uX3R5cGUpO1xufTtcblxuZnVuY3Rpb24gY29tcHV0ZV9jbGFzc2lmaWNhdGlvbihkYXRhLCBzdmcsIHhTY2FsZSwgeVNjYWxlLCBkaXYsIHdpZHRoLCBoZWlnaHQsIHJlbW92ZWRfdG9vbHMsZGl2aWQsIGNsYXNzaWZpY2F0aW9uX3R5cGUpIHtcblxuICBsZXQgdHJhbnNmb3JtX3RvX3RhYmxlOyAvL3RoaXMgdmFyaWFibGUgaXMgc2V0IHRvIHRydWUgaWYgdGhlcmUgYXJlIHRhYmxlIGVsZW1lbnRzIHdpdGggdGhlIGNvcnJlc3BvbmRlbiBkaXZpZCBpbiB0aGUgaHRtbCBmaWxlXG4gIC8vIGV2ZXJ5IHRpbWUgYSBuZXcgY2xhc3NpZmljYXRpb24gaXMgY29tcHV0ZSB0aGUgcHJldmlvdXMgcmVzdWx0cyB0YWJsZSBpcyBkZWxldGVkIChpZiBpdCBleGlzdHMpXG4gIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChkaXZpZCArIFwiX3RhYmxlXCIpICE9IG51bGwpIHtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChkaXZpZCArIFwiX3RhYmxlXCIpLmlubmVySFRNTCA9ICcnO1xuICAgIHRyYW5zZm9ybV90b190YWJsZSA9IHRydWU7XG4gIH07XG5cbiAgbGV0IGJldHRlciA9IFwidG9wLXJpZ2h0XCI7XG4gIGlmIChjbGFzc2lmaWNhdGlvbl90eXBlID09ICggZGl2aWQgKyBcIl9fc3F1YXJlc1wiKSkge1xuICAgIGRyYXdfcGFyZXRvKGRhdGEsIHN2ZywgeFNjYWxlLCB5U2NhbGUsIGRpdiwgd2lkdGgsIGhlaWdodCwgcmVtb3ZlZF90b29scyxkaXZpZCwgYmV0dGVyKTtcbiAgICBnZXRfc3F1YXJlX3F1YXJ0aWxlcyhkYXRhLCBzdmcsIHhTY2FsZSwgeVNjYWxlLCBkaXYsIHJlbW92ZWRfdG9vbHMsYmV0dGVyLGRpdmlkLCB0cmFuc2Zvcm1fdG9fdGFibGUpO1xuICAgIGFwcGVuZF9xdWFydGlsZV9udW1iZXJzX3RvX3Bsb3QgKHN2ZywgeFNjYWxlLCB5U2NhbGUsIGJldHRlcixkaXZpZCk7XG4gIH0gIFxuICBlbHNlIGlmIChjbGFzc2lmaWNhdGlvbl90eXBlID09IChkaXZpZCArIFwiX19kaWFnb25hbHNcIikpIHtcbiAgICBkcmF3X3BhcmV0byhkYXRhLCBzdmcsIHhTY2FsZSwgeVNjYWxlLCBkaXYsIHdpZHRoLCBoZWlnaHQsIHJlbW92ZWRfdG9vbHMsZGl2aWQsIGJldHRlcik7XG4gICAgZ2V0X2RpYWdvbmFsX3F1YXJ0aWxlcyhkYXRhLCBzdmcsIHhTY2FsZSwgeVNjYWxlLCBkaXYsIHdpZHRoLCBoZWlnaHQsIHJlbW92ZWRfdG9vbHMsIGJldHRlcixkaXZpZCwgdHJhbnNmb3JtX3RvX3RhYmxlKTtcbiAgfSBlbHNlIHtcbiAgICBkcmF3X3BhcmV0byhkYXRhLCBzdmcsIHhTY2FsZSwgeVNjYWxlLCBkaXYsIHdpZHRoLCBoZWlnaHQsIHJlbW92ZWRfdG9vbHMsZGl2aWQsIGJldHRlcik7XG4gIH1cbiAgXG59O1xuXG5mdW5jdGlvbiBjb21wdXRlX2NoYXJ0X2hlaWdodChkYXRhKXtcblxuICBpZiAoZGF0YS5sZW5ndGglNSA9PSAwKXtcbiAgICByZXR1cm4gKDQwICsgKDIwICogKE1hdGgudHJ1bmMoZGF0YS5sZW5ndGgvNSkpKSk7XG4gIH0gZWxzZSBpZiAoZGF0YS5sZW5naHQlNSAhPSAwKSB7XG4gICAgcmV0dXJuICg0MCArICgyMCAqIChNYXRoLnRydW5jKGRhdGEubGVuZ3RoLzUpKzEpKSk7XG4gIH0gXG4gIFxufTtcblxuZnVuY3Rpb24gY3JlYXRlQ2hhcnQgKGRhdGEsZGl2aWQsIGNsYXNzaWZpY2F0aW9uX3R5cGUpe1xuICAvLyBjb25zb2xlLmxvZyhkYXRhKVxuICBsZXQgbWFyZ2luID0ge3RvcDogMjAsIHJpZ2h0OiA0MCwgYm90dG9tOiBjb21wdXRlX2NoYXJ0X2hlaWdodChkYXRhKSwgbGVmdDogNDB9LFxuICAgIHdpZHRoID0gMTIwMCAtIG1hcmdpbi5sZWZ0IC0gbWFyZ2luLnJpZ2h0LFxuICAgIGhlaWdodCA9IDUwMCAtIG1hcmdpbi50b3AgLSBtYXJnaW4uYm90dG9tO1xuXG5cbiAgbGV0IHhTY2FsZSA9IGQzLnNjYWxlTGluZWFyKClcbiAgICAucmFuZ2UoWzAsIHdpZHRoXSlcbiAgICAuZG9tYWluKFtkMy5taW4oZGF0YSwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZC54OyB9KSwgZDMubWF4KGRhdGEsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQueDsgfSldKS5uaWNlKCk7XG5cbiAgbGV0IG1pbl95ID0gZDMubWluKGRhdGEsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQueTsgfSk7XG4gIGxldCBtYXhfeSA9IGQzLm1heChkYXRhLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLnk7IH0pO1xuICBsZXQgeVNjYWxlID0gZDMuc2NhbGVMaW5lYXIoKVxuICAgIC5yYW5nZShbaGVpZ2h0LCAwXSlcbiAgICAuZG9tYWluKFttaW5feSAtIDAuMyoobWF4X3ktbWluX3kpLCBtYXhfeSArIDAuMyoobWF4X3ktbWluX3kpXSkubmljZSgpO1xuXG4gIGxldCB4QXhpcyA9IGQzLmF4aXNCb3R0b20oeFNjYWxlKS50aWNrcygxMiksXG4gICAgICB5QXhpcyA9IGQzLmF4aXNMZWZ0KHlTY2FsZSkudGlja3MoMTIgKiBoZWlnaHQgLyB3aWR0aCk7XG5cbiAgbGV0IGxpbmUgPSBkMy5saW5lKClcbiAgICAueChmdW5jdGlvbihkKSB7XG4gICAgICByZXR1cm4geFNjYWxlKGQueCk7XG4gICAgfSlcbiAgICAueShmdW5jdGlvbihkKSB7XG4gICAgICByZXR1cm4geVNjYWxlKGQueSk7XG4gICAgfSk7XG5cbiAgLy8gRGVmaW5lIHRoZSBkaXYgZm9yIHRoZSB0b29sdGlwXG5cbiAgbGV0IGRpdiA9IGQzLnNlbGVjdCgnIycrZGl2aWQpLmFwcGVuZChcImRpdlwiKS5hdHRyKFwiY2xhc3NcIiwgXCJiZW5jaG1hcmtfdG9vbHRpcFwiKS5zdHlsZShcIm9wYWNpdHlcIiwgMCk7XG5cbiAgLy8gYXBwZW5kIHRoZSBzdmcgZWxlbWVudFxuICAvLyBkMy5zZWxlY3QoXCJzdmdcIikucmVtb3ZlKClcbiAgICAvLyBjb25zb2xlLmxvZyhkMy5zZWxlY3QoXCJzdmdcIikucmVtb3ZlKCkpO1xuXG4gIGxldCBzdmcgPSBkMy5zZWxlY3QoJyMnK2RpdmlkKS5hcHBlbmQoXCJzdmdcIilcbiAgICAuYXR0cihcImNsYXNzXCIsIFwiYmVuY2htYXJraW5nU1ZHXCIpXG4gICAgLmF0dHIoJ2lkJywnc3ZnXycrZGl2aWQpXG4gICAgLmF0dHIoXCJ3aWR0aFwiLCB3aWR0aCArIG1hcmdpbi5sZWZ0ICsgbWFyZ2luLnJpZ2h0KVxuICAgIC5hdHRyKFwiaGVpZ2h0XCIsIGhlaWdodCArIG1hcmdpbi50b3AgKyBtYXJnaW4uYm90dG9tKVxuICAgIC5hcHBlbmQoXCJnXCIpXG4gICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyBtYXJnaW4ubGVmdCArIFwiLFwiICsgbWFyZ2luLnRvcCArIFwiKVwiKTtcbiAgICBcbiAgc3ZnLmFwcGVuZChcImdcIikuYXBwZW5kKFwicmVjdFwiKS5hdHRyKFwid2lkdGhcIiwgd2lkdGgpLmF0dHIoXCJoZWlnaHRcIiwgaGVpZ2h0KS5hdHRyKFwiY2xhc3NcIiwgXCJwbG90LWJnXCIpO1xuXG4gIC8vIEFkZCBBeGlzIGxhYmVsc1xuICBzdmcuYXBwZW5kKFwiZ1wiKS5hdHRyKFwiY2xhc3NcIiwgXCJheGlzIGF4aXMtLXhcIilcbiAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIDAgKyBcIixcIiArIGhlaWdodCArIFwiKVwiKVxuICAgIC5jYWxsKHhBeGlzKTtcblxuICBzdmcuYXBwZW5kKFwiZ1wiKS5hdHRyKFwiY2xhc3NcIiwgXCJheGlzIGF4aXMtLXlcIikuY2FsbCh5QXhpcyk7XG4gIFxuICAvLyBhZGQgWCBhbmQgWSBHcmlkbGluZXNcbiAgdmFyIGdyaWRsaW5lc194ID0gZDMuYXhpc0JvdHRvbSgpXG4gICAgICAgICAgICAgICAgICAgIC50aWNrcygxMilcbiAgICAgICAgICAgICAgICAgICAgLnRpY2tGb3JtYXQoXCJcIilcbiAgICAgICAgICAgICAgICAgICAgLnRpY2tTaXplKGhlaWdodClcbiAgICAgICAgICAgICAgICAgICAgLnNjYWxlKHhTY2FsZSk7XG5cbiAgdmFyIGdyaWRsaW5lc195ID0gZDMuYXhpc0xlZnQoKVxuICAgICAgICAgICAgICAgICAgICAudGlja3MoMTIgKiBoZWlnaHQgLyB3aWR0aClcbiAgICAgICAgICAgICAgICAgICAgLnRpY2tGb3JtYXQoXCJcIilcbiAgICAgICAgICAgICAgICAgICAgLnRpY2tTaXplKC13aWR0aClcbiAgICAgICAgICAgICAgICAgICAgLnNjYWxlKHlTY2FsZSk7XG5cbiAgc3ZnLmFwcGVuZChcImdcIilcbiAgICAgLmF0dHIoXCJjbGFzc1wiLCBcImJlbmNoX2dyaWRcIilcbiAgICAgLmNhbGwoZ3JpZGxpbmVzX3gpO1xuICBcbiAgICAgc3ZnLmFwcGVuZChcImdcIilcbiAgICAgLmF0dHIoXCJjbGFzc1wiLCBcImJlbmNoX2dyaWRcIilcbiAgICAgLmNhbGwoZ3JpZGxpbmVzX3kpO1xuICAgICAgICAgXG4gIGxldCByZW1vdmVkX3Rvb2xzID0gW107IC8vIHRoaXMgYXJyYXkgc3RvcmVzIHRoZSB0b29scyB3aGVuIHRoZSB1c2VyIGNsaWNrcyBvbiB0aGVtXG5cbiAgIC8vIHNldHVwIGZpbGwgY29sb3JcbiAgbGV0IGNWYWx1ZV9mdW5jID0gZnVuY3Rpb24oZCkge1xuICAgIHJldHVybiBkLnRvb2xuYW1lO1xuICB9LFxuICBjb2xvcl9mdW5jID0gZDMuc2NhbGVPcmRpbmFsKGQzLnNjaGVtZVNldDEuY29uY2F0KGQzLnNjaGVtZVNldDMpKTtcblxuICBhcHBlbmRfZG90c19lcnJvYmFycyAoc3ZnLCBkYXRhLCB4U2NhbGUsIHlTY2FsZSwgZGl2LCBjVmFsdWVfZnVuYywgY29sb3JfZnVuYyxkaXZpZCk7XG5cbiAgZHJhd19sZWdlbmQgKGRhdGEsIHN2ZywgeFNjYWxlLCB5U2NhbGUsIGRpdiwgd2lkdGgsIGhlaWdodCwgcmVtb3ZlZF90b29scywgY29sb3JfZnVuYywgY29sb3JfZnVuYy5kb21haW4oKSwgbWFyZ2luLGRpdmlkLGNsYXNzaWZpY2F0aW9uX3R5cGUpO1xuXG4gICAgY29tcHV0ZV9jbGFzc2lmaWNhdGlvbihkYXRhLCBzdmcsIHhTY2FsZSwgeVNjYWxlLCBkaXYsIHdpZHRoLCBoZWlnaHQsIHJlbW92ZWRfdG9vbHMsZGl2aWQsIGNsYXNzaWZpY2F0aW9uX3R5cGUpO1xuXG59O1xuXG5mdW5jdGlvbiBhcHBlbmRfZG90c19lcnJvYmFycyAoc3ZnLCBkYXRhLCB4U2NhbGUsIHlTY2FsZSwgZGl2LCBjVmFsdWUsIGNvbG9yLGRpdmlkKXtcblxuICAvLyBBZGQgRXJyb3IgTGluZVxuICBzdmcuYXBwZW5kKFwiZ1wiKS5zZWxlY3RBbGwoXCJsaW5lXCIpXG4gICAgICAuZGF0YShkYXRhKS5lbnRlcigpXG4gICAgICAuYXBwZW5kKFwibGluZVwiKVxuICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcImVycm9yLWxpbmVcIilcbiAgICAgIC5hdHRyKFwiaWRcIiwgZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGRpdmlkK1wiX19fbGluZVwiK2QudG9vbG5hbWUucmVwbGFjZSgvW1xcLiAoKS8tXS9nLCBcIl9cIik7fSlcbiAgICAgIC5hdHRyKFwieDFcIiwgZnVuY3Rpb24oZCkge1xuICAgICAgICByZXR1cm4geFNjYWxlKGQueCk7XG4gICAgICB9KVxuICAgICAgLmF0dHIoXCJ5MVwiLCBmdW5jdGlvbihkKSB7XG4gICAgICAgIHJldHVybiB5U2NhbGUoZC55ICsgZC5lKTtcbiAgICAgIH0pXG4gICAgICAuYXR0cihcIngyXCIsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgcmV0dXJuIHhTY2FsZShkLngpO1xuICAgICAgfSlcbiAgICAgIC5hdHRyKFwieTJcIiwgZnVuY3Rpb24oZCkge1xuICAgICAgICByZXR1cm4geVNjYWxlKGQueSAtIGQuZSk7XG4gICAgICB9KTtcblxuICAvLyBBZGQgRXJyb3IgVG9wIENhcFxuICBzdmcuYXBwZW5kKFwiZ1wiKS5zZWxlY3RBbGwoXCJsaW5lXCIpXG4gICAgICAuZGF0YShkYXRhKS5lbnRlcigpXG4gICAgICAuYXBwZW5kKFwibGluZVwiKVxuICAgICAgLmF0dHIoXCJpZFwiLCBmdW5jdGlvbiAoZCkgeyByZXR1cm4gZGl2aWQrXCJfX190b3BcIitkLnRvb2xuYW1lLnJlcGxhY2UoL1tcXC4gKCkvLV0vZywgXCJfXCIpO30pXG4gICAgICAuYXR0cihcImNsYXNzXCIsIFwiZXJyb3ItY2FwXCIpXG4gICAgICAuYXR0cihcIngxXCIsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgcmV0dXJuIHhTY2FsZShkLngpIC0gNDtcbiAgICAgIH0pXG4gICAgICAuYXR0cihcInkxXCIsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgcmV0dXJuIHlTY2FsZShkLnkgKyBkLmUpO1xuICAgICAgfSlcbiAgICAgIC5hdHRyKFwieDJcIiwgZnVuY3Rpb24oZCkge1xuICAgICAgICByZXR1cm4geFNjYWxlKGQueCkgKyA0O1xuICAgICAgfSlcbiAgICAgIC5hdHRyKFwieTJcIiwgZnVuY3Rpb24oZCkge1xuICAgICAgICByZXR1cm4geVNjYWxlKGQueSArIGQuZSk7XG4gICAgICB9KTtcblxuICAvLyBBZGQgRXJyb3IgQm90dG9tIENhcFxuICBzdmcuYXBwZW5kKFwiZ1wiKS5zZWxlY3RBbGwoXCJsaW5lXCIpXG4gICAgICAuZGF0YShkYXRhKS5lbnRlcigpXG4gICAgICAuYXBwZW5kKFwibGluZVwiKVxuICAgICAgLmF0dHIoXCJpZFwiLCBmdW5jdGlvbiAoZCkgeyByZXR1cm4gZGl2aWQrXCJfX19ib3R0b21cIitkLnRvb2xuYW1lLnJlcGxhY2UoL1tcXC4gKCkvLV0vZywgXCJfXCIpO30pXG4gICAgICAuYXR0cihcImNsYXNzXCIsIFwiZXJyb3ItY2FwXCIpXG4gICAgICAuYXR0cihcIngxXCIsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgcmV0dXJuIHhTY2FsZShkLngpIC0gNDtcbiAgICAgIH0pXG4gICAgICAuYXR0cihcInkxXCIsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgcmV0dXJuIHlTY2FsZShkLnkgLSBkLmUpO1xuICAgICAgfSlcbiAgICAgIC5hdHRyKFwieDJcIiwgZnVuY3Rpb24oZCkge1xuICAgICAgICByZXR1cm4geFNjYWxlKGQueCkgKyA0O1xuICAgICAgfSlcbiAgICAgIC5hdHRyKFwieTJcIiwgZnVuY3Rpb24oZCkge1xuICAgICAgICByZXR1cm4geVNjYWxlKGQueSAtIGQuZSk7XG4gICAgICB9KTtcblxuICAvLyBhZGQgZG90c1xuICBsZXQgc3ltYm9sID0gZDMuc3ltYm9sKCk7XG5cbiAgbGV0IGZvcm1hdENvbW1hID0gZDMuZm9ybWF0KFwiLFwiKTtcbiAgbGV0IGZvcm1hdERlY2ltYWwgPSBkMy5mb3JtYXQoXCIuNGZcIik7XG5cbiAgbGV0IGRvdHMgPXN2Zy5zZWxlY3RBbGwoXCIuZG90c1wiKVxuICAgIC5kYXRhKGRhdGEpXG4gICAgLmVudGVyKClcbiAgICAuYXBwZW5kKFwicGF0aFwiKVxuICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJiZW5jaG1hcmtfcGF0aFwiKTtcbiAgICBcbiAgZG90cy5hdHRyKFwiZFwiLCBzeW1ib2wudHlwZShmdW5jdGlvbigpe3JldHVybiBkMy5zeW1ib2xTcXVhcmV9KSlcbiAgICAgIC5hdHRyKFwiaWRcIiwgZnVuY3Rpb24gKGQpIHsgIHJldHVybiBkaXZpZCtcIl9fX1wiK2QudG9vbG5hbWUucmVwbGFjZSgvW1xcLiAoKS8tXS9nLCBcIl9cIik7fSlcbiAgICAgIC5hdHRyKFwiY2xhc3NcIixcImxpbmVcIilcbiAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLGZ1bmN0aW9uKGQpeyByZXR1cm4gXCJ0cmFuc2xhdGUoXCIreFNjYWxlKGQueCkrXCIsXCIreVNjYWxlKGQueSkrXCIpXCI7IH0pXG4gICAgICAuYXR0cihcInJcIiwgNilcbiAgICAgIC5zdHlsZShcImZpbGxcIiwgZnVuY3Rpb24oZCkge1xuICAgICAgICByZXR1cm4gY29sb3IoY1ZhbHVlKGQpKTtcbiAgICAgIH0pXG4gICAgICAub24oXCJtb3VzZW92ZXJcIiwgZnVuY3Rpb24oZCkge1xuICAgICAgICAvLyBzaG93IHRvb2x0aXAgb25seSBpZiB0aGUgdG9vbCBpcyB2aXNpYmxlXG4gICAgICAgIGxldCBJRCA9IGRpdmlkK1wiX19fXCIrZC50b29sbmFtZS5yZXBsYWNlKC9bXFwuICgpLy1dL2csIFwiX1wiKTtcbiAgICAgICAgaWYgKGQzLnNlbGVjdChcIiNcIitJRCkuc3R5bGUoXCJvcGFjaXR5XCIpID09IDEpIHtcbiAgICAgICAgICBkaXYudHJhbnNpdGlvbigpXHRcdFxuICAgICAgICAgICAgICAuZHVyYXRpb24oMTAwKVx0XHRcbiAgICAgICAgICAgICAgLnN0eWxlKFwib3BhY2l0eVwiLCAuOSk7XHRcdFxuICAgICAgICAgIGRpdi5odG1sKGQudG9vbG5hbWUgKyBcIjxici8+XCIgICsgZm9ybWF0Q29tbWEoZC54KSArIFwiPGJyLz5cIiAgKyBmb3JtYXREZWNpbWFsKGQueSkpXHRcbiAgICAgICAgICAgICAgLnN0eWxlKFwibGVmdFwiLCAoZDMuZXZlbnQucGFnZVgpICsgXCJweFwiKVx0XHRcbiAgICAgICAgICAgICAgLnN0eWxlKFwidG9wXCIsIChkMy5ldmVudC5wYWdlWSkgKyBcInB4XCIpO1xuICAgICAgICB9XG4gICAgICB9KVx0XHRcdFx0XHRcbiAgICAgIC5vbihcIm1vdXNlb3V0XCIsIGZ1bmN0aW9uKGQpIHtcdFx0XG4gICAgICAgIGRpdi50cmFuc2l0aW9uKClcdFx0XG4gICAgICAgICAgLmR1cmF0aW9uKDE1MDApXHRcdFxuICAgICAgICAgIC5zdHlsZShcIm9wYWNpdHlcIiwgMCk7XHRcbiAgICAgIH0pO1xuICAgIFxufTtcblxuZnVuY3Rpb24gZHJhd19sZWdlbmQgKGRhdGEsIHN2ZywgeFNjYWxlLCB5U2NhbGUsIGRpdiwgd2lkdGgsIGhlaWdodCwgcmVtb3ZlZF90b29scywgY29sb3IsIGNvbG9yX2RvbWFpbiwgbWFyZ2luLGRpdmlkLGNsYXNzaWZpY2F0aW9uX3R5cGUpIHtcblxuICAvL3NldCBudW1iZXIgb2YgZWxlbWVudHMgcGVyIGxlZ2VuZCByb3dcbiAgbGV0IG4gPSA1O1xuXG4gIGxldCBsZWdlbmQgPSBzdmcuc2VsZWN0QWxsKFwiLmxlZ2VuZFwiKVxuICAgIC5kYXRhKGNvbG9yX2RvbWFpbilcbiAgICAuZW50ZXIoKS5hcHBlbmQoXCJnXCIpXG4gICAgLmF0dHIoXCJjbGFzc1wiLCBcImxlZ2VuZFwiKVxuICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uKGQsIGkpIHsgcmV0dXJuIFwidHJhbnNsYXRlKFwiICsgKC13aWR0aCtpJW4qMjAwKSArIFwiLFwiICsgKGhlaWdodCArIDQwICsgTWF0aC5mbG9vcihpL24pICogMjApICsgXCIpXCI7IH0pO1xuICBcbiAgLy8gZHJhdyBsZWdlbmQgY29sb3JlZCByZWN0YW5nbGVzXG4gIGxlZ2VuZC5hcHBlbmQoXCJyZWN0XCIpXG4gICAgICAgIC5hdHRyKFwieFwiLCB3aWR0aCArIDE4KVxuICAgICAgICAuYXR0cihcIndpZHRoXCIsIDE4KVxuICAgICAgICAuYXR0cihcImhlaWdodFwiLCAxOClcbiAgICAgICAgLnN0eWxlKFwiZmlsbFwiLCBjb2xvcilcbiAgICAgICAgLm9uKCdjbGljaycsIGZ1bmN0aW9uKGQpIHtcblxuICAgICAgICAgIGxldCBkb3QgPSBkMy5zZWxlY3QoXCJ0ZXh0I1wiICtkaXZpZCtcIl9fX1wiK2QucmVwbGFjZSgvW1xcLiAoKS8tXS9nLCBcIl9cIikpO1xuICAgICAgICAgIGxldCBJRCA9IGRvdC5fZ3JvdXBzWzBdWzBdLmlkO1xuXG4gICAgICAgICAgaWYoZGF0YS5sZW5ndGgtcmVtb3ZlZF90b29scy5sZW5ndGgtMSA+PSA0KXtcblxuICAgICAgICAgICAgbGV0IGxlZ2VuZF9yZWN0ID0gdGhpcztcbiAgICAgICAgICAgIHNob3dfb3JfaGlkZV9wYXJ0aWNpcGFudF9pbl9wbG90IChJRCwgZGF0YSwgc3ZnLCB4U2NhbGUsIHlTY2FsZSwgZGl2LCB3aWR0aCwgaGVpZ2h0LCByZW1vdmVkX3Rvb2xzLGRpdmlkLGNsYXNzaWZpY2F0aW9uX3R5cGUsIGxlZ2VuZF9yZWN0KTtcblxuICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS5sZW5ndGgtcmVtb3ZlZF90b29scy5sZW5ndGgtMSA8IDQgJiYgKGQzLnNlbGVjdChcIiNcIitJRCkuc3R5bGUoXCJvcGFjaXR5XCIpKSA9PSAwKXtcblxuICAgICAgICAgICAgbGV0IGxlZ2VuZF9yZWN0ID0gdGhpcztcbiAgICAgICAgICAgIHNob3dfb3JfaGlkZV9wYXJ0aWNpcGFudF9pbl9wbG90IChJRCwgZGF0YSwgc3ZnLCB4U2NhbGUsIHlTY2FsZSwgZGl2LCB3aWR0aCwgaGVpZ2h0LCByZW1vdmVkX3Rvb2xzLGRpdmlkLGNsYXNzaWZpY2F0aW9uX3R5cGUsIGxlZ2VuZF9yZWN0KTtcblxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICQoJy5yZW1vdmFsX2FsZXJ0JykucmVtb3ZlKCk7XG4gICAgICAgICAgICB2YXIgYWxlcnRfbXNnID0gJCgnPGRpdiBjbGFzcz1cInJlbW92YWxfYWxlcnRcIj5cXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImNsb3NlYnRuXCIgb25jbGljaz1cIih0aGlzLnBhcmVudE5vZGUucmVtb3ZlKCkpO1wiPiZ0aW1lczs8L3NwYW4+XFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXQgbGVhc3QgZm91ciBwYXJ0aWNpcGFudHMgYXJlIHJlcXVpcmVkIGZvciB0aGUgYmVuY2htYXJrISFcXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+Jyk7XG4gICAgICAgICAgICAkKFwiI1wiICsgZGl2aWQpLmFwcGVuZChhbGVydF9tc2cpO1xuXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgIGlmICgkKCcucmVtb3ZhbF9hbGVydCcpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAkKCcucmVtb3ZhbF9hbGVydCcpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCA1MDAwKVxuXG4gICAgICAgICAgfTtcblxuICAgICAgICB9KTtcblxuICAvLyBkcmF3IGxlZ2VuZCB0ZXh0XG4gIGxlZ2VuZC5hcHBlbmQoXCJ0ZXh0XCIpXG4gICAgICAgIC5hdHRyKFwieFwiLCB3aWR0aCArIDQwKVxuICAgICAgICAuYXR0cihcInlcIiwgOSlcbiAgICAgICAgLmF0dHIoXCJpZFwiLCBmdW5jdGlvbiAoZCkgeyByZXR1cm4gZGl2aWQrXCJfX19cIitkLnJlcGxhY2UoL1tcXC4gKCkvLV0vZywgXCJfXCIpO30pXG4gICAgICAgIC5hdHRyKFwiZHlcIiwgXCIuMzVlbVwiKVxuICAgICAgICAuc3R5bGUoXCJ0ZXh0LWFuY2hvclwiLCBcInN0YXJ0XCIpXG4gICAgICAgIC50ZXh0KGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICByZXR1cm4gZDtcbiAgICAgICAgfSk7XG5cbn07XG5cbmZ1bmN0aW9uIGRyYXdfcGFyZXRvKGRhdGEsIHN2ZywgeFNjYWxlLCB5U2NhbGUsIGRpdiwgd2lkdGgsIGhlaWdodCwgcmVtb3ZlZF90b29scyxkaXZpZCwgYmV0dGVyKXtcblxuICBjb25zdCBwb2ludHMgPSBbXTtcblxuICBsZXQgdG9vbHNfbm90X2hpZGRlbiA9IHJlbW92ZV9oaWRkZW5fdG9vbHMoZGF0YSwgcmVtb3ZlZF90b29scyk7XG5cbiAgdG9vbHNfbm90X2hpZGRlbi5mb3JFYWNoKGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICBwb2ludHMucHVzaChbZWxlbWVudFsneCddLCBlbGVtZW50Wyd5J11dKVxuICB9KTtcblxuICBsZXQgcGZfY29vcmRzO1xuICBsZXQgeF9heGlzID0geFNjYWxlLmRvbWFpbigpO1xuICBsZXQgeV9heGlzID0geVNjYWxlLmRvbWFpbigpO1xuXG4gIGlmIChiZXR0ZXIgPT0gXCJib3R0b20tcmlnaHRcIil7XG4gICAgcGZfY29vcmRzID0gcGYuZ2V0UGFyZXRvRnJvbnRpZXIocG9pbnRzLCB7IG9wdGltaXplOiAnYm90dG9tUmlnaHQnfSk7XG4gICAgLy8gYXBwZW5kIGVkZ2VzIHRvIHBhcmV0byBmcm9udGllclxuICAgIHBmX2Nvb3Jkcy51bnNoaWZ0IChbcGZfY29vcmRzWzBdWzBdLCB5X2F4aXNbMV1dKTtcbiAgICBwZl9jb29yZHMucHVzaChbeF9heGlzWzBdLCBwZl9jb29yZHNbcGZfY29vcmRzLmxlbmd0aCAtMSBdWzFdXSk7XG4gIH0gZWxzZSBpZiAoYmV0dGVyID09IFwidG9wLXJpZ2h0XCIpe1xuICAgIHBmX2Nvb3JkcyA9IHBmLmdldFBhcmV0b0Zyb250aWVyKHBvaW50cywgeyBvcHRpbWl6ZTogJ3RvcFJpZ2h0J30pO1xuICAgIC8vIGFwcGVuZCBlZGdlcyB0byBwYXJldG8gZnJvbnRpZXJcbiAgICBwZl9jb29yZHMudW5zaGlmdCAoW3BmX2Nvb3Jkc1swXVswXSwgeV9heGlzWzBdXSk7XG4gICAgcGZfY29vcmRzLnB1c2goW3hfYXhpc1swXSwgcGZfY29vcmRzW3BmX2Nvb3Jkcy5sZW5ndGggLTEgXVsxXV0pO1xuXG4gIH1cbiAgXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgKHBmX2Nvb3Jkcy5sZW5ndGgtMSk7IGkrKykge1xuICAgIHN2Zy5hcHBlbmQoXCJsaW5lXCIpXG4gICAgICAgLmF0dHIoXCJjbGlwLXBhdGhcIixcInVybCgjY2xpcClcIilcbiAgICAgICAuYXR0cihcIngxXCIsIHhTY2FsZShwZl9jb29yZHNbaV1bMF0pKVxuICAgICAgIC5hdHRyKFwieTFcIiwgeVNjYWxlKHBmX2Nvb3Jkc1tpXVsxXSkpXG4gICAgICAgLmF0dHIoXCJ4MlwiLCB4U2NhbGUocGZfY29vcmRzW2krMV1bMF0pKVxuICAgICAgIC5hdHRyKFwieTJcIiwgeVNjYWxlKHBmX2Nvb3Jkc1tpKzFdWzFdKSkgIFxuICAgICAgIC5hdHRyKFwiaWRcIiwgZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGRpdmlkK1wiX19fcGFyZXRvXCI7fSlcbiAgICAgICAuYXR0cihcInN0cm9rZVwiLCBcImdyZXlcIilcbiAgICAgICAuYXR0cihcInN0cm9rZS13aWR0aFwiLDMpXG4gICAgICAgLnN0eWxlKFwic3Ryb2tlLWRhc2hhcnJheVwiLCAoXCIyMCwgNVwiKSlcbiAgICAgICAuc3R5bGUoXCJvcGFjaXR5XCIsIDAuNClcbiAgfTtcblxuXG59XG5cbmZ1bmN0aW9uIHNob3dfb3JfaGlkZV9wYXJ0aWNpcGFudF9pbl9wbG90IChJRCwgZGF0YSwgc3ZnLCB4U2NhbGUsIHlTY2FsZSwgZGl2LCB3aWR0aCwgaGVpZ2h0LCByZW1vdmVkX3Rvb2xzLGRpdmlkLGNsYXNzaWZpY2F0aW9uX3R5cGUsIGxlZ2VuZF9yZWN0KXtcblxuICAgbGV0IHRvb2xfaWQgPUlELnNwbGl0KFwiX19fXCIpWzFdO1xuICAvLyByZW1vdmUgdGhlIGV4aXN0aW5nIG51bWJlciBhbmQgY2xhc3NpZmljYXRpb24gbGluZXMgZnJvbSBwbG90IChpZiBhbnkpXG4gIHN2Zy5zZWxlY3RBbGwoXCIjXCIrZGl2aWQrXCJfX194X3F1YXJ0aWxlXCIpLnJlbW92ZSgpO1xuICBzdmcuc2VsZWN0QWxsKFwiI1wiK2RpdmlkK1wiX19feV9xdWFydGlsZVwiKS5yZW1vdmUoKTtcbiAgc3ZnLnNlbGVjdEFsbChcIiNcIitkaXZpZCtcIl9fX2RpYWdfcXVhcnRpbGVfMFwiKS5yZW1vdmUoKTtcbiAgc3ZnLnNlbGVjdEFsbChcIiNcIitkaXZpZCtcIl9fX2RpYWdfcXVhcnRpbGVfMVwiKS5yZW1vdmUoKTtcbiAgc3ZnLnNlbGVjdEFsbChcIiNcIitkaXZpZCtcIl9fX2RpYWdfcXVhcnRpbGVfMlwiKS5yZW1vdmUoKTtcbiAgc3ZnLnNlbGVjdEFsbChcIiNcIitkaXZpZCtcIl9fX251bV9ib3R0b21fcmlnaHRcIikucmVtb3ZlKCk7XG4gIHN2Zy5zZWxlY3RBbGwoXCIjXCIrZGl2aWQrXCJfX19udW1fdG9wX3JpZ2h0XCIpLnJlbW92ZSgpO1xuICBzdmcuc2VsZWN0QWxsKFwiI1wiK2RpdmlkK1wiX19fbnVtX2JvdHRvbV9sZWZ0XCIpLnJlbW92ZSgpO1xuICBzdmcuc2VsZWN0QWxsKFwiI1wiK2RpdmlkK1wiX19fbnVtX3RvcF9sZWZ0XCIpLnJlbW92ZSgpO1xuICBzdmcuc2VsZWN0QWxsKFwiI1wiK2RpdmlkK1wiX19fcGFyZXRvXCIgKS5yZW1vdmUoKTtcblxuICBsZXQgYmxvY2tvcGFjaXR5ID0gZDMuc2VsZWN0KFwiI1wiK0lEKS5zdHlsZShcIm9wYWNpdHlcIik7XG4gIFxuICAvLyBjaGFuZ2UgdGhlIG9wYWNpdHkgdG8gMCBvciAxIGRlcGVuZGluZyBvbiB0aGUgY3VycmVudCBzdGF0ZVxuICBpZiAoYmxvY2tvcGFjaXR5ID09IDApIHtcbiAgICBkMy5zZWxlY3QoXCIjXCIrSUQpLnN0eWxlKFwib3BhY2l0eVwiLCAxKTtcbiAgICBkMy5zZWxlY3QoXCIjXCIrZGl2aWQrXCJfX190b3BcIit0b29sX2lkKS5zdHlsZShcIm9wYWNpdHlcIiwgMSk7XG4gICAgZDMuc2VsZWN0KFwiI1wiK2RpdmlkK1wiX19fYm90dG9tXCIrdG9vbF9pZCkuc3R5bGUoXCJvcGFjaXR5XCIsIDEpO1xuICAgIGQzLnNlbGVjdChcIiNcIitkaXZpZCtcIl9fX2xpbmVcIit0b29sX2lkKS5zdHlsZShcIm9wYWNpdHlcIiwgMSk7XG4gICAgLy8gcmVjYWxjdWxhdGUgdGhlIHF1YXJ0aWxlcyBhZnRlciByZW1vdmluZyB0aGUgdG9vbHNcbiAgICBsZXQgaW5kZXggPSAkLmluQXJyYXkodG9vbF9pZC5yZXBsYWNlKC9fL2csIFwiLVwiKSwgcmVtb3ZlZF90b29scyk7XG4gICAgcmVtb3ZlZF90b29scy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIGNvbXB1dGVfY2xhc3NpZmljYXRpb24oZGF0YSwgc3ZnLCB4U2NhbGUsIHlTY2FsZSwgZGl2LCB3aWR0aCwgaGVpZ2h0LCByZW1vdmVkX3Rvb2xzLGRpdmlkLGNsYXNzaWZpY2F0aW9uX3R5cGUpO1xuICAgIC8vY2hhbmdlIHRoZSBsZWdlbmQgb3BhY2l0eSB0byBrZWVwIHRyYWNrIG9mIGhpZGRlbiB0b29sc1xuICAgIGQzLnNlbGVjdChsZWdlbmRfcmVjdCkuc3R5bGUoXCJvcGFjaXR5XCIsIDEpO1xuICAgIGQzLnNlbGVjdChcInRleHQjXCIgK2RpdmlkK1wiX19fXCIrdG9vbF9pZCkuc3R5bGUoXCJvcGFjaXR5XCIsIDEpO1xuXG4gIH0gZWxzZSB7XG4gICAgZDMuc2VsZWN0KFwiI1wiK0lEKS5zdHlsZShcIm9wYWNpdHlcIiwgMCk7XG4gICAgZDMuc2VsZWN0KFwiI1wiK2RpdmlkK1wiX19fdG9wXCIrdG9vbF9pZCkuc3R5bGUoXCJvcGFjaXR5XCIsIDApO1xuICAgIGQzLnNlbGVjdChcIiNcIitkaXZpZCtcIl9fX2JvdHRvbVwiK3Rvb2xfaWQpLnN0eWxlKFwib3BhY2l0eVwiLCAwKTtcbiAgICBkMy5zZWxlY3QoXCIjXCIrZGl2aWQrXCJfX19saW5lXCIrdG9vbF9pZCkuc3R5bGUoXCJvcGFjaXR5XCIsIDApO1xuICAgIHJlbW92ZWRfdG9vbHMucHVzaCh0b29sX2lkLnJlcGxhY2UoL18vZywgXCItXCIpKTtcbiAgICBjb21wdXRlX2NsYXNzaWZpY2F0aW9uKGRhdGEsIHN2ZywgeFNjYWxlLCB5U2NhbGUsIGRpdiwgd2lkdGgsIGhlaWdodCwgcmVtb3ZlZF90b29scyxkaXZpZCxjbGFzc2lmaWNhdGlvbl90eXBlKTtcbiAgICAvL2NoYW5nZSB0aGUgbGVnZW5kIG9wYWNpdHkgdG8ga2VlcCB0cmFjayBvZiBoaWRkZW4gdG9vbHNcbiAgICBkMy5zZWxlY3QobGVnZW5kX3JlY3QpLnN0eWxlKFwib3BhY2l0eVwiLCAwLjIpO1xuICAgIGQzLnNlbGVjdChcInRleHQjXCIgK2RpdmlkK1wiX19fXCIrdG9vbF9pZCkuc3R5bGUoXCJvcGFjaXR5XCIsIDAuMik7XG4gIH1cblxufTtcblxuZnVuY3Rpb24gZ2V0X3NxdWFyZV9xdWFydGlsZXMoZGF0YSwgc3ZnLCB4U2NhbGUsIHlTY2FsZSwgZGl2LCByZW1vdmVkX3Rvb2xzLGJldHRlciwgZGl2aWQsIHRyYW5zZm9ybV90b190YWJsZSkge1xuICBcbiAgbGV0IHRvb2xzX25vdF9oaWRkZW4gPSByZW1vdmVfaGlkZGVuX3Rvb2xzKGRhdGEsIHJlbW92ZWRfdG9vbHMpO1xuXG4gIC8vIGNvbXB1dGUgdGhlIHF1YXJ0aWxlcyBvdmVyIHRoZSBuZXcgc2VldCBvZiBkYXRhXG4gIGxldCB4X3ZhbHVlcyA9IHRvb2xzX25vdF9oaWRkZW4ubWFwKGEgPT4gYS54KS5zb3J0KGZ1bmN0aW9uKGEsIGIpe3JldHVybiBhIC0gYn0pO1xuICBsZXQgeV92YWx1ZXMgPSB0b29sc19ub3RfaGlkZGVuLm1hcChhID0+IGEueSkuc29ydChmdW5jdGlvbihhLCBiKXtyZXR1cm4gYSAtIGJ9KTtcblxuICBsZXQgcXVhbnRpbGVfeCA9IGQzLnF1YW50aWxlKHhfdmFsdWVzLCAwLjUpO1xuICBsZXQgcXVhbnRpbGVfeSA9IGQzLnF1YW50aWxlKHlfdmFsdWVzLCAwLjUpO1xuXG4gIGxldCB4X2F4aXMgPSB4U2NhbGUuZG9tYWluKCk7XG4gIGxldCB5X2F4aXMgPSB5U2NhbGUuZG9tYWluKCk7XG5cbiAgbGV0IGZvcm1hdENvbW1hID0gZDMuZm9ybWF0KFwiLFwiKTtcblxuICBzdmcuYXBwZW5kKFwibGluZVwiKVxuICAgIC5hdHRyKFwieDFcIiwgeFNjYWxlKHF1YW50aWxlX3gpKVxuICAgIC5hdHRyKFwieTFcIiwgeVNjYWxlKHlfYXhpc1swXSkpXG4gICAgLmF0dHIoXCJ4MlwiLCB4U2NhbGUocXVhbnRpbGVfeCkpXG4gICAgLmF0dHIoXCJ5MlwiLCB5U2NhbGUoeV9heGlzWzFdKSlcbiAgICAuYXR0cihcImlkXCIsIGZ1bmN0aW9uIChkKSB7IHJldHVybiBkaXZpZCtcIl9fX3hfcXVhcnRpbGVcIjt9KVxuICAgIC5hdHRyKFwic3Ryb2tlXCIsIFwiIzBBNThBMlwiKVxuICAgIC5hdHRyKFwic3Ryb2tlLXdpZHRoXCIsMylcbiAgICAuc3R5bGUoXCJzdHJva2UtZGFzaGFycmF5XCIsIChcIjIwLCA1XCIpKVxuICAgIC5zdHlsZShcIm9wYWNpdHlcIiwgMC40KVxuICAgIC5vbihcIm1vdXNlb3ZlclwiLCBmdW5jdGlvbihkKSB7XHRcbiAgICAgIGRpdi50cmFuc2l0aW9uKClcdFx0XG4gICAgICAgICAuZHVyYXRpb24oMTAwKVx0XHRcbiAgICAgICAgIC5zdHlsZShcIm9wYWNpdHlcIiwgLjkpO1x0XHRcbiAgICAgIGRpdi5odG1sKFwiWCBxdWFydGlsZSA9IFwiICsgZm9ybWF0Q29tbWEoIHF1YW50aWxlX3gpIClcdFxuICAgICAgICAgLnN0eWxlKFwibGVmdFwiLCAoZDMuZXZlbnQucGFnZVgpICsgXCJweFwiKVx0XHRcbiAgICAgICAgIC5zdHlsZShcInRvcFwiLCAoZDMuZXZlbnQucGFnZVkpICsgXCJweFwiKTtcbiAgICB9KVx0XHRcdFx0XHRcbiAgICAub24oXCJtb3VzZW91dFwiLCBmdW5jdGlvbihkKSB7XHRcdFxuICAgICAgZGl2LnRyYW5zaXRpb24oKVx0XHRcbiAgICAgICAgIC5kdXJhdGlvbigxMDAwKVx0XHRcbiAgICAgICAgIC5zdHlsZShcIm9wYWNpdHlcIiwgMCk7XHRcbiAgICB9KTtcblxuICBzdmcuYXBwZW5kKFwibGluZVwiKVxuICAgIC5hdHRyKFwieDFcIiwgeFNjYWxlKHhfYXhpc1swXSkpXG4gICAgLmF0dHIoXCJ5MVwiLCB5U2NhbGUocXVhbnRpbGVfeSkpXG4gICAgLmF0dHIoXCJ4MlwiLCB4U2NhbGUoeF9heGlzWzFdKSlcbiAgICAuYXR0cihcInkyXCIsIHlTY2FsZShxdWFudGlsZV95KSlcbiAgICAuYXR0cihcImlkXCIsIGZ1bmN0aW9uIChkKSB7IHJldHVybiBkaXZpZCtcIl9fX3lfcXVhcnRpbGVcIjt9KVxuICAgIC5hdHRyKFwic3Ryb2tlXCIsIFwiIzBBNThBMlwiKVxuICAgIC5hdHRyKFwic3Ryb2tlLXdpZHRoXCIsMylcbiAgICAuc3R5bGUoXCJzdHJva2UtZGFzaGFycmF5XCIsIChcIjIwLCA1XCIpKVxuICAgIC5zdHlsZShcIm9wYWNpdHlcIiwgMC40KVxuICAgIC5vbihcIm1vdXNlb3ZlclwiLCBmdW5jdGlvbihkKSB7XHRcbiAgICAgIGRpdi50cmFuc2l0aW9uKClcdFx0XG4gICAgICAgICAuZHVyYXRpb24oMTAwKVx0XHRcbiAgICAgICAgIC5zdHlsZShcIm9wYWNpdHlcIiwgLjkpO1x0XHRcbiAgICAgIGRpdlx0Lmh0bWwoXCJZIHF1YXJ0aWxlID0gXCIgKyBmb3JtYXRDb21tYShxdWFudGlsZV95KSApXHRcbiAgICAgICAgICAuc3R5bGUoXCJsZWZ0XCIsIChkMy5ldmVudC5wYWdlWCkgKyBcInB4XCIpXHRcdFxuICAgICAgICAgIC5zdHlsZShcInRvcFwiLCAoZDMuZXZlbnQucGFnZVkpICsgXCJweFwiKTtcbiAgICB9KVx0XHRcdFx0XHRcbiAgICAub24oXCJtb3VzZW91dFwiLCBmdW5jdGlvbihkKSB7XHRcdFxuICAgICAgZGl2LnRyYW5zaXRpb24oKVx0XHRcbiAgICAgICAgIC5kdXJhdGlvbigxNTAwKVx0XHRcbiAgICAgICAgIC5zdHlsZShcIm9wYWNpdHlcIiwgMCk7XHRcbiAgICB9KTtcblxuICAgIC8vdGhlIHRyYW5mb3JtYXRpb24gdG8gdGFidWxhciBmb3JtYXQgaXMgZG9uZSBvbmx5IGlmIHRoZXJlIGFyZSBhbnkgdGFibGUgZWxlbWVudHMgaW4gdGhlIGh0bWwgZmlsZVxuICAgIGlmICh0cmFuc2Zvcm1fdG9fdGFibGUgPT0gdHJ1ZSkge1xuICAgICAgdHJhbnNmb3JtX3Nxcl9jbGFzc2lmX3RvX3RhYmxlKGJldHRlciwgdG9vbHNfbm90X2hpZGRlbiwgcXVhbnRpbGVfeCwgcXVhbnRpbGVfeSwgZGl2aWQpO1xuICAgIH07XG4gICAgXG59O1xuXG5mdW5jdGlvbiB0cmFuc2Zvcm1fc3FyX2NsYXNzaWZfdG9fdGFibGUoYmV0dGVyLCBkYXRhLCBxdWFudGlsZV94LCBxdWFudGlsZV95LCBkaXZpZCl7XG4gIGlmIChiZXR0ZXIgPT0gXCJib3R0b20tcmlnaHRcIil7XG4gICAgZGF0YS5mb3JFYWNoKGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICAgICAgaWYgKGVsZW1lbnRbJ3gnXSA+PSBxdWFudGlsZV94ICYmIGVsZW1lbnRbJ3knXSA8PSBxdWFudGlsZV95KXtcbiAgICAgICAgICAgICAgZWxlbWVudFsncXVhcnRpbGUnXSA9IDE7XG4gICAgICAgIH1lbHNlIGlmIChlbGVtZW50Wyd4J10gPj0gcXVhbnRpbGVfeCAmJiBlbGVtZW50Wyd5J10gPiBxdWFudGlsZV95KXtcbiAgICAgICAgICAgICAgZWxlbWVudFsncXVhcnRpbGUnXSA9IDM7XG4gICAgICAgIH1lbHNlIGlmIChlbGVtZW50Wyd4J10gPCBxdWFudGlsZV94ICYmIGVsZW1lbnRbJ3knXSA+IHF1YW50aWxlX3kpe1xuICAgICAgICAgICAgICBlbGVtZW50WydxdWFydGlsZSddID0gNDtcbiAgICAgICAgfWVsc2UgaWYgKGVsZW1lbnRbJ3gnXSA8IHF1YW50aWxlX3ggJiYgZWxlbWVudFsneSddIDw9IHF1YW50aWxlX3kpe1xuICAgICAgICAgICAgICBlbGVtZW50WydxdWFydGlsZSddID0gMjtcbiAgICAgICAgfVxuICAgIH0pO1xuICB9IGVsc2UgaWYgKGJldHRlciA9PSBcInRvcC1yaWdodFwiKXtcbiAgICAgIGRhdGEuZm9yRWFjaChmdW5jdGlvbihlbGVtZW50KSB7XG4gICAgICAgIGlmIChlbGVtZW50Wyd4J10gPj0gcXVhbnRpbGVfeCAmJiBlbGVtZW50Wyd5J10gPCBxdWFudGlsZV95KXtcbiAgICAgICAgICAgICAgZWxlbWVudFsncXVhcnRpbGUnXSA9IDM7XG4gICAgICAgIH1lbHNlIGlmIChlbGVtZW50Wyd4J10gPj0gcXVhbnRpbGVfeCAmJiBlbGVtZW50Wyd5J10gPj0gcXVhbnRpbGVfeSl7XG4gICAgICAgICAgICAgIGVsZW1lbnRbJ3F1YXJ0aWxlJ10gPSAxO1xuICAgICAgICB9ZWxzZSBpZiAoZWxlbWVudFsneCddIDwgcXVhbnRpbGVfeCAmJiBlbGVtZW50Wyd5J10gPj0gcXVhbnRpbGVfeSl7XG4gICAgICAgICAgICAgIGVsZW1lbnRbJ3F1YXJ0aWxlJ10gPSAyO1xuICAgICAgICB9ZWxzZSBpZiAoZWxlbWVudFsneCddIDwgcXVhbnRpbGVfeCAmJiBlbGVtZW50Wyd5J10gPCBxdWFudGlsZV95KXtcbiAgICAgICAgICAgICAgZWxlbWVudFsncXVhcnRpbGUnXSA9IDQ7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuXG4gIGZpbGxfaW5fdGFibGUgKGRpdmlkLCBkYXRhKTtcbiAgc2V0X2NlbGxfY29sb3JzKCk7XG5cbn07XG5cblxuZnVuY3Rpb24gYXBwZW5kX3F1YXJ0aWxlX251bWJlcnNfdG9fcGxvdCAoc3ZnLCB4U2NhbGUsIHlTY2FsZSwgYmV0dGVyLGRpdmlkKXtcblxuICBsZXQgeF9heGlzID0geFNjYWxlLmRvbWFpbigpO1xuICBsZXQgeV9heGlzID0geVNjYWxlLmRvbWFpbigpO1xuXG4gIGxldCBudW1fYm90dG9tX3JpZ2h0LG51bV9ib3R0b21fbGVmdCxudW1fdG9wX3JpZ2h0LG51bV90b3BfbGVmdDtcbiAgLy8gYXBwZW5kIHF1YXJ0aWxlIG51bWJlcnMgdG8gcGxvdFxuICBpZiAoYmV0dGVyID09IFwiYm90dG9tLXJpZ2h0XCIpe1xuICAgICBudW1fYm90dG9tX3JpZ2h0ID0gXCIxXCI7XG4gICAgIG51bV9ib3R0b21fbGVmdCA9IFwiMlwiO1xuICAgICBudW1fdG9wX3JpZ2h0ID0gXCIzXCI7XG4gICAgIG51bV90b3BfbGVmdCA9IFwiNFwiO1xuICB9IFxuICBlbHNlIGlmIChiZXR0ZXIgPT0gXCJ0b3AtcmlnaHRcIil7XG4gICAgIG51bV9ib3R0b21fcmlnaHQgPSBcIjNcIjtcbiAgICAgbnVtX2JvdHRvbV9sZWZ0ID0gXCI0XCI7XG4gICAgIG51bV90b3BfcmlnaHQgPSBcIjFcIjtcbiAgICAgbnVtX3RvcF9sZWZ0ID0gXCIyXCI7XG4gIH07XG5cbiAgXG4gIHN2Zy5hcHBlbmQoXCJ0ZXh0XCIpXG4gIC5hdHRyKFwiaWRcIiwgZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGRpdmlkK1wiX19fbnVtX2JvdHRvbV9yaWdodFwiO30pXG4gIC5hdHRyKFwieFwiLCB4U2NhbGUoeF9heGlzWzFdLSgwLjA1Kih4X2F4aXNbMV0teF9heGlzWzBdKSkpKVxuICAuYXR0cihcInlcIiwgeVNjYWxlKHlfYXhpc1sxXS0oMC45NyooeV9heGlzWzFdLXlfYXhpc1swXSkpKSlcbiAgLnN0eWxlKFwib3BhY2l0eVwiLCAwLjQpXG4gIC5zdHlsZShcImZvbnQtc2l6ZVwiLCBcIjQwcHhcIilcbiAgLnN0eWxlKFwiZmlsbFwiLCBcIiMwQTU4QTJcIilcbiAgLnRleHQobnVtX2JvdHRvbV9yaWdodCk7XG5cbiAgc3ZnLmFwcGVuZChcInRleHRcIilcbiAgLmF0dHIoXCJpZFwiLCBmdW5jdGlvbiAoZCkgeyByZXR1cm4gZGl2aWQrXCJfX19udW1fYm90dG9tX2xlZnRcIjt9KVxuICAuYXR0cihcInhcIiwgeFNjYWxlKHhfYXhpc1sxXS0oMC45NSooeF9heGlzWzFdLXhfYXhpc1swXSkpKSlcbiAgLmF0dHIoXCJ5XCIsIHlTY2FsZSh5X2F4aXNbMV0tKDAuOTcqKHlfYXhpc1sxXS15X2F4aXNbMF0pKSkpXG4gIC5zdHlsZShcIm9wYWNpdHlcIiwgMC40KVxuICAuc3R5bGUoXCJmb250LXNpemVcIiwgXCI0MHB4XCIpXG4gIC5zdHlsZShcImZpbGxcIiwgXCIjMEE1OEEyXCIpXG4gIC50ZXh0KG51bV9ib3R0b21fbGVmdCk7XG5cbiAgc3ZnLmFwcGVuZChcInRleHRcIilcbiAgLmF0dHIoXCJpZFwiLCBmdW5jdGlvbiAoZCkgeyByZXR1cm4gZGl2aWQrXCJfX19udW1fdG9wX3JpZ2h0XCI7fSlcbiAgLmF0dHIoXCJ4XCIsIHhTY2FsZSh4X2F4aXNbMV0tKDAuMDUqKHhfYXhpc1sxXS14X2F4aXNbMF0pKSkpXG4gIC5hdHRyKFwieVwiLCB5U2NhbGUoeV9heGlzWzFdLSgwLjEqKHlfYXhpc1sxXS15X2F4aXNbMF0pKSkpXG4gIC5zdHlsZShcIm9wYWNpdHlcIiwgMC40KVxuICAuc3R5bGUoXCJmb250LXNpemVcIiwgXCI0MHB4XCIpXG4gIC5zdHlsZShcImZpbGxcIiwgXCIjMEE1OEEyXCIpXG4gIC50ZXh0KG51bV90b3BfcmlnaHQpO1xuXG4gIHN2Zy5hcHBlbmQoXCJ0ZXh0XCIpXG4gIC5hdHRyKFwiaWRcIiwgZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGRpdmlkK1wiX19fbnVtX3RvcF9sZWZ0XCI7fSlcbiAgLmF0dHIoXCJ4XCIsIHhTY2FsZSh4X2F4aXNbMV0tKDAuOTUqKHhfYXhpc1sxXS14X2F4aXNbMF0pKSkpXG4gIC5hdHRyKFwieVwiLCB5U2NhbGUoeV9heGlzWzFdLSgwLjEqKHlfYXhpc1sxXS15X2F4aXNbMF0pKSkpXG4gIC5zdHlsZShcIm9wYWNpdHlcIiwgMC40KVxuICAuc3R5bGUoXCJmb250LXNpemVcIiwgXCI0MHB4XCIpXG4gIC5zdHlsZShcImZpbGxcIiwgXCIjMEE1OEEyXCIpXG4gIC50ZXh0KG51bV90b3BfbGVmdCk7XG5cbn1cbmZ1bmN0aW9uIGdldF9kaWFnb25hbF9xdWFydGlsZXMoZGF0YSwgc3ZnLCB4U2NhbGUsIHlTY2FsZSwgZGl2LCB3aWR0aCwgaGVpZ2h0LCByZW1vdmVkX3Rvb2xzLCBiZXR0ZXIsIGRpdmlkLCB0cmFuc2Zvcm1fdG9fdGFibGUpIHtcblxuICBsZXQgdG9vbHNfbm90X2hpZGRlbiA9IHJlbW92ZV9oaWRkZW5fdG9vbHMoZGF0YSwgcmVtb3ZlZF90b29scyk7XG5cbiAgbGV0IHhfdmFsdWVzID0gdG9vbHNfbm90X2hpZGRlbi5tYXAoYSA9PiBhLngpO1xuICBsZXQgeV92YWx1ZXMgPSB0b29sc19ub3RfaGlkZGVuLm1hcChhID0+IGEueSk7XG5cbiAgLy8gZ2V0IGRpc3RhbmNlIHRvIGxvd2VzdCBzY29yZSBjb3JuZXJcblxuICAvLyBub3JtYWxpemUgZGF0YSB0byAwLTEgcmFuZ2VcbiAgbGV0IG5vcm1hbGl6ZWRfdmFsdWVzID0gbm9ybWFsaXplX2RhdGEoeF92YWx1ZXMsIHlfdmFsdWVzKTtcbiAgbGV0IFt4X25vcm0sIHlfbm9ybV0gPSBbbm9ybWFsaXplZF92YWx1ZXNbMF0sIG5vcm1hbGl6ZWRfdmFsdWVzWzFdXTtcbiAgXG4gIGxldCBtYXhfeCA9IE1hdGgubWF4LmFwcGx5KG51bGwsIHhfdmFsdWVzKTtcbiAgbGV0IG1heF95ID0gTWF0aC5tYXguYXBwbHkobnVsbCwgeV92YWx1ZXMpO1xuXG4gIC8vICMgY29tcHV0ZSB0aGUgc2NvcmVzIGZvciBlYWNoIG9mIHRoZSB0b29sLiBiYXNlZCBvbiB0aGVpciBkaXN0YW5jZSB0byB0aGUgeCBhbmQgeSBheGlzXG4gIGxldCBzY29yZXMgPSBbXVxuICBsZXQgc2NvcmVzX2Nvb3JkcyA9IHt9OyAvL3RoaXMgb2JqZWN0IHdpbGwgc3RvcmUgdGhlIHNjb3JlcyBhbmQgdGhlIGNvb3JkaW5hdGVzXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgeF9ub3JtLmxlbmd0aDsgaSsrKSB7XG5cbiAgICBpZiAoYmV0dGVyID09IFwiYm90dG9tLXJpZ2h0XCIpe1xuICAgICAgc2NvcmVzLnB1c2goeF9ub3JtW2ldICsgKDEgLSB5X25vcm1baV0pKTtcbiAgICAgIHNjb3Jlc19jb29yZHNbeF9ub3JtW2ldICsgKDEgLSB5X25vcm1baV0pXSA9ICBbeF92YWx1ZXNbaV0sIHlfdmFsdWVzW2ldXTtcbiAgICAgIC8vYXBwZW5kIHRoZSBzY29yZSB0byB0aGUgZGF0YSBhcnJheVxuICAgICAgdG9vbHNfbm90X2hpZGRlbltpXVsnc2NvcmUnXSA9IHhfbm9ybVtpXSArICgxIC0geV9ub3JtW2ldKTtcbiAgICB9IFxuICAgIGVsc2UgaWYgKGJldHRlciA9PSBcInRvcC1yaWdodFwiKXtcbiAgICAgIHNjb3Jlcy5wdXNoKHhfbm9ybVtpXSArIHlfbm9ybVtpXSk7XG4gICAgICBzY29yZXNfY29vcmRzW3hfbm9ybVtpXSArIHlfbm9ybVtpXV0gPSBbeF92YWx1ZXNbaV0sIHlfdmFsdWVzW2ldXTtcbiAgICAgIC8vYXBwZW5kIHRoZSBzY29yZSB0byB0aGUgZGF0YSBhcnJheVxuICAgICAgdG9vbHNfbm90X2hpZGRlbltpXVsnc2NvcmUnXSA9IHhfbm9ybVtpXSArIHlfbm9ybVtpXTtcbiAgICB9O1xuXG4gIH07XG5cbiAgLy8gc29ydCB0aGUgc2NvcmVzIGFuZCBjb21wdXRlIHF1YXJ0aWxlc1xuICBzY29yZXMuc29ydChmdW5jdGlvbihhLCBiKXtyZXR1cm4gYi1hfSk7XG5cbiAgbGV0IGZpcnN0X3F1YXJ0aWxlID0gZDMucXVhbnRpbGUoc2NvcmVzLCAwLjI1KTtcbiAgbGV0IHNlY29uZF9xdWFydGlsZSA9IGQzLnF1YW50aWxlKHNjb3JlcywgMC41KTtcbiAgbGV0IHRoaXJkX3F1YXJ0aWxlID0gZDMucXVhbnRpbGUoc2NvcmVzLCAwLjc1KTtcblxuICAvLyBjb21wdXRlIHRoZSBkaWFnb25hbCBsaW5lIGNvb3Jkc1xuICBsZXQgY29vcmRzID0gW2dldF9kaWFnb25hbF9saW5lKHNjb3Jlcywgc2NvcmVzX2Nvb3JkcywgZmlyc3RfcXVhcnRpbGUsIGJldHRlciwgbWF4X3gsIG1heF95LHN2ZywgeFNjYWxlLCB5U2NhbGUpLCBcbiAgICAgICAgICAgICAgICBnZXRfZGlhZ29uYWxfbGluZShzY29yZXMsIHNjb3Jlc19jb29yZHMsIHNlY29uZF9xdWFydGlsZSwgYmV0dGVyLCBtYXhfeCwgbWF4X3ksc3ZnLCB4U2NhbGUsIHlTY2FsZSksIFxuICAgICAgICAgICAgICAgIGdldF9kaWFnb25hbF9saW5lKHNjb3Jlcywgc2NvcmVzX2Nvb3JkcywgdGhpcmRfcXVhcnRpbGUsIGJldHRlciwgbWF4X3gsIG1heF95LHN2ZywgeFNjYWxlLCB5U2NhbGUpXG4gICAgICAgICAgICAgIF07XG4gIFxuICAvLyBhcHBlbmQgdGhlIDMgbGluZXMgdG8gdGhlIHN2Z1xuICBsZXQgaW5kZXggPSAwO1xuXG4gIGNvb3Jkcy5mb3JFYWNoKGxpbmUgPT4ge1xuICAgIGxldCBbeF9jb29yZHMsIHlfY29vcmRzXSA9IFtsaW5lWzBdLCBsaW5lWzFdXTtcbiAgICBzdmcuYXBwZW5kKFwibGluZVwiKVxuICAgICAgIC5hdHRyKFwiY2xpcC1wYXRoXCIsXCJ1cmwoI2NsaXApXCIpXG4gICAgICAgLmF0dHIoXCJ4MVwiLCB4U2NhbGUoeF9jb29yZHNbMF0pKVxuICAgICAgIC5hdHRyKFwieTFcIiwgeVNjYWxlKHlfY29vcmRzWzBdKSlcbiAgICAgICAuYXR0cihcIngyXCIsIHhTY2FsZSh4X2Nvb3Jkc1sxXSkpXG4gICAgICAgLmF0dHIoXCJ5MlwiLCB5U2NhbGUoeV9jb29yZHNbMV0pKSAgXG4gICAgICAgLmF0dHIoXCJpZFwiLCBmdW5jdGlvbiAoZCkgeyByZXR1cm4gZGl2aWQrXCJfX19kaWFnX3F1YXJ0aWxlX1wiICsgaW5kZXg7fSlcbiAgICAgICAuYXR0cihcInN0cm9rZVwiLCBcIiMwQTU4QTJcIilcbiAgICAgICAuYXR0cihcInN0cm9rZS13aWR0aFwiLDMpXG4gICAgICAgLnN0eWxlKFwic3Ryb2tlLWRhc2hhcnJheVwiLCAoXCIyMCwgNVwiKSlcbiAgICAgICAuc3R5bGUoXCJvcGFjaXR5XCIsIDAuNClcblxuICAgIC8vIHN2Zy5hcHBlbmQoXCJ0ZXh0XCIpXG4gICAgLy8gLmF0dHIoXCJ4XCIsIHhTY2FsZSgwLjU2KSlcbiAgICAvLyAuYXR0cihcInlcIiwgeVNjYWxlKDAuODYpKVxuICAgIC8vIC5zdHlsZShcIm9wYWNpdHlcIiwgMC40KVxuICAgIC8vIC5zdHlsZShcImZvbnQtc2l6ZVwiLCBcIjQwcHhcIilcbiAgICAvLyAuc3R5bGUoXCJmaWxsXCIsIFwiIzBBNThBMlwiKVxuICAgIC8vIC50ZXh0KFwibnVtXCIpO1xuXG4gICAgc3ZnLmFwcGVuZChcImNsaXBQYXRoXCIpXG4gICAgICAgLmF0dHIoXCJpZFwiLCBcImNsaXBcIilcbiAgICAgICAuYXBwZW5kKFwicmVjdFwiKVxuICAgICAgIC5hdHRyKFwid2lkdGhcIiwgd2lkdGgpXG4gICAgICAgLmF0dHIoXCJoZWlnaHRcIiwgaGVpZ2h0KTtcblxuICAgIGluZGV4ICs9IDE7XG4gIH0pO1xuXG4gIC8vdGhlIHRyYW5mb3JtYXRpb24gdG8gdGFidWxhciBmb3JtYXQgaXMgZG9uZSBvbmx5IGlmIHRoZXJlIGFyZSBhbnkgdGFibGUgZWxlbWVudHMgaW4gdGhlIGh0bWwgZmlsZVxuICBpZiAodHJhbnNmb3JtX3RvX3RhYmxlID09IHRydWUpIHtcbiAgICB0cmFuc2Zvcm1fZGlhZ19jbGFzc2lmX3RvX3RhYmxlKHRvb2xzX25vdF9oaWRkZW4sIGZpcnN0X3F1YXJ0aWxlLCBzZWNvbmRfcXVhcnRpbGUsIHRoaXJkX3F1YXJ0aWxlLCBkaXZpZCk7XG4gIH07XG5cbn07XG5cbmZ1bmN0aW9uIHRyYW5zZm9ybV9kaWFnX2NsYXNzaWZfdG9fdGFibGUoZGF0YSwgZmlyc3RfcXVhcnRpbGUsIHNlY29uZF9xdWFydGlsZSwgdGhpcmRfcXVhcnRpbGUsIGRpdmlkKXtcblxuICBkYXRhLmZvckVhY2goZnVuY3Rpb24oZWxlbWVudCkge1xuXG4gICAgaWYgKGVsZW1lbnRbJ3Njb3JlJ10gPiBmaXJzdF9xdWFydGlsZSl7XG4gICAgICAgICAgZWxlbWVudFsncXVhcnRpbGUnXSA9IDE7XG4gICAgfWVsc2UgaWYgKCBlbGVtZW50WydzY29yZSddID4gc2Vjb25kX3F1YXJ0aWxlICYmIGVsZW1lbnRbJ3Njb3JlJ10gPD0gZmlyc3RfcXVhcnRpbGUpe1xuICAgICAgICAgIGVsZW1lbnRbJ3F1YXJ0aWxlJ10gPSAyO1xuICAgIH1lbHNlIGlmICggZWxlbWVudFsnc2NvcmUnXSA+IHRoaXJkX3F1YXJ0aWxlICYmIGVsZW1lbnRbJ3Njb3JlJ10gPD0gc2Vjb25kX3F1YXJ0aWxlKXtcbiAgICAgICAgICBlbGVtZW50WydxdWFydGlsZSddID0gMztcbiAgICB9ZWxzZSBpZiAoZWxlbWVudFsnc2NvcmUnXSA8PSB0aGlyZF9xdWFydGlsZSl7XG4gICAgICAgICAgZWxlbWVudFsncXVhcnRpbGUnXSA9IDQ7XG4gICAgfVxuICB9KTtcblxuICBmaWxsX2luX3RhYmxlIChkaXZpZCwgZGF0YSk7XG4gIHNldF9jZWxsX2NvbG9ycygpO1xuXG59O1xuXG5mdW5jdGlvbiBub3JtYWxpemVfZGF0YSh4X3ZhbHVlcywgeV92YWx1ZXMpe1xuXG4gIGxldCBtYXhYID0gTWF0aC5tYXguYXBwbHkobnVsbCwgeF92YWx1ZXMpO1xuICBsZXQgbWF4WSA9IE1hdGgubWF4LmFwcGx5KG51bGwsIHlfdmFsdWVzKTtcbiAgXG4gIGxldCB4X25vcm0gPSB4X3ZhbHVlcy5tYXAoZnVuY3Rpb24oZSkgeyAgXG4gICAgcmV0dXJuIGUgLyBtYXhYO1xuICB9KTtcblxuICBsZXQgeV9ub3JtID0geV92YWx1ZXMubWFwKGZ1bmN0aW9uKGUpIHsgIFxuICAgIHJldHVybiBlIC8gbWF4WTtcbiAgfSk7XG5cbiAgcmV0dXJuIFt4X25vcm0sIHlfbm9ybV07XG59O1xuXG5mdW5jdGlvbiBnZXRfZGlhZ29uYWxfbGluZShzY29yZXMsIHNjb3Jlc19jb29yZHMsIHF1YXJ0aWxlLCBiZXR0ZXIsIG1heF94LCBtYXhfeSxzdmcsIHhTY2FsZSwgeVNjYWxlKXtcblxuICBsZXQgdGFyZ2V0O1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHNjb3Jlcy5sZW5ndGg7IGkrKykge1xuICAgIC8vICMgZmluZCBvdXQgd2hpY2ggYXJlIHRoZSB0d28gcG9pbnRzIHRoYXQgY29udGFpbiB0aGUgcGVyY2VudGlsZSB2YWx1ZVxuICAgIFxuICAgIGlmIChzY29yZXNbaV0gPD0gcXVhcnRpbGUpe1xuICAgICAgICB0YXJnZXQgPSBbW3Njb3Jlc19jb29yZHNbc2NvcmVzW2kgLSAxXV1bMF0sIHNjb3Jlc19jb29yZHNbc2NvcmVzW2kgLSAxXV1bMV1dLFxuICAgICAgICAgICAgICAgICAgW3Njb3Jlc19jb29yZHNbc2NvcmVzW2ldXVswXSwgc2NvcmVzX2Nvb3Jkc1tzY29yZXNbaV1dWzFdXV07XG4gICAgICAgIGJyZWFrO1xuICAgIH07XG4gIH07XG4gIC8vICMgZ2V0IHRoZSB0aGUgbWlkIHBvaW50IGJldHdlZW4gdGhlIHR3bywgd2hlcmUgdGhlIHF1YXJ0aWxlIGxpbmUgd2lsbCBwYXNzXG4gIGxldCBoYWxmX3BvaW50ID0gWyh0YXJnZXRbMF1bMF0gKyB0YXJnZXRbMV1bMF0pIC8gMiwgKHRhcmdldFswXVsxXSArIHRhcmdldFsxXVsxXSkgLyAyXTtcblxuICAvLyAjIGRyYXcgdGhlIGxpbmUgZGVwZW5kaW5nIG9uIHdoaWNoIGlzIHRoZSBvcHRpbWFsIGNvcm5lclxuICBsZXQgeF9jb29yZHM7XG4gIGxldCB5X2Nvb3JkcztcbiAgaWYgKGJldHRlciA9PSBcImJvdHRvbS1yaWdodFwiKXtcbiAgICAgICB4X2Nvb3JkcyA9IFtoYWxmX3BvaW50WzBdIC0gbWF4X3gsIGhhbGZfcG9pbnRbMF0gKyBtYXhfeF07XG4gICAgICAgeV9jb29yZHMgPSBbaGFsZl9wb2ludFsxXSAtIG1heF95LCBoYWxmX3BvaW50WzFdICsgbWF4X3ldO1xuICB9IGVsc2UgaWYgKGJldHRlciA9PSBcInRvcC1yaWdodFwiKXtcbiAgICAgICB4X2Nvb3JkcyA9IFtoYWxmX3BvaW50WzBdICsgbWF4X3gsIGhhbGZfcG9pbnRbMF0gLSBtYXhfeF07XG4gICAgICAgeV9jb29yZHMgPSBbaGFsZl9wb2ludFsxXSAtIG1heF95LCBoYWxmX3BvaW50WzFdICsgbWF4X3ldOyAgIFxuICB9O1xuXG4gIHJldHVybiBbeF9jb29yZHMsIHlfY29vcmRzXTtcbn07XG5cbmZ1bmN0aW9uIHJlbW92ZV9oaWRkZW5fdG9vbHMoZGF0YSwgcmVtb3ZlZF90b29scyl7XG4gIC8vIHJlbW92ZSBmcm9tIHRoZSBkYXRhIGFycmF5IHRoZSBwYXJ0aWNpcGFudHMgdGhhdCB0aGUgdXNlciBoYXMgaGlkZGVuIChyZW1vdmVkX3Rvb2xzKVxuICAvLyBjcmVhdGUgYSBuZXcgYXJyYXkgd2hlcmUgdGhlIHRvb2xzIHRoYXQgaGF2ZSBub3QgYmVlbiBoaWRkZW4gd2lsbCBiZSBzdG9yZWRcbiAgbGV0IHRvb2xzX25vdF9oaWRkZW4gPSBbXTtcbiAgZGF0YS5mb3JFYWNoKGVsZW1lbnQgPT4ge1xuICAgIGxldCBpbmRleCA9ICQuaW5BcnJheShlbGVtZW50LnRvb2xuYW1lLCByZW1vdmVkX3Rvb2xzKTtcbiAgICBpZiAoaW5kZXggPT0gLTEpe1xuICAgICAgdG9vbHNfbm90X2hpZGRlbi5wdXNoKGVsZW1lbnQpO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIHRvb2xzX25vdF9oaWRkZW47XG5cbn07XG5cbmZ1bmN0aW9uIGZpbGxfaW5fdGFibGUgKGRpdmlkLCBkYXRhKXtcbiAgLy9jcmVhdGUgdGFibGUgZGluYW1pY2FsbHlcbiAgdmFyIHRhYmxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZGl2aWQgKyBcIl90YWJsZVwiKTtcbiAgdmFyIHJvdyA9IHRhYmxlLmluc2VydFJvdygtMSk7XG4gIHJvdy5pbnNlcnRDZWxsKDApLmlubmVySFRNTCA9IFwiPGI+VE9PTDwvYj5cIjtcbiAgcm93Lmluc2VydENlbGwoMSkuaW5uZXJIVE1MID0gXCI8Yj5RVUFSVElMRTwvYj5cIjtcblxuICBkYXRhLmZvckVhY2goZnVuY3Rpb24oZWxlbWVudCkge1xuICAgIHZhciByb3cgPSB0YWJsZS5pbnNlcnRSb3coLTEpO1xuICAgIHJvdy5pbnNlcnRDZWxsKDApLmlubmVySFRNTCA9IGVsZW1lbnRbXCJ0b29sbmFtZVwiXTtcbiAgICByb3cuaW5zZXJ0Q2VsbCgxKS5pbm5lckhUTUwgPSBlbGVtZW50W1wicXVhcnRpbGVcIl07XG4gIH0pO1xuXG59O1xuXG5mdW5jdGlvbiBzZXRfY2VsbF9jb2xvcnMoKXtcblxuICB2YXIgY2VsbCA9ICQoJ3RkJyk7IFxuXG4gIGNlbGwuZWFjaChmdW5jdGlvbigpIHsgLy9sb29wIHRocm91Z2ggYWxsIHRkIGVsZW1lbnRzIGllIHRoZSBjZWxsc1xuXG4gICAgdmFyIGNlbGxfdmFsdWUgPSAkKHRoaXMpLmh0bWwoKTsgLy9nZXQgdGhlIHZhbHVlXG5cbiAgICBpZiAoY2VsbF92YWx1ZSA9PSAxKSB7IC8vaWYgdGhlbiBmb3IgaWYgdmFsdWUgaXMgMVxuICAgICAgJCh0aGlzKS5jc3MoeydiYWNrZ3JvdW5kJyA6ICcjMjM4YjQ1J30pOyAgIC8vIGNoYW5nZXMgdGQgdG8gcmVkLlxuICAgIH0gZWxzZSBpZiAoY2VsbF92YWx1ZSA9PSAyKSB7XG4gICAgICAkKHRoaXMpLmNzcyh7J2JhY2tncm91bmQnIDogJyM3NGM0NzYnfSk7IFxuICAgIH0gZWxzZSBpZiAoY2VsbF92YWx1ZSA9PSAzKSB7XG4gICAgICAkKHRoaXMpLmNzcyh7J2JhY2tncm91bmQnIDogJyNiYWU0YjMnfSk7IFxuICAgIH0gZWxzZSBpZiAoY2VsbF92YWx1ZSA9PSA0KSB7XG4gICAgICAkKHRoaXMpLmNzcyh7J2JhY2tncm91bmQnIDogJyNlZGY4ZTknfSk7IFxuICAgIH0gZWxzZSB7XG4gICAgICAkKHRoaXMpLmNzcyh7J2JhY2tncm91bmQnIDogJyNmZmZmZmYnfSk7XG4gICAgfTtcblxuICB9KTtcblxufTtcblxuZXhwb3J0e1xuICBsb2FkdXJsLFxuICBvblF1YXJ0aWxlQ2hhbmdlXG59XG5cbmxvYWR1cmwoKTtcblxuXG5cbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/app.js\n");
 
 /***/ })
 
diff --git a/index.html b/index.html
index c1598b7..677d494 100644
--- a/index.html
+++ b/index.html
@@ -9,7 +9,7 @@
     </head>
 
     <body>
-
+        
         <div style= "float:left" data-id="QfO4_TreeFam-A" toTable="true" class="benchmarkingChart" ></div>
 
         </body>
diff --git a/package-lock.json b/package-lock.json
index 2c26b72..f5b9847 100644
--- a/package-lock.json
+++ b/package-lock.json
@@ -3326,6 +3326,12 @@
         "readable-stream": "^2.1.5"
       }
     },
+    "pareto-frontier": {
+      "version": "1.1.1",
+      "resolved": "https://registry.npmjs.org/pareto-frontier/-/pareto-frontier-1.1.1.tgz",
+      "integrity": "sha1-iwV5n15sDAIy5IlLFvC0ScFpilQ=",
+      "dev": true
+    },
     "parse-asn1": {
       "version": "5.1.1",
       "resolved": "https://registry.npmjs.org/parse-asn1/-/parse-asn1-5.1.1.tgz",
diff --git a/package.json b/package.json
index 2a2a7ee..0779dcf 100644
--- a/package.json
+++ b/package.json
@@ -7,6 +7,7 @@
   "devDependencies": {
     "d3": "^5.5.0",
     "jquery": "^3.3.1",
+    "pareto-frontier": "^1.1.1",
     "css-loader": "^1.0.0",
     "style-loader": "^0.21.0",
     "webpack-cli": "^3.0.8",
diff --git a/src/app.css b/src/app.css
index fbbaca7..7a7112b 100644
--- a/src/app.css
+++ b/src/app.css
@@ -84,6 +84,15 @@
         float: right;
     }
 
+    @media only screen and (max-width: 1400px) {
+
+        .benchmarkingChart{
+            /* float: left; */
+            width: 90vw;
+        }
+    }   
+
+
     /* .benchmarkingChart{
 
         -webkit-transform:scale(0.5);
diff --git a/src/app.js b/src/app.js
index 7cc5f80..622c0e1 100644
--- a/src/app.js
+++ b/src/app.js
@@ -1,6 +1,7 @@
 import * as d3 from 'd3';
 import './app.css';
 import $ from "jquery";
+import * as pf from 'pareto-frontier';
 
 
 // ./node_modules/.bin/webpack-cli src/app.js --output=build/build.js -d -w
@@ -159,14 +160,18 @@ function compute_classification(data, svg, xScale, yScale, div, width, height, r
     transform_to_table = true;
   };
 
-  let better = "bottom-right";
+  let better = "top-right";
   if (classification_type == ( divid + "__squares")) {
+    draw_pareto(data, svg, xScale, yScale, div, width, height, removed_tools,divid, better);
     get_square_quartiles(data, svg, xScale, yScale, div, removed_tools,better,divid, transform_to_table);
     append_quartile_numbers_to_plot (svg, xScale, yScale, better,divid);
   }  
   else if (classification_type == (divid + "__diagonals")) {
+    draw_pareto(data, svg, xScale, yScale, div, width, height, removed_tools,divid, better);
     get_diagonal_quartiles(data, svg, xScale, yScale, div, width, height, removed_tools, better,divid, transform_to_table);
-  } 
+  } else {
+    draw_pareto(data, svg, xScale, yScale, div, width, height, removed_tools,divid, better);
+  }
   
 };
 
@@ -266,7 +271,7 @@ function createChart (data,divid, classification_type){
 
   draw_legend (data, svg, xScale, yScale, div, width, height, removed_tools, color_func, color_func.domain(), margin,divid,classification_type);
 
-  compute_classification(data, svg, xScale, yScale, div, width, height, removed_tools,divid, classification_type);
+    compute_classification(data, svg, xScale, yScale, div, width, height, removed_tools,divid, classification_type);
 
 };
 
@@ -433,6 +438,50 @@ function draw_legend (data, svg, xScale, yScale, div, width, height, removed_too
 
 };
 
+function draw_pareto(data, svg, xScale, yScale, div, width, height, removed_tools,divid, better){
+
+  const points = [];
+
+  let tools_not_hidden = remove_hidden_tools(data, removed_tools);
+
+  tools_not_hidden.forEach(function(element) {
+    points.push([element['x'], element['y']])
+  });
+
+  let pf_coords;
+  let x_axis = xScale.domain();
+  let y_axis = yScale.domain();
+
+  if (better == "bottom-right"){
+    pf_coords = pf.getParetoFrontier(points, { optimize: 'bottomRight'});
+    // append edges to pareto frontier
+    pf_coords.unshift ([pf_coords[0][0], y_axis[1]]);
+    pf_coords.push([x_axis[0], pf_coords[pf_coords.length -1 ][1]]);
+  } else if (better == "top-right"){
+    pf_coords = pf.getParetoFrontier(points, { optimize: 'topRight'});
+    // append edges to pareto frontier
+    pf_coords.unshift ([pf_coords[0][0], y_axis[0]]);
+    pf_coords.push([x_axis[0], pf_coords[pf_coords.length -1 ][1]]);
+
+  }
+  
+  for (var i = 0; i < (pf_coords.length-1); i++) {
+    svg.append("line")
+       .attr("clip-path","url(#clip)")
+       .attr("x1", xScale(pf_coords[i][0]))
+       .attr("y1", yScale(pf_coords[i][1]))
+       .attr("x2", xScale(pf_coords[i+1][0]))
+       .attr("y2", yScale(pf_coords[i+1][1]))  
+       .attr("id", function (d) { return divid+"___pareto";})
+       .attr("stroke", "grey")
+       .attr("stroke-width",3)
+       .style("stroke-dasharray", ("20, 5"))
+       .style("opacity", 0.4)
+  };
+
+
+}
+
 function show_or_hide_participant_in_plot (ID, data, svg, xScale, yScale, div, width, height, removed_tools,divid,classification_type, legend_rect){
 
    let tool_id =ID.split("___")[1];
@@ -446,7 +495,7 @@ function show_or_hide_participant_in_plot (ID, data, svg, xScale, yScale, div, w
   svg.selectAll("#"+divid+"___num_top_right").remove();
   svg.selectAll("#"+divid+"___num_bottom_left").remove();
   svg.selectAll("#"+divid+"___num_top_left").remove();
-  
+  svg.selectAll("#"+divid+"___pareto" ).remove();
 
   let blockopacity = d3.select("#"+ID).style("opacity");
   
@@ -706,6 +755,14 @@ function get_diagonal_quartiles(data, svg, xScale, yScale, div, width, height, r
        .style("stroke-dasharray", ("20, 5"))
        .style("opacity", 0.4)
 
+    // svg.append("text")
+    // .attr("x", xScale(0.56))
+    // .attr("y", yScale(0.86))
+    // .style("opacity", 0.4)
+    // .style("font-size", "40px")
+    // .style("fill", "#0A58A2")
+    // .text("num");
+
     svg.append("clipPath")
        .attr("id", "clip")
        .append("rect")
